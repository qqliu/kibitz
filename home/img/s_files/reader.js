webpackJsonp([0],{61:function(module,exports,__webpack_require__){"use strict";var page=__webpack_require__(13);var controller=__webpack_require__(1675),config=__webpack_require__(4);var lastRoute=null;function saveLastRoute(context,next){lastRoute=context.path;next()}function setLastRoute(context,next){if(lastRoute){context.lastRoute=lastRoute}next()}function forceTeamA8C(context,next){context.params.team="a8c";next()}module.exports=function(){if(config.isEnabled("reader")){page("/",saveLastRoute,controller.removePost,controller.sidebar,controller.following);page("/read/blog/feed/:feed_id",saveLastRoute,controller.removePost,controller.sidebar,controller.feedListing);page.exit("/read/blog/feed/:feed_id",controller.resetTitle);page("/read/post/feed/:feed/:post",setLastRoute,controller.feedPost);page.exit("/read/post/feed/:feed/:post",controller.resetTitle);page("/read/blog/id/:blog_id",saveLastRoute,controller.removePost,controller.sidebar,controller.blogListing);page("/read/post/id/:blog/:post",setLastRoute,controller.blogPost);page.exit("/read/post/id/:blog/:post",controller.resetTitle);page("/tag/:tag",saveLastRoute,controller.removePost,controller.sidebar,controller.tagListing)}if(config.isEnabled("reader/teams")){page("/read/a8c",saveLastRoute,controller.removePost,controller.sidebar,forceTeamA8C,controller.readA8C)}if(config.isEnabled("reader/lists")){page("/read/list/:user/:list",saveLastRoute,controller.removePost,controller.sidebar,controller.listListing)}if(config.isEnabled("reader/activities")){page("/activities/likes",saveLastRoute,controller.removePost,controller.sidebar,controller.likes)}if(config.isEnabled("reader/following-edit")){page("/following/edit",saveLastRoute,controller.removePost,controller.sidebar,controller.followingEdit)}}},679:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2),joinClasses=__webpack_require__(55);module.exports=React.createClass({displayName:"Main",render:function render(){return React.createElement("div",{className:joinClasses(this.props.className,"main"),role:"main"},this.props.children)}})},683:function(module,exports,__webpack_require__){var createFindIndex=__webpack_require__(703);var findIndex=createFindIndex();module.exports=findIndex},684:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2),classNames=__webpack_require__(11);var NavItem=React.createClass({displayName:"NavItem",mixins:[React.addons.PureRenderMixin],propTypes:{itemType:React.PropTypes.string,path:React.PropTypes.string,selected:React.PropTypes.bool,tabIndex:React.PropTypes.number,onClick:React.PropTypes.func,isExternalLink:React.PropTypes.bool,disabled:React.PropTypes.bool},render:function render(){var itemClassPrefix=this.props.itemType?this.props.itemType:"tab",itemClasses,itemClassName,target,onClick;itemClasses={"is-selected":this.props.selected,"is-external":this.props.isExternalLink};itemClasses["section-nav-"+itemClassPrefix]=true;itemClassName=classNames(itemClasses);if(this.props.isExternalLink){target="_blank"}if(!this.props.disabled){onClick=this.props.onClick}return React.createElement("li",{className:itemClassName},React.createElement("a",{href:this.props.path,target:target,className:"section-nav-"+itemClassPrefix+"__link",onTouchTap:onClick,tabIndex:this.props.tabIndex||0,"aria-selected":this.props.selected,disabled:this.props.disabled,role:"menuitem",rel:this.props.isExternalLink?"external":null},React.createElement("span",{className:"section-nav-"+itemClassPrefix+"__text"},this.props.children,"undefined"===typeof this.props.count||false===this.props.count?null:React.createElement("span",{className:"section-nav-item__count","data-count":this.props.count}))))}});module.exports=NavItem},685:function(module,exports,__webpack_require__){"use strict";var _extends=__webpack_require__(94)["default"];var React=__webpack_require__(2),debounce=__webpack_require__(155),classNames=__webpack_require__(11);var SelectDropdown=__webpack_require__(696),DropdownItem=__webpack_require__(688);var MOBILE_PANEL_THRESHOLD=480;var NavTabs=React.createClass({displayName:"NavTabs",propTypes:{selectedText:React.PropTypes.string,label:React.PropTypes.string,hasSiblingControls:React.PropTypes.bool},getDefaultProps:function getDefaultProps(){return{hasSiblingControls:false}},getInitialState:function getInitialState(){return{isDropdown:false}},componentDidMount:function componentDidMount(){this._setDropdown();this._debouncedAfterResize=debounce(this._setDropdown,300);window.addEventListener("resize",this._debouncedAfterResize)},componentWillReceiveProps:function componentWillReceiveProps(){this._setDropdown()},componentWillUnmount:function componentWillUnmount(){window.removeEventListener("resize",this._debouncedAfterResize)},render:function render(){var tabs,tabsClassName;tabs=React.Children.map(this.props.children,function(child,index){return child?React.cloneElement(child,{ref:"tab-"+index}):null});tabsClassName=classNames({"section-nav-tabs":true,"is-dropdown":this.state.isDropdown,"is-open":this.state.isDropdownOpen,"has-siblings":this.props.hasSiblingControls});return React.createElement("div",{className:"section-nav-group",ref:"navGroup"},React.createElement("div",{className:tabsClassName},this.props.label?React.createElement("h6",{className:"section-nav-group__label"},this.props.label):null,React.createElement("ul",{className:"section-nav-tabs__list",role:"menu",onKeyDown:this._keyHandler},tabs),this.state.isDropdown&&window.innerWidth>MOBILE_PANEL_THRESHOLD?this._getDropdown():null))},_getTabWidths:function _getTabWidths(){var totalWidth=0;React.Children.forEach(this.props.children,function(child,index){if(!child){return}var tabWidth=this.refs["tab-"+index].getDOMNode().offsetWidth;totalWidth+=tabWidth}.bind(this));this.tabsWidth=totalWidth},_getDropdown:function _getDropdown(){var dropdownOptions;dropdownOptions=React.Children.map(this.props.children,function(child,index){if(!child){return null}return React.createElement(DropdownItem,_extends({},child.props,{key:"navTabsDropdown-"+index}),child.props.children)});return React.createElement(SelectDropdown,{className:"section-nav-tabs__dropdown",selectedText:this.props.selectedText,selectedCount:this.props.selectedCount},dropdownOptions)},_setDropdown:function _setDropdown(){var navGroupWidth;if(window.innerWidth>MOBILE_PANEL_THRESHOLD){if(!this.refs.navGroup){return}navGroupWidth=this.refs.navGroup.getDOMNode().offsetWidth;if(!this.tabsWidth){this._getTabWidths()}if(navGroupWidth<=this.tabsWidth&&!this.state.isDropdown){this.setState({isDropdown:true})}else if(navGroupWidth>this.tabsWidth&&this.state.isDropdown){this.setState({isDropdown:false})}}else if(window.innerWidth<=MOBILE_PANEL_THRESHOLD&&this.state.isDropdown){this.setState({isDropdown:false})}},_keyHandler:function _keyHandler(event){switch(event.keyCode){case 32:case 13:event.preventDefault();document.activeElement.click();break}}});module.exports=NavTabs},688:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2),classNames=__webpack_require__(11);var SelectDropdownItem=React.createClass({displayName:"SelectDropdownItem",propTypes:{children:React.PropTypes.string.isRequired,path:React.PropTypes.string,selected:React.PropTypes.bool,onClick:React.PropTypes.func},getDefaultProps:function getDefaultProps(){return{selected:false}},render:function render(){var optionClassName=classNames({"select-dropdown__item":true,"is-selected":this.props.selected});return React.createElement("li",{className:"select-dropdown__option"},React.createElement("a",{ref:"itemLink",href:this.props.path,className:optionClassName,onClick:this.props.onClick,"data-bold-text":this.props.value||this.props.children,role:"menuitem",tabIndex:0,"aria-selected":this.props.selected},React.createElement("span",{className:"select-dropdown__item-text"},this.props.children,"undefined"===typeof this.props.count||false===this.props.count?null:React.createElement("span",{className:"section-nav-item__count","data-count":this.props.count}))))}});module.exports=SelectDropdownItem},689:function(module,exports,__webpack_require__){"use strict";var url=__webpack_require__(43);var postNormalizer=__webpack_require__(755),config=__webpack_require__(4),sites=__webpack_require__(23)();var utils={getEditURL:function getEditURL(post,site){var editURL;if(config.isEnabled("post-editor")){editURL="/post/"+post.ID+"/"+site.slug}else{editURL="//wordpress.com/post/"+site.ID+"/"+post.ID+"/"}return editURL},getPreviewURL:function getPreviewURL(post){var parsed,site,previewUrl;if(!post||!post.URL){return""}if(post.preview_URL){previewUrl=post.preview_URL}else if(post.status==="publish"){previewUrl=post.URL}else{parsed=url.parse(post.URL,true);parsed.query.preview="true";delete parsed.search;previewUrl=url.format(parsed)}if(post.site_ID){site=sites.getSite(post.site_ID);if(site.options.is_mapped_domain){previewUrl=previewUrl.replace(site.URL,site.options.unmapped_url)}}return previewUrl},userCan:function userCan(capability,post){var hasCap=post.capabilities&&post.capabilities[capability];if(capability==="edit_post"){return hasCap&&post.status!=="trash"}return hasCap},isPublished:function isPublished(post){return post&&(post.status==="publish"||post.status==="private")},getEditedTime:function getEditedTime(post){if(!post){return false}if(post.status==="publish"||post.status==="future"){return post.date}return post.modified},isFutureDated:function isFutureDated(post){if(!post){return false}return post&&+new Date<+new Date(post.date)},isPage:function isPage(post){if(!post){return false}return post&&"page"===post.type},normalizeSync:function normalizeSync(post,callback){var imageWidth=653;postNormalizer(post,[postNormalizer.decodeEntities,postNormalizer.stripHTML,postNormalizer.firstPassCanonicalImage,postNormalizer.safeImageProperties(imageWidth),postNormalizer.withContentDOM([postNormalizer.content.removeStyles,postNormalizer.content.safeContentImages(imageWidth)])],callback)},getVisibility:function getVisibility(post){if(!post){return}if(post.password){return"password"}if("private"===post.status){return"private"}return"public"},normalizeAsync:function normalizeAsync(post,callback){postNormalizer(post,[postNormalizer.waitForImagesToLoad,postNormalizer.keepValidImages(72,72)],callback)},slugFromTitle:function slugFromTitle(post){if(!post){return}if(!post.title){return}return post.title.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/ /g,"-").replace(/\./g,"-").toLowerCase()}};module.exports=utils},690:function(module,exports,__webpack_require__){var global=__webpack_require__(41).g,store=__webpack_require__(732)("wks");module.exports=function(name){return store[name]||(store[name]=global.Symbol&&global.Symbol[name]||__webpack_require__(706).safe("Symbol."+name))}},691:function(module,exports,__webpack_require__){(function(setImmediate,clearImmediate){var nextTick=__webpack_require__(284).nextTick;var apply=Function.prototype.apply;var slice=Array.prototype.slice;var immediateIds={};var nextImmediateId=0;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)};exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)};exports.clearTimeout=exports.clearInterval=function(timeout){timeout.close()};function Timeout(id,clearFn){this._id=id;this._clearFn=clearFn}Timeout.prototype.unref=Timeout.prototype.ref=function(){};Timeout.prototype.close=function(){this._clearFn.call(window,this._id)};exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId);item._idleTimeout=msecs};exports.unenroll=function(item){clearTimeout(item._idleTimeoutId);item._idleTimeout=-1};exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;if(msecs>=0){item._idleTimeoutId=setTimeout(function onTimeout(){if(item._onTimeout)item._onTimeout()},msecs)}};exports.setImmediate=typeof setImmediate==="function"?setImmediate:function(fn){var id=nextImmediateId++;var args=arguments.length<2?false:slice.call(arguments,1);immediateIds[id]=true;nextTick(function onNextTick(){if(immediateIds[id]){if(args){fn.apply(null,args)}else{fn.call(null)}exports.clearImmediate(id)}});return id};exports.clearImmediate=typeof clearImmediate==="function"?clearImmediate:function(id){delete immediateIds[id]}}).call(exports,__webpack_require__(691).setImmediate,__webpack_require__(691).clearImmediate)},692:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(41),cof=__webpack_require__(711),classof=cof.classof,assert=__webpack_require__(698),assertObject=assert.obj,SYMBOL_ITERATOR=__webpack_require__(690)("iterator"),FF_ITERATOR="@@iterator",Iterators=__webpack_require__(732)("iterators"),IteratorPrototype={};setIterator(IteratorPrototype,$.that);function setIterator(O,value){$.hide(O,SYMBOL_ITERATOR,value);if(FF_ITERATOR in[])$.hide(O,FF_ITERATOR,value)}module.exports={BUGGY:"keys"in[]&&!("next"in[].keys()),Iterators:Iterators,step:function(done,value){return{value:value,done:!!done}},is:function(it){var O=Object(it),Symbol=$.g.Symbol;return(Symbol&&Symbol.iterator||FF_ITERATOR)in O||SYMBOL_ITERATOR in O||$.has(Iterators,classof(O))},get:function(it){var Symbol=$.g.Symbol,getIter;if(it!=undefined){getIter=it[Symbol&&Symbol.iterator||FF_ITERATOR]||it[SYMBOL_ITERATOR]||Iterators[classof(it)]}assert($.isFunction(getIter),it," is not iterable!");return assertObject(getIter.call(it))},set:setIterator,create:function(Constructor,NAME,next,proto){Constructor.prototype=$.create(proto||IteratorPrototype,{next:$.desc(1,next)});cof.set(Constructor,NAME+" Iterator")}}},695:function(module,exports,__webpack_require__){var baseCallback=__webpack_require__(32),baseUniq=__webpack_require__(298),isIterateeCall=__webpack_require__(27),sortedUniq=__webpack_require__(708);function uniq(array,isSorted,iteratee,thisArg){var length=array?array.length:0;if(!length){return[]}if(isSorted!=null&&typeof isSorted!="boolean"){thisArg=iteratee;iteratee=isIterateeCall(array,isSorted,thisArg)?undefined:isSorted;isSorted=false}iteratee=iteratee==null?iteratee:baseCallback(iteratee,thisArg,3);return isSorted?sortedUniq(array,iteratee):baseUniq(array,iteratee)}module.exports=uniq},696:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2),findWhere=__webpack_require__(702),filter=__webpack_require__(97),findIndex=__webpack_require__(683),map=__webpack_require__(282),result=__webpack_require__(712),noop=__webpack_require__(35),classNames=__webpack_require__(11);var DropdownItem=__webpack_require__(688),DropdownSeparator=__webpack_require__(710);var _instance=1;var SelectDropdown=React.createClass({displayName:"SelectDropdown",propTypes:{selectedText:React.PropTypes.string,initialSelected:React.PropTypes.string,className:React.PropTypes.string,style:React.PropTypes.object,onSelect:React.PropTypes.func,onToggle:React.PropTypes.func,focusSibling:React.PropTypes.func,tabIndex:React.PropTypes.number,options:React.PropTypes.arrayOf(React.PropTypes.shape({value:React.PropTypes.string.isRequired,label:React.PropTypes.string.isRequired,path:React.PropTypes.string}))},getInitialState:function getInitialState(){var initialState={isOpen:false};if(this.props.options){initialState.selected=this.props.initialSelected||this.props.options[0].value}return initialState},getDefaultProps:function getDefaultProps(){return{onSelect:noop,onToggle:noop}},componentWillMount:function componentWillMount(){this.id=_instance;_instance++},componentWillReceiveProps:function componentWillReceiveProps(){if(this.state.isOpen){this._closeDropdown()}},componentWillUnmount:function componentWillUnmount(){window.removeEventListener("click",this._handleOutsideClick)},componentDidUpdate:function componentDidUpdate(prevProps,prevState){if(this.state.isOpen){window.addEventListener("click",this._handleOutsideClick)}else{window.removeEventListener("click",this._handleOutsideClick)}if(this.state.isOpen!==prevState.isOpen){this.props.onToggle({target:this,open:this.state.isOpen})}},dropdownOptions:function dropdownOptions(){var refIndex=0;if(this.props.children){return React.Children.map(this.props.children,function(child,index){if(!child){return null}var newChild=React.cloneElement(child,{ref:child.type===DropdownItem?"item-"+refIndex:null,key:"item-"+index,onClick:function(event){this.refs.dropdownContainer.getDOMNode().focus();if(typeof child.props.onClick==="function"){child.props.onClick(event)}}.bind(this)});if(child.type===DropdownItem){refIndex++}return newChild},this)}return this.props.options.map(function(item,index){var dropdownItem;if(!item){return React.createElement(DropdownSeparator,{key:"dropdown-separator-"+this.id+"-"+index})}dropdownItem=React.createElement(DropdownItem,{key:"dropdown-item-"+this.id+"-"+item.value,ref:"item-"+refIndex,selected:this.state.selected===item.value,onClick:this._onSelect.bind(this,item),path:item.path},item.label);refIndex++;return dropdownItem},this)},render:function render(){var dropdownClasses,dropdownClassName,selectedText,selectedCount,style;dropdownClasses={"select-dropdown":true,"is-open":this.state.isOpen};if(this.props.className){this.props.className.split(" ").forEach(function(className){dropdownClasses[className]=true})}dropdownClassName=classNames(dropdownClasses);selectedText=this.props.selectedText?this.props.selectedText:result(findWhere(this.props.options,{value:this.state.selected}),"label");selectedCount=this.props.selectedCount;style=this.props.style||{};return React.createElement("div",{style:style,className:dropdownClassName},React.createElement("div",{ref:"dropdownContainer",className:"select-dropdown__container",onKeyDown:this._keyListener,tabIndex:this.props.tabIndex||0,"aria-haspopup":"true","aria-owns":"select-submenu-"+this.id,"aria-controls":"select-submenu-"+this.id,"aria-expanded":this.state.isOpen,onClick:this._toggleDropdown},React.createElement("div",{id:"select-dropdown-"+this.id,className:"select-dropdown__header"},React.createElement("span",{className:"select-dropdown__header-text"},selectedText,"undefined"===typeof selectedCount||false===selectedCount?null:React.createElement("span",{className:"section-nav-item__count","data-count":selectedCount}))),React.createElement("ul",{id:"select-submenu-"+this.id,className:"select-dropdown__options",role:"menu","aria-labelledby":"select-dropdown-"+this.id,"aria-expanded":this.state.isOpen},this.dropdownOptions())))},_toggleDropdown:function _toggleDropdown(){this.setState({isOpen:!this.state.isOpen})},_openDropdown:function _openDropdown(){this.setState({isOpen:true})},_closeDropdown:function _closeDropdown(){if(this.state.isOpen){delete this.focused;this.setState({isOpen:false})}},_onSelect:function _onSelect(option){if(!option){return}if(this.props.onSelect){this.props.onSelect(option)}this.setState({selected:option.value});this.refs.dropdownContainer.getDOMNode().focus()},_keyListener:function _keyListener(event){switch(event.keyCode){case 9:this._tabHandler(event);break;case 32:case 13:event.preventDefault();this._enterHandler();break;case 38:event.preventDefault();this._focusSibling("previous");this._openDropdown();break;case 40:event.preventDefault();this._focusSibling("next");this._openDropdown();break;case 27:event.preventDefault();this._closeDropdown();this.refs.dropdownContainer.getDOMNode().focus();break}},_tabHandler:function _tabHandler(event){var direction;if(!this.state.isOpen){return}event.preventDefault();direction=event.shiftKey?"previous":"next";this._focusSibling(direction)},_enterHandler:function _enterHandler(){if(!this.state.isOpen){return this._openDropdown()}document.activeElement.click()},_focusSibling:function _focusSibling(direction){var increment,items,focusedIndex,newIndex;if(!this.state.isOpen){return}if(this.props.options){items=filter(map(this.props.options,"value"),Boolean);focusedIndex=typeof this.focused==="number"?this.focused:items.indexOf(this.state.selected)}else{items=filter(this.props.children,function(item){return item.type===DropdownItem});focusedIndex=typeof this.focused==="number"?this.focused:findIndex(items,function(item){return item.props.selected})}increment=direction==="previous"?-1:1;newIndex=focusedIndex+increment;if(newIndex>=items.length||newIndex<0){return}this.refs["item-"+newIndex].refs.itemLink.getDOMNode().focus();this.focused=newIndex},_handleOutsideClick:function _handleOutsideClick(event){if(!React.findDOMNode(this.refs.dropdownContainer).contains(event.target)){this._closeDropdown()}}});module.exports=SelectDropdown},698:function(module,exports,__webpack_require__){var $=__webpack_require__(41);function assert(condition,msg1,msg2){if(!condition)throw TypeError(msg2?msg1+msg2:msg1)}assert.def=$.assertDefined;assert.fn=function(it){if(!$.isFunction(it))throw TypeError(it+" is not a function!");return it};assert.obj=function(it){if(!$.isObject(it))throw TypeError(it+" is not an object!");return it};assert.inst=function(it,Constructor,name){if(!(it instanceof Constructor))throw TypeError(name+": use the 'new' operator!");return it};module.exports=assert},700:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2),isEqual=__webpack_require__(96),classNames=__webpack_require__(11);var NavTabs=__webpack_require__(685),NavItem=__webpack_require__(684),Search=__webpack_require__(157);var SectionNav=React.createClass({displayName:"SectionNav",propTypes:{children:React.PropTypes.node,selectedText:React.PropTypes.node,hasPinnedItems:React.PropTypes.bool,onMobileNavPanelOpen:React.PropTypes.func},getInitialState:function getInitialState(){return{mobileOpen:false}},getDefaultProps:function getDefaultProps(){return{onMobileNavPanelOpen:function onMobileNavPanelOpen(){}}},componentWillMount:function componentWillMount(){this._checkForSiblingControls(this.props.children)},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(isEqual(this.props,nextProps)){return}this._checkForSiblingControls(nextProps.children);if(!this.hasSiblingControls){this._closeMobilePanel()}},render:function render(){var children=this._getChildren(),className;if(!children){className=classNames({"section-nav":true,"is-empty":true});return React.createElement("div",{className:className},React.createElement("div",{className:"section-nav__panel"},React.createElement(NavItem,null)))}className=classNames({"section-nav":true,"is-open":this.state.mobileOpen,"has-pinned-items":this.hasPinnedSearch||this.props.hasPinnedItems});return React.createElement("div",{className:className},React.createElement("div",{className:"section-nav__mobile-header",onTouchTap:this._toggleMobileOpenState},React.createElement("span",{className:"section-nav__mobile-header-text"},this.props.selectedText)),React.createElement("div",{className:"section-nav__panel"},children))},_getChildren:function _getChildren(){return React.Children.map(this.props.children,function(child){var extraProps={hasSiblingControls:this.hasSiblingControls,closeSectionNavMobilePanel:this._closeMobilePanel};if(!child){return null}if(child.type===NavTabs&&!child.props.selectedText&&typeof this.props.selectedText==="string"){extraProps.selectedText=this.props.selectedText}if(child.type===NavTabs&&this.props.selectedCount){extraProps.selectedCount=this.props.selectedCount}if(child.type===Search){if(child.props.pinned){this.hasPinnedSearch=true}extraProps.onSearch=this._generateOnSearch(child.props.onSearch)}return React.cloneElement(child,extraProps)}.bind(this))},_closeMobilePanel:function _closeMobilePanel(){if(window.innerWidth<480&&this.state.mobileOpen){this.setState({mobileOpen:false})}},_toggleMobileOpenState:function _toggleMobileOpenState(){var mobileOpen=!this.state.mobileOpen;this.setState({mobileOpen:mobileOpen});if(mobileOpen){this.props.onMobileNavPanelOpen()}},_generateOnSearch:function _generateOnSearch(existingOnSearch){return function(){existingOnSearch.apply(this,arguments);this._closeMobilePanel()}.bind(this)},_checkForSiblingControls:function _checkForSiblingControls(children){this.hasSiblingControls=false;React.Children.forEach(children,function(child,index){if(index&&child&&child.type!==Search){this.hasSiblingControls=true}}.bind(this))}});module.exports=SectionNav},701:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.recordAction=recordAction;exports.recordGaEvent=recordGaEvent;exports.recordPermalinkClick=recordPermalinkClick;exports.recordFollow=recordFollow;exports.recordUnfollow=recordUnfollow;var _analytics=__webpack_require__(12);function recordAction(action){_analytics.mc.bumpStat("reader_actions",action)}function recordGaEvent(action,label,value){_analytics.ga.recordEvent("Reader",action,label,value)}function recordPermalinkClick(where){_analytics.mc.bumpStat({reader_actions:"visited_post_permalink",reader_permalink_source:where})}function getLocation(){if(typeof window==="undefined"){return"unknown"}var path=window.location.pathname;if(path==="/"){return"following"}if(path.indexOf("/tag/")===0){return"topic_page"}if(path.indexOf("/read/blog/")===0){return"blog_page"}if(path.indexOf("/read/post/")===0){return"single_post"}if(path.indexOf("/read/list/")===0){return"list"}if(path.indexOf("/activities/likes")===0){return"postlike"}return"unknown"}function recordFollow(){_analytics.mc.bumpStat("reader_follows",getLocation())}function recordUnfollow(){_analytics.mc.bumpStat("reader_unfollows",getLocation())}},702:function(module,exports,__webpack_require__){var baseMatches=__webpack_require__(166),find=__webpack_require__(56);function findWhere(collection,source){return find(collection,baseMatches(source))}module.exports=findWhere},703:function(module,exports,__webpack_require__){var baseCallback=__webpack_require__(32),baseFindIndex=__webpack_require__(297);function createFindIndex(fromRight){return function(array,predicate,thisArg){if(!(array&&array.length)){return-1}predicate=baseCallback(predicate,thisArg,3);return baseFindIndex(array,predicate,fromRight)}}module.exports=createFindIndex},704:function(module,exports,__webpack_require__){var baseForOwn=__webpack_require__(104),createForOwn=__webpack_require__(723);var forOwn=createForOwn(baseForOwn);module.exports=forOwn},706:function(module,exports,__webpack_require__){var sid=0;function uid(key){return"Symbol(".concat(key===undefined?"":key,")_",(++sid+Math.random()).toString(36))}uid.safe=__webpack_require__(41).g.Symbol||uid;module.exports=uid},708:function(module,exports){function sortedUniq(array,iteratee){var seen,index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(!index||seen!==computed){seen=computed;result[++resIndex]=value}}return result}module.exports=sortedUniq},709:function(module,exports){function first(array){return array?array[0]:undefined}module.exports=first},710:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(14);var SelectDropdownSeparator=React.createClass({displayName:"SelectDropdownSeparator",render:function render(){return React.createElement("li",{className:"select-dropdown__separator"})}});module.exports=SelectDropdownSeparator},711:function(module,exports,__webpack_require__){var $=__webpack_require__(41),TAG=__webpack_require__(690)("toStringTag"),toString={}.toString;function cof(it){return toString.call(it).slice(8,-1)}cof.classof=function(it){var O,T;return it==undefined?it===undefined?"Undefined":"Null":typeof(T=(O=Object(it))[TAG])=="string"?T:cof(O)};cof.set=function(it,tag,stat){if(it&&!$.has(it=stat?it:it.prototype,TAG))$.hide(it,TAG,tag)};module.exports=cof},712:function(module,exports,__webpack_require__){var baseGet=__webpack_require__(165),baseSlice=__webpack_require__(168),isFunction=__webpack_require__(161),isKey=__webpack_require__(169),last=__webpack_require__(159),toPath=__webpack_require__(167);function result(object,path,defaultValue){var result=object==null?undefined:object[path];if(result===undefined){if(object!=null&&!isKey(path,object)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));result=object==null?undefined:object[last(path)]}result=result===undefined?defaultValue:result}return isFunction(result)?result.call(object):result}module.exports=result},716:function(module,exports,__webpack_require__){(function(global){var bindCallback=__webpack_require__(47);var nativeFloor=Math.floor,nativeIsFinite=global.isFinite,nativeMin=Math.min;var MAX_ARRAY_LENGTH=4294967295;function times(n,iteratee,thisArg){n=nativeFloor(n);if(n<1||!nativeIsFinite(n)){return[]}var index=-1,result=Array(nativeMin(n,MAX_ARRAY_LENGTH));iteratee=bindCallback(iteratee,thisArg,1);while(++index<n){if(index<MAX_ARRAY_LENGTH){result[index]=iteratee(index)}else{iteratee(index)}}return result}module.exports=times}).call(exports,function(){return this}())},718:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(process,setImmediate){(function(){var async={};var root,previous_async;root=this;if(root!=null){previous_async=root.async}async.noConflict=function(){root.async=previous_async;return async};function only_once(fn){var called=false;return function(){if(called)throw new Error("Callback was already called.");called=true;fn.apply(root,arguments)}}var _toString=Object.prototype.toString;var _isArray=Array.isArray||function(obj){return _toString.call(obj)==="[object Array]"};var _each=function(arr,iterator){if(arr.forEach){return arr.forEach(iterator)}for(var i=0;i<arr.length;i+=1){iterator(arr[i],i,arr)}};var _map=function(arr,iterator){if(arr.map){return arr.map(iterator)}var results=[];_each(arr,function(x,i,a){results.push(iterator(x,i,a))});return results};var _reduce=function(arr,iterator,memo){if(arr.reduce){return arr.reduce(iterator,memo)}_each(arr,function(x,i,a){memo=iterator(memo,x,i,a)});return memo};var _keys=function(obj){if(Object.keys){return Object.keys(obj)}var keys=[];for(var k in obj){if(obj.hasOwnProperty(k)){keys.push(k)}}return keys};if(typeof process==="undefined"||!process.nextTick){if(typeof setImmediate==="function"){async.nextTick=function(fn){setImmediate(fn)};async.setImmediate=async.nextTick}else{async.nextTick=function(fn){setTimeout(fn,0)};async.setImmediate=async.nextTick}}else{async.nextTick=process.nextTick;if(typeof setImmediate!=="undefined"){async.setImmediate=function(fn){setImmediate(fn)}}else{async.setImmediate=async.nextTick}}async.each=function(arr,iterator,callback){callback=callback||function(){};if(!arr.length){return callback()}var completed=0;_each(arr,function(x){iterator(x,only_once(done))});function done(err){if(err){callback(err);callback=function(){}}else{completed+=1;if(completed>=arr.length){callback()}}}};async.forEach=async.each;async.eachSeries=function(arr,iterator,callback){callback=callback||function(){};if(!arr.length){return callback()}var completed=0;var iterate=function(){iterator(arr[completed],function(err){if(err){callback(err);callback=function(){}}else{completed+=1;if(completed>=arr.length){callback()}else{iterate()}}})};iterate()};async.forEachSeries=async.eachSeries;async.eachLimit=function(arr,limit,iterator,callback){var fn=_eachLimit(limit);fn.apply(null,[arr,iterator,callback])};async.forEachLimit=async.eachLimit;var _eachLimit=function(limit){return function(arr,iterator,callback){callback=callback||function(){};if(!arr.length||limit<=0){return callback()}var completed=0;var started=0;var running=0;(function replenish(){if(completed>=arr.length){return callback()}while(running<limit&&started<arr.length){started+=1;running+=1;iterator(arr[started-1],function(err){if(err){callback(err);callback=function(){}}else{completed+=1;running-=1;if(completed>=arr.length){callback()}else{replenish()}}})}})()}};var doParallel=function(fn){return function(){
var args=Array.prototype.slice.call(arguments);return fn.apply(null,[async.each].concat(args))}};var doParallelLimit=function(limit,fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[_eachLimit(limit)].concat(args))}};var doSeries=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[async.eachSeries].concat(args))}};var _asyncMap=function(eachfn,arr,iterator,callback){arr=_map(arr,function(x,i){return{index:i,value:x}});if(!callback){eachfn(arr,function(x,callback){iterator(x.value,function(err){callback(err)})})}else{var results=[];eachfn(arr,function(x,callback){iterator(x.value,function(err,v){results[x.index]=v;callback(err)})},function(err){callback(err,results)})}};async.map=doParallel(_asyncMap);async.mapSeries=doSeries(_asyncMap);async.mapLimit=function(arr,limit,iterator,callback){return _mapLimit(limit)(arr,iterator,callback)};var _mapLimit=function(limit){return doParallelLimit(limit,_asyncMap)};async.reduce=function(arr,memo,iterator,callback){async.eachSeries(arr,function(x,callback){iterator(memo,x,function(err,v){memo=v;callback(err)})},function(err){callback(err,memo)})};async.inject=async.reduce;async.foldl=async.reduce;async.reduceRight=function(arr,memo,iterator,callback){var reversed=_map(arr,function(x){return x}).reverse();async.reduce(reversed,memo,iterator,callback)};async.foldr=async.reduceRight;var _filter=function(eachfn,arr,iterator,callback){var results=[];arr=_map(arr,function(x,i){return{index:i,value:x}});eachfn(arr,function(x,callback){iterator(x.value,function(v){if(v){results.push(x)}callback()})},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})};async.filter=doParallel(_filter);async.filterSeries=doSeries(_filter);async.select=async.filter;async.selectSeries=async.filterSeries;var _reject=function(eachfn,arr,iterator,callback){var results=[];arr=_map(arr,function(x,i){return{index:i,value:x}});eachfn(arr,function(x,callback){iterator(x.value,function(v){if(!v){results.push(x)}callback()})},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})};async.reject=doParallel(_reject);async.rejectSeries=doSeries(_reject);var _detect=function(eachfn,arr,iterator,main_callback){eachfn(arr,function(x,callback){iterator(x,function(result){if(result){main_callback(x);main_callback=function(){}}else{callback()}})},function(err){main_callback()})};async.detect=doParallel(_detect);async.detectSeries=doSeries(_detect);async.some=function(arr,iterator,main_callback){async.each(arr,function(x,callback){iterator(x,function(v){if(v){main_callback(true);main_callback=function(){}}callback()})},function(err){main_callback(false)})};async.any=async.some;async.every=function(arr,iterator,main_callback){async.each(arr,function(x,callback){iterator(x,function(v){if(!v){main_callback(false);main_callback=function(){}}callback()})},function(err){main_callback(true)})};async.all=async.every;async.sortBy=function(arr,iterator,callback){async.map(arr,function(x,callback){iterator(x,function(err,criteria){if(err){callback(err)}else{callback(null,{value:x,criteria:criteria})}})},function(err,results){if(err){return callback(err)}else{var fn=function(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:a>b?1:0};callback(null,_map(results.sort(fn),function(x){return x.value}))}})};async.auto=function(tasks,callback){callback=callback||function(){};var keys=_keys(tasks);var remainingTasks=keys.length;if(!remainingTasks){return callback()}var results={};var listeners=[];var addListener=function(fn){listeners.unshift(fn)};var removeListener=function(fn){for(var i=0;i<listeners.length;i+=1){if(listeners[i]===fn){listeners.splice(i,1);return}}};var taskComplete=function(){remainingTasks--;_each(listeners.slice(0),function(fn){fn()})};addListener(function(){if(!remainingTasks){var theCallback=callback;callback=function(){};theCallback(null,results)}});_each(keys,function(k){var task=_isArray(tasks[k])?tasks[k]:[tasks[k]];var taskCallback=function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0]}if(err){var safeResults={};_each(_keys(results),function(rkey){safeResults[rkey]=results[rkey]});safeResults[k]=args;callback(err,safeResults);callback=function(){}}else{results[k]=args;async.setImmediate(taskComplete)}};var requires=task.slice(0,Math.abs(task.length-1))||[];var ready=function(){return _reduce(requires,function(a,x){return a&&results.hasOwnProperty(x)},true)&&!results.hasOwnProperty(k)};if(ready()){task[task.length-1](taskCallback,results)}else{var listener=function(){if(ready()){removeListener(listener);task[task.length-1](taskCallback,results)}};addListener(listener)}})};async.retry=function(times,task,callback){var DEFAULT_TIMES=5;var attempts=[];if(typeof times==="function"){callback=task;task=times;times=DEFAULT_TIMES}times=parseInt(times,10)||DEFAULT_TIMES;var wrappedTask=function(wrappedCallback,wrappedResults){var retryAttempt=function(task,finalAttempt){return function(seriesCallback){task(function(err,result){seriesCallback(!err||finalAttempt,{err:err,result:result})},wrappedResults)}};while(times){attempts.push(retryAttempt(task,!(times-=1)))}async.series(attempts,function(done,data){data=data[data.length-1];(wrappedCallback||callback)(data.err,data.result)})};return callback?wrappedTask():wrappedTask};async.waterfall=function(tasks,callback){callback=callback||function(){};if(!_isArray(tasks)){var err=new Error("First argument to waterfall must be an array of functions");return callback(err)}if(!tasks.length){return callback()}var wrapIterator=function(iterator){return function(err){if(err){callback.apply(null,arguments);callback=function(){}}else{var args=Array.prototype.slice.call(arguments,1);var next=iterator.next();if(next){args.push(wrapIterator(next))}else{args.push(callback)}async.setImmediate(function(){iterator.apply(null,args)})}}};wrapIterator(async.iterator(tasks))()};var _parallel=function(eachfn,tasks,callback){callback=callback||function(){};if(_isArray(tasks)){eachfn.map(tasks,function(fn,callback){if(fn){fn(function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0]}callback.call(null,err,args)})}},callback)}else{var results={};eachfn.each(_keys(tasks),function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0]}results[k]=args;callback(err)})},function(err){callback(err,results)})}};async.parallel=function(tasks,callback){_parallel({map:async.map,each:async.each},tasks,callback)};async.parallelLimit=function(tasks,limit,callback){_parallel({map:_mapLimit(limit),each:_eachLimit(limit)},tasks,callback)};async.series=function(tasks,callback){callback=callback||function(){};if(_isArray(tasks)){async.mapSeries(tasks,function(fn,callback){if(fn){fn(function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0]}callback.call(null,err,args)})}},callback)}else{var results={};async.eachSeries(_keys(tasks),function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0]}results[k]=args;callback(err)})},function(err){callback(err,results)})}};async.iterator=function(tasks){var makeCallback=function(index){var fn=function(){if(tasks.length){tasks[index].apply(null,arguments)}return fn.next()};fn.next=function(){return index<tasks.length-1?makeCallback(index+1):null};return fn};return makeCallback(0)};async.apply=function(fn){var args=Array.prototype.slice.call(arguments,1);return function(){return fn.apply(null,args.concat(Array.prototype.slice.call(arguments)))}};var _concat=function(eachfn,arr,fn,callback){var r=[];eachfn(arr,function(x,cb){fn(x,function(err,y){r=r.concat(y||[]);cb(err)})},function(err){callback(err,r)})};async.concat=doParallel(_concat);async.concatSeries=doSeries(_concat);async.whilst=function(test,iterator,callback){if(test()){iterator(function(err){if(err){return callback(err)}async.whilst(test,iterator,callback)})}else{callback()}};async.doWhilst=function(iterator,test,callback){iterator(function(err){if(err){return callback(err)}var args=Array.prototype.slice.call(arguments,1);if(test.apply(null,args)){async.doWhilst(iterator,test,callback)}else{callback()}})};async.until=function(test,iterator,callback){if(!test()){iterator(function(err){if(err){return callback(err)}async.until(test,iterator,callback)})}else{callback()}};async.doUntil=function(iterator,test,callback){iterator(function(err){if(err){return callback(err)}var args=Array.prototype.slice.call(arguments,1);if(!test.apply(null,args)){async.doUntil(iterator,test,callback)}else{callback()}})};async.queue=function(worker,concurrency){if(concurrency===undefined){concurrency=1}function _insert(q,data,pos,callback){if(!q.started){q.started=true}if(!_isArray(data)){data=[data]}if(data.length==0){return async.setImmediate(function(){if(q.drain){q.drain()}})}_each(data,function(task){var item={data:task,callback:typeof callback==="function"?callback:null};if(pos){q.tasks.unshift(item)}else{q.tasks.push(item)}if(q.saturated&&q.tasks.length===q.concurrency){q.saturated()}async.setImmediate(q.process)})}var workers=0;var q={tasks:[],concurrency:concurrency,saturated:null,empty:null,drain:null,started:false,paused:false,push:function(data,callback){_insert(q,data,false,callback)},kill:function(){q.drain=null;q.tasks=[]},unshift:function(data,callback){_insert(q,data,true,callback)},process:function(){if(!q.paused&&workers<q.concurrency&&q.tasks.length){var task=q.tasks.shift();if(q.empty&&q.tasks.length===0){q.empty()}workers+=1;var next=function(){workers-=1;if(task.callback){task.callback.apply(task,arguments)}if(q.drain&&q.tasks.length+workers===0){q.drain()}q.process()};var cb=only_once(next);worker(task.data,cb)}},length:function(){return q.tasks.length},running:function(){return workers},idle:function(){return q.tasks.length+workers===0},pause:function(){if(q.paused===true){return}q.paused=true;q.process()},resume:function(){if(q.paused===false){return}q.paused=false;q.process()}};return q};async.priorityQueue=function(worker,concurrency){function _compareTasks(a,b){return a.priority-b.priority}function _binarySearch(sequence,item,compare){var beg=-1,end=sequence.length-1;while(beg<end){var mid=beg+(end-beg+1>>>1);if(compare(item,sequence[mid])>=0){beg=mid}else{end=mid-1}}return beg}function _insert(q,data,priority,callback){if(!q.started){q.started=true}if(!_isArray(data)){data=[data]}if(data.length==0){return async.setImmediate(function(){if(q.drain){q.drain()}})}_each(data,function(task){var item={data:task,priority:priority,callback:typeof callback==="function"?callback:null};q.tasks.splice(_binarySearch(q.tasks,item,_compareTasks)+1,0,item);if(q.saturated&&q.tasks.length===q.concurrency){q.saturated()}async.setImmediate(q.process)})}var q=async.queue(worker,concurrency);q.push=function(data,priority,callback){_insert(q,data,priority,callback)};delete q.unshift;return q};async.cargo=function(worker,payload){var working=false,tasks=[];var cargo={tasks:tasks,payload:payload,saturated:null,empty:null,drain:null,drained:true,push:function(data,callback){if(!_isArray(data)){data=[data]}_each(data,function(task){tasks.push({data:task,callback:typeof callback==="function"?callback:null});cargo.drained=false;if(cargo.saturated&&tasks.length===payload){cargo.saturated()}});async.setImmediate(cargo.process)},process:function process(){if(working)return;if(tasks.length===0){if(cargo.drain&&!cargo.drained)cargo.drain();cargo.drained=true;return}var ts=typeof payload==="number"?tasks.splice(0,payload):tasks.splice(0,tasks.length);var ds=_map(ts,function(task){return task.data});if(cargo.empty)cargo.empty();working=true;worker(ds,function(){working=false;var args=arguments;_each(ts,function(data){if(data.callback){data.callback.apply(null,args)}});process()})},length:function(){return tasks.length},running:function(){return working}};return cargo};var _console_fn=function(name){return function(fn){var args=Array.prototype.slice.call(arguments,1);fn.apply(null,args.concat([function(err){var args=Array.prototype.slice.call(arguments,1);if(typeof console!=="undefined"){if(err){if(console.error){console.error(err)}}else if(console[name]){_each(args,function(x){console[name](x)})}}}]))}};async.log=_console_fn("log");async.dir=_console_fn("dir");async.memoize=function(fn,hasher){var memo={};var queues={};hasher=hasher||function(x){return x};var memoized=function(){var args=Array.prototype.slice.call(arguments);var callback=args.pop();var key=hasher.apply(null,args);if(key in memo){async.nextTick(function(){callback.apply(null,memo[key])})}else if(key in queues){queues[key].push(callback)}else{queues[key]=[callback];fn.apply(null,args.concat([function(){memo[key]=arguments;var q=queues[key];delete queues[key];for(var i=0,l=q.length;i<l;i++){q[i].apply(null,arguments)}}]))}};memoized.memo=memo;memoized.unmemoized=fn;return memoized};async.unmemoize=function(fn){return function(){return(fn.unmemoized||fn).apply(null,arguments)}};async.times=function(count,iterator,callback){var counter=[];for(var i=0;i<count;i++){counter.push(i)}return async.map(counter,iterator,callback)};async.timesSeries=function(count,iterator,callback){var counter=[];for(var i=0;i<count;i++){counter.push(i)}return async.mapSeries(counter,iterator,callback)};async.seq=function(){var fns=arguments;return function(){var that=this;var args=Array.prototype.slice.call(arguments);var callback=args.pop();async.reduce(fns,args,function(newargs,fn,cb){fn.apply(that,newargs.concat([function(){var err=arguments[0];var nextargs=Array.prototype.slice.call(arguments,1);cb(err,nextargs)}]))},function(err,results){callback.apply(that,[err].concat(results))})}};async.compose=function(){return async.seq.apply(null,Array.prototype.reverse.call(arguments))};var _applyEach=function(eachfn,fns){var go=function(){var that=this;var args=Array.prototype.slice.call(arguments);var callback=args.pop();return eachfn(fns,function(fn,cb){fn.apply(that,args.concat([cb]))},callback)};if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2);return go.apply(this,args)}else{return go}};async.applyEach=doParallel(_applyEach);async.applyEachSeries=doSeries(_applyEach);async.forever=function(fn,callback){function next(err){if(err){if(callback){return callback(err)}throw err}fn(next)}next()};if(typeof module!=="undefined"&&module.exports){module.exports=async}else if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return async}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{root.async=async}})()}).call(exports,__webpack_require__(284),__webpack_require__(691).setImmediate)},723:function(module,exports,__webpack_require__){var bindCallback=__webpack_require__(47);function createForOwn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!="function"||thisArg!==undefined){iteratee=bindCallback(iteratee,thisArg,3)}return objectFunc(object,iteratee)}}module.exports=createForOwn},724:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2),joinClasses=__webpack_require__(55);var MenuItem=React.createClass({displayName:"MenuItem",getDefaultProps:function getDefaultProps(){return{isVisible:false,className:"",focusOnHover:true}},render:function render(){var onMouseOver=this.props.focusOnHover?this._onMouseOver:null;return React.createElement("button",{className:joinClasses("popover__menu-item",this.props.className),role:"menuitem",disabled:this.props.disabled,onClick:this.props.onClick,onMouseOver:onMouseOver,tabIndex:"-1"},this.props.children)},_onMouseOver:function _onMouseOver(){this.getDOMNode().focus()}});module.exports=MenuItem},727:function(module,exports,__webpack_require__){var assertFunction=__webpack_require__(698).fn;module.exports=function(fn,that,length){assertFunction(fn);if(~length&&that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},728:function(module,exports,__webpack_require__){var $def=__webpack_require__(164),$redef=__webpack_require__(729),$=__webpack_require__(41),cof=__webpack_require__(711),$iter=__webpack_require__(692),SYMBOL_ITERATOR=__webpack_require__(690)("iterator"),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values",Iterators=$iter.Iterators;module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCE){$iter.create(Constructor,NAME,next);function createMethod(kind){function $$(that){return new Constructor(that,kind)}switch(kind){case KEYS:return function keys(){return $$(this)};case VALUES:return function values(){return $$(this)}}return function entries(){return $$(this)}}var TAG=NAME+" Iterator",proto=Base.prototype,_native=proto[SYMBOL_ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT],_default=_native||createMethod(DEFAULT),methods,key;if(_native){var IteratorPrototype=$.getProto(_default.call(new Base));cof.set(IteratorPrototype,TAG,true);if($.FW&&$.has(proto,FF_ITERATOR))$iter.set(IteratorPrototype,$.that)}if($.FW||FORCE)$iter.set(proto,_default);Iterators[NAME]=_default;Iterators[TAG]=$.that;if(DEFAULT){methods={keys:IS_SET?_default:createMethod(KEYS),values:DEFAULT==VALUES?_default:createMethod(VALUES),entries:DEFAULT!=VALUES?_default:createMethod("entries")};if(FORCE)for(key in methods){if(!(key in proto))$redef(proto,key,methods[key])}else $def($def.P+$def.F*$iter.BUGGY,NAME,methods)}}},729:function(module,exports,__webpack_require__){module.exports=__webpack_require__(41).hide},730:function(module,exports,__webpack_require__){var baseClone=__webpack_require__(302),bindCallback=__webpack_require__(47);function cloneDeep(value,customizer,thisArg){return typeof customizer=="function"?baseClone(value,true,bindCallback(customizer,thisArg,1)):baseClone(value,true)}module.exports=cloneDeep},731:function(module,exports,__webpack_require__){"use strict";var _Object$keys=__webpack_require__(73)["default"];var debug=__webpack_require__(1)("calypso:infinite-list"),omit=__webpack_require__(81),raf=__webpack_require__(743),React=__webpack_require__(2),page=__webpack_require__(13);var ScrollHelper=__webpack_require__(748),InfiniteListPositionsStore=__webpack_require__(751),InfiniteListScrollStore=__webpack_require__(752),InfiniteListActions=__webpack_require__(750),detectHistoryNavigation=__webpack_require__(310);module.exports=React.createClass({displayName:"InfiniteList",lastScrollTop:-1,scrollRAFHandle:false,scrollHelper:null,propTypes:{items:React.PropTypes.array.isRequired,fetchingNextPage:React.PropTypes.bool.isRequired,lastPage:React.PropTypes.bool.isRequired,guessedItemHeight:React.PropTypes.number.isRequired,itemsPerRow:React.PropTypes.number,fetchNextPage:React.PropTypes.func.isRequired,getItemRef:React.PropTypes.func.isRequired,renderItem:React.PropTypes.func.isRequired,renderLoadingPlaceholders:React.PropTypes.func.isRequired,context:React.PropTypes.object},getDefaultProps:function getDefaultProps(){return{itemsPerRow:1}},componentWillMount:function componentWillMount(){var url=page.current,newState,scrollPosition;if(detectHistoryNavigation.loadedViaHistory()){newState=InfiniteListPositionsStore.get(url);scrollPosition=InfiniteListScrollStore.get(url)}if(newState&&scrollPosition){debug("overriding scrollTop:",scrollPosition);newState.scrollTop=scrollPosition}this.scrollHelper=new ScrollHelper(this.boundsForRef);this.scrollHelper.props=this.props;this.scrollHelper.updateContextHeight(this.getCurrentContextHeight());if(newState){debug("infinite-list positions loaded from store")}else{debug("infinite-list positions reset for new list");newState={firstRenderedIndex:0,topPlaceholderHeight:0,lastRenderedIndex:this.scrollHelper.initialLastRenderedIndex(),bottomPlaceholderHeight:0,scrollTop:0}}debug("infinite list mounting",newState);this.setState(newState)},componentDidMount:function componentDidMount(){this._setContainerY(this.state.scrollTop);if(detectHistoryNavigation.loadedViaHistory()){this._overrideHistoryScroll()}debug("setting scrollTop:",this.state.scrollTop);this.updateScroll({triggeredByScroll:false});(this.props.context||window).addEventListener("scroll",this.onScroll)},componentWillReceiveProps:function componentWillReceiveProps(newProps){this.scrollHelper.props=newProps;this.cancelAnimationFrame();this.updateScroll({triggeredByScroll:false});if(newProps.context!==this.props.context){(this.props.context||window).removeEventListener("scroll",this._resetScroll)}},componentDidUpdate:function componentDidUpdate(prevProps){this.cancelAnimationFrame();this.updateScroll({triggeredByScroll:false});if(this.props.context!==prevProps.context){(prevProps.context||window).removeEventListener("scroll",this.onScroll);(this.props.context||window).addEventListener("scroll",this.onScroll)}},componentWillUnmount:function componentWillUnmount(){var scrollContainer=this.props.context||window;scrollContainer.removeEventListener("scroll",this.onScroll);scrollContainer.removeEventListener("scroll",this._resetScroll);this.cancelAnimationFrame()},cancelAnimationFrame:function cancelAnimationFrame(){if(this.scrollRAFHandle){raf.cancel(this.scrollRAFHandle);this.scrollRAFHandle=null}this.lastScrollTop=-1},onScroll:function onScroll(){if(!this.scrollRAFHandle&&this.getCurrentScrollTop()!==this.lastScrollTop){this.scrollRAFHandle=raf(this.scrollChecks)}},getCurrentContextHeight:function getCurrentContextHeight(){var context=this.props.context||window.document.documentElement;return context.clientHeight},getCurrentScrollTop:function getCurrentScrollTop(){if(this.props.context){debug("getting scrollTop from context");return this.props.context.scrollTop}return window.pageYOffset},scrollChecks:function scrollChecks(){if(!this.isMounted()||this.getCurrentScrollTop()===this.lastScrollTop){this.scrollRAFHandle=null;return}this.updateScroll({triggeredByScroll:true})},updateScroll:function updateScroll(options){var url=page.current,newState;this.lastScrollTop=this.getCurrentScrollTop();InfiniteListActions.storeScroll(url,this.lastScrollTop);debug("storing scroll position:",this.lastScrollTop);this.scrollHelper.updateContextHeight(this.getCurrentContextHeight());this.scrollHelper.scrollPosition=this.lastScrollTop;this.scrollHelper.triggeredByScroll=options.triggeredByScroll;this.scrollHelper.updatePlaceholderDimensions();this.scrollHelper.scrollChecks(this.state);if(this.scrollHelper.stateUpdated){newState={firstRenderedIndex:this.scrollHelper.firstRenderedIndex,topPlaceholderHeight:this.scrollHelper.topPlaceholderHeight,lastRenderedIndex:this.scrollHelper.lastRenderedIndex,bottomPlaceholderHeight:this.scrollHelper.bottomPlaceholderHeight,scrollTop:this.lastScrollTop};this.lastScrollTop=-1;debug("new scroll positions",newState);this.setState(newState);InfiniteListActions.storePositions(url,newState)}this.scrollRAFHandle=raf(this.scrollChecks)},boundsForRef:function boundsForRef(ref){if(ref in this.refs){return this.refs[ref].getDOMNode().getBoundingClientRect()}return null},render:function render(){var lastRenderedIndex=this.state.lastRenderedIndex,itemsToRender=[],propsToTransfer=omit(this.props,_Object$keys(this.constructor.propTypes)),spacerClassName="infinite-list__spacer",i;if(lastRenderedIndex===-1||lastRenderedIndex>this.props.items.length-1){lastRenderedIndex=this.props.items.length-1}for(i=this.state.firstRenderedIndex;i<=lastRenderedIndex;i++){itemsToRender.push(this.props.renderItem(this.props.items[i],i))}if(this.props.fetchingNextPage){itemsToRender=itemsToRender.concat(this.props.renderLoadingPlaceholders())}return React.createElement("div",propsToTransfer,React.createElement("div",{ref:"topPlaceholder",className:spacerClassName,style:{height:this.state.topPlaceholderHeight}}),itemsToRender,React.createElement("div",{ref:"bottomPlaceholder",className:spacerClassName,style:{height:this.state.bottomPlaceholderHeight}}))},_setContainerY:function _setContainerY(position){if(this.props.context&&this.props.context!==window){this.props.context.scrollTop=position;return}window.scrollTo(0,position)},_overrideHistoryScroll:function _overrideHistoryScroll(){var scrollContainer=this.props.context||window;scrollContainer.addEventListener("scroll",this._resetScroll)},_resetScroll:function _resetScroll(event){var scrollContainer=this.props.context||window,position=this.state.scrollTop;debug("history setting scroll position:",event);this._setContainerY(position);scrollContainer.removeEventListener("scroll",this._resetScroll);debug("override scroll position from HTML5 history popstate:",position)}})},732:function(module,exports,__webpack_require__){var $=__webpack_require__(41),SHARED="__core-js_shared__",store=$.g[SHARED]||($.g[SHARED]={});module.exports=function(key){return store[key]||(store[key]={})}},734:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2);var Popover=__webpack_require__(291);var PopoverMenu=React.createClass({displayName:"PopoverMenu",propTypes:{isVisible:React.PropTypes.bool.isRequired,onClose:React.PropTypes.func.isRequired,position:React.PropTypes.string,className:React.PropTypes.string},getDefaultProps:function getDefaultProps(){return{position:"top"}},componentWillUnmount:function componentWillUnmount(){this._previouslyFocusedElement=null},render:function render(){var children=React.Children.map(this.props.children,this._setPropsOnChild,this);return React.createElement(Popover,{isVisible:this.props.isVisible,context:this.props.context,position:this.props.position,onClose:this._onClose,onShow:this._onShow,className:this.props.className},React.createElement("div",{ref:"menu",role:"menu",className:"popover__menu",onKeyDown:this._onKeyDown,tabIndex:"-1"},children))},_setPropsOnChild:function _setPropsOnChild(child){if(child==null){return child}var boundOnClose=this._onClose.bind(this,child.props.action),onClick=boundOnClose;if(child.props.onClick){onClick=child.props.onClick.bind(null,boundOnClose)}return React.addons.cloneWithProps(child,{onClick:onClick})},_onShow:function _onShow(){var elementToFocus=React.findDOMNode(this.refs.menu);this._previouslyFocusedElement=document.activeElement;if(elementToFocus){elementToFocus.focus()}},_isInvalidTarget:function _isInvalidTarget(target){return target.tagName==="HR"},_getClosestSibling:function _getClosestSibling(target){var isDownwardMotion=arguments.length<=1||arguments[1]===undefined?true:arguments[1];var menu=React.findDOMNode(this.refs.menu);var first=menu.firstChild,last=menu.lastChild;if(!isDownwardMotion){first=menu.lastChild;last=menu.firstChild}if(target===menu){return first}var closest=target[isDownwardMotion?"nextSibling":"previousSibling"];var sibling=closest||last;return this._isInvalidTarget(sibling)?this._getClosestSibling(sibling,isDownwardMotion):sibling},_onKeyDown:function _onKeyDown(event){var handled=false,target=event.target,elementToFocus;switch(event.keyCode){case 9:this.props.onClose();handled=true;break;case 38:elementToFocus=this._getClosestSibling(target,false);handled=true;break;case 40:elementToFocus=this._getClosestSibling(target,true);handled=true;break;default:break}if(elementToFocus){elementToFocus.focus()}if(handled){event.preventDefault()}},_onClose:function _onClose(action){if(this._previouslyFocusedElement){this._previouslyFocusedElement.focus();this._previouslyFocusedElement=null}if(this.props.onClose){this.props.onClose(action)}}});module.exports=PopoverMenu},739:function(module,exports,__webpack_require__){module.exports=__webpack_require__(783)},740:function(module,exports,__webpack_require__){var isArrayLike=__webpack_require__(33),isObject=__webpack_require__(17),values=__webpack_require__(286);function toIterable(value){if(value==null){return[]}if(!isArrayLike(value)){return values(value)}return isObject(value)?value:Object(value)}module.exports=toIterable},741:function(module,exports,__webpack_require__){var arrayCopy=__webpack_require__(60),getLength=__webpack_require__(106),isLength=__webpack_require__(50),values=__webpack_require__(286);function toArray(value){var length=value?getLength(value):0;if(!isLength(length)){return values(value)}if(!length){return[]}return arrayCopy(value)}module.exports=toArray},743:function(module,exports,__webpack_require__){var now=__webpack_require__(758),global=typeof window==="undefined"?{}:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=global["request"+suffix],caf=global["cancel"+suffix]||global["cancelRequest"+suffix],isNative=true;for(var i=0;i<vendors.length&&!raf;i++){raf=global[vendors[i]+"Request"+suffix];caf=global[vendors[i]+"Cancel"+suffix]||global[vendors[i]+"CancelRequest"+suffix]}if(!raf||!caf){isNative=false;var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(callback){if(queue.length===0){var _now=now(),next=Math.max(0,frameDuration-(_now-last));last=next+_now;setTimeout(function(){var cp=queue.slice(0);queue.length=0;for(var i=0;i<cp.length;i++){if(!cp[i].cancelled){try{cp[i].callback(last)}catch(e){setTimeout(function(){throw e},0)}}}},Math.round(next))}queue.push({handle:++id,callback:callback,cancelled:false});return id};caf=function(handle){for(var i=0;i<queue.length;i++){if(queue[i].handle===handle){queue[i].cancelled=true}}}}module.exports=function(fn){if(!isNative){return raf.call(global,fn)}return raf.call(global,function(){try{fn.apply(this,arguments)}catch(e){setTimeout(function(){throw e},0)}})};module.exports.cancel=function(){caf.apply(global,arguments)}},748:function(module,exports,__webpack_require__){"use strict";var assign=__webpack_require__(15),debug=__webpack_require__(1)("calypso:infinite-list:helper");function ScrollHelper(boundsForRef){this.boundsForRef=boundsForRef;this.itemHeights={};this.contextHeight=null;this.topHideLevelHard=null;this.topHideLevelSoft=null;this.bottomHideLevelHard=null;this.bottomHideLevelSoft=null;this.bottomHideLevelUltraSoft=null;this.props=null;this.scrollPosition=null;this.containerTop=null;this.topPlaceholderHeight=null;this.bottomPlaceholderHeight=null;this.containerBottom=null;this.stateUpdated=null;this.firstRenderedIndex=null;this.lastRenderedIndex=null}assign(ScrollHelper.prototype,{storedItemHeight:function storedItemHeight(itemKey){var height=this.props.guessedItemHeight;if(itemKey in this.itemHeights){height=this.itemHeights[itemKey]}return height},forEachInRow:function forEachInRow(index,callback,context){var firstIndexInRow,lastIndexInRow;if("function"!==typeof callback){return}if(context){callback=callback.bind(context)}firstIndexInRow=index-index%this.props.itemsPerRow;lastIndexInRow=Math.min(firstIndexInRow+this.props.itemsPerRow,this.props.items.length)-1;for(var i=firstIndexInRow;i<=lastIndexInRow;i++){callback(this.props.items[i],i)}},storeRowItemHeights:function storeRowItemHeights(fromDirection,index){this.forEachInRow(index,function(item){var itemKey=this.props.getItemRef(item),itemBounds=this.boundsForRef(itemKey),height;if(itemBounds){if("bottom"===fromDirection){height=this.containerBottom-this.bottomPlaceholderHeight-itemBounds.top}else{height=itemBounds.bottom-(this.containerTop+this.topPlaceholderHeight)}}else{height=this.props.guessedItemHeight}this.itemHeights[itemKey]=height},this)},deleteRowItemHeights:function deleteRowItemHeights(index){this.forEachInRow(index,function(item){var itemKey=this.props.getItemRef(item);delete this.itemHeights[itemKey]},this)},getRowHeight:function getRowHeight(index){var maxHeight=0;this.forEachInRow(index,function(item){var itemKey=this.props.getItemRef(item),height=this.storedItemHeight(itemKey);maxHeight=Math.max(maxHeight,height)},this);return maxHeight},updateContextHeight:function updateContextHeight(contextHeight){
if(this.contextHeight===contextHeight){return}this.contextHeight=contextHeight;this.topHideLevelHard=Math.min(-1*contextHeight,-5*this.props.guessedItemHeight);this.topHideLevelSoft=Math.min(-2*contextHeight,-10*this.props.guessedItemHeight);this.bottomHideLevelHard=contextHeight+Math.max(contextHeight,5*this.props.guessedItemHeight);this.bottomHideLevelSoft=contextHeight+Math.max(2*contextHeight,10*this.props.guessedItemHeight);this.bottomHideLevelUltraSoft=contextHeight+Math.max(3*contextHeight,15*this.props.guessedItemHeight)},initialLastRenderedIndex:function initialLastRenderedIndex(){return Math.min(this.props.items.length-1,Math.floor(this.bottomHideLevelSoft/this.props.guessedItemHeight)-1)},updatePlaceholderDimensions:function updatePlaceholderDimensions(){var topPlaceholderRect=this.boundsForRef("topPlaceholder"),bottomPlaceholderRect=this.boundsForRef("bottomPlaceholder");this.topPlaceholderHeight=topPlaceholderRect.height;this.containerTop=topPlaceholderRect.top;this.bottomPlaceholderHeight=bottomPlaceholderRect.height;this.containerBottom=bottomPlaceholderRect.bottom},scrollChecks:function scrollChecks(state){this.reset(state);this.adjustLastRenderedIndex();if(this.shouldHideItemsAbove()){this.hideItemsAbove()}else if(this.shouldShowItemsAbove()){this.showItemsAbove()}if(this.shouldHideItemsBelow()){this.hideItemsBelow()}else if(this.shouldShowItemsBelow()){this.showItemsBelow()}if(this.shouldLoadNextPage()){this.loadNextPage()}},reset:function reset(state){this.stateUpdated=false;this.firstRenderedIndex=state.firstRenderedIndex;this.lastRenderedIndex=state.lastRenderedIndex},adjustLastRenderedIndex:function adjustLastRenderedIndex(){if(this.lastRenderedIndex===-1&&this.props.items.length>0||this.lastRenderedIndex>=this.props.items.length){this.lastRenderedIndex=this.props.items.length-1;this.stateUpdated=true}},shouldHideItemsAbove:function shouldHideItemsAbove(){return this.containerTop+this.topPlaceholderHeight<this.topHideLevelSoft},hideItemsAbove:function hideItemsAbove(){var rowHeight,rowBottom;while(this.firstRenderedIndex<this.props.items.length){this.storeRowItemHeights("top",this.firstRenderedIndex);rowHeight=this.getRowHeight(this.firstRenderedIndex);rowBottom=this.containerTop+this.topPlaceholderHeight+rowHeight;if(rowBottom>this.topHideLevelHard){this.deleteRowItemHeights(this.firstRenderedIndex);break}this.topPlaceholderHeight+=rowHeight;this.firstRenderedIndex+=this.props.itemsPerRow;this.stateUpdated=true;debug("hiding top item",rowHeight,this.topPlaceholderHeight)}},shouldShowItemsAbove:function shouldShowItemsAbove(){return this.containerTop+this.topPlaceholderHeight>this.topHideLevelHard},showItemsAbove:function showItemsAbove(){var rowHeight,newPlaceholderBottom;while(this.firstRenderedIndex>0){rowHeight=this.getRowHeight(this.firstRenderedIndex-this.props.itemsPerRow);newPlaceholderBottom=this.containerTop+this.topPlaceholderHeight-rowHeight;if(newPlaceholderBottom<this.topHideLevelSoft){break}this.deleteRowItemHeights(this.firstRenderedIndex-this.props.itemsPerRow);this.firstRenderedIndex-=this.props.itemsPerRow;if(this.firstRenderedIndex<=0){this.topPlaceholderHeight=0}else{this.topPlaceholderHeight=Math.max(0,this.topPlaceholderHeight-rowHeight)}this.stateUpdated=true;debug("showing top item",rowHeight,this.topPlaceholderHeight)}},shouldHideItemsBelow:function shouldHideItemsBelow(){var placeholderTop=this.containerBottom-this.bottomPlaceholderHeight;return placeholderTop>this.bottomHideLevelUltraSoft},hideItemsBelow:function hideItemsBelow(){var rowTop,rowHeight;while(this.lastRenderedIndex>=0){this.storeRowItemHeights("bottom",this.lastRenderedIndex);rowHeight=this.getRowHeight(this.lastRenderedIndex);rowTop=this.containerBottom-this.bottomPlaceholderHeight-rowHeight;if(rowTop<this.bottomHideLevelHard){this.deleteRowItemHeights(this.lastRenderedIndex);break}this.bottomPlaceholderHeight+=rowHeight;this.lastRenderedIndex-=this.props.itemsPerRow;this.stateUpdated=true;debug("hiding bottom item",rowHeight,this.bottomPlaceholderHeight)}},shouldShowItemsBelow:function shouldShowItemsBelow(){var placeholderTop=this.containerBottom-this.bottomPlaceholderHeight;return placeholderTop<this.bottomHideLevelHard},showItemsBelow:function showItemsBelow(){var rowHeight,itemTop,placeholderTop;while(this.lastRenderedIndex<this.props.items.length-1){rowHeight=this.getRowHeight(this.lastRenderedIndex+this.props.itemsPerRow);placeholderTop=this.containerBottom-this.bottomPlaceholderHeight;itemTop=placeholderTop+rowHeight;if(itemTop>this.bottomHideLevelSoft&&placeholderTop>this.bottomHideLevelHard){break}this.deleteRowItemHeights(this.lastRenderedIndex+this.props.itemsPerRow);if(this.bottomPlaceholderHeight-rowHeight<0){this.containerBottom+=rowHeight-this.bottomPlaceholderHeight;this.bottomPlaceholderHeight=0}else{this.bottomPlaceholderHeight-=rowHeight}this.lastRenderedIndex+=this.props.itemsPerRow;if(this.lastRenderedIndex>=this.props.items.length-1){this.bottomPlaceholderHeight=0}this.stateUpdated=true;debug("showing bottom item",rowHeight,this.bottomPlaceholderHeight)}},shouldLoadNextPage:function shouldLoadNextPage(){if(this.props.fetchingNextPage||this.props.lastPage){return false}return this.bottomPlaceholderHeight===0&&this.containerBottom<this.bottomHideLevelHard},loadNextPage:function loadNextPage(){var triggeredByScroll=this.triggeredByScroll;debug("fetching next page",this.containerBottom,this.bottomPlaceholderHeight);if(this.scrollPosition>this.contextHeight){triggeredByScroll=true}setTimeout(function(){if(this.props.fetchingNextPage||this.props.lastPage){return false}this.props.fetchNextPage({triggeredByScroll:triggeredByScroll})}.bind(this),0)}});module.exports=ScrollHelper},750:function(module,exports,__webpack_require__){"use strict";var Dispatcher=__webpack_require__(30);var InfiniteListAction={storePositions:function storePositions(url,positions){setTimeout(function(){Dispatcher.handleViewAction({type:"INFINITE_LIST_POSITION_CHANGED",url:url,positions:positions})},0)},storeScroll:function storeScroll(url,scrollPosition){setTimeout(function(){Dispatcher.handleViewAction({type:"SCROLL_CHANGED",url:url,scrollPosition:scrollPosition})},0)}};module.exports=InfiniteListAction},751:function(module,exports,__webpack_require__){"use strict";var debug=__webpack_require__(1)("calypso:infinite-list:positions-store"),Dispatcher=__webpack_require__(30),isEqual=__webpack_require__(96);var emitter=__webpack_require__(10);var _infiniteListPositions={},InfiniteListPositionsStore={get:function get(url){debug("positions-store:get(): ",url,_infiniteListPositions);return _infiniteListPositions[url]}};emitter(InfiniteListPositionsStore);function storeInfiniteListPositions(url,positions){var oldPositions=InfiniteListPositionsStore.get(url);debug("comparing positions:",url,oldPositions,positions);if(isEqual(oldPositions,positions)){return}debug("storing values:",url,positions);_infiniteListPositions[url]=positions;InfiniteListPositionsStore.emit("change")}InfiniteListPositionsStore.dispatchToken=Dispatcher.register(function(payload){var action=payload.action;switch(action.type){case"INFINITE_LIST_POSITION_CHANGED":storeInfiniteListPositions(action.url,action.positions);break}});module.exports=InfiniteListPositionsStore},752:function(module,exports,__webpack_require__){"use strict";var Dispatcher=__webpack_require__(30);var _scrollStore={},InfiniteListScrollStore={get:function get(url){return _scrollStore[url]}};function storeInfiniteListScrollPosition(url,scrollPosition){var oldScrollPosition=InfiniteListScrollStore.get(url);if(oldScrollPosition===scrollPosition){return}_scrollStore[url]=scrollPosition}InfiniteListScrollStore.dispatchToken=Dispatcher.register(function(payload){var action=payload.action;switch(action.type){case"SCROLL_CHANGED":storeInfiniteListScrollPosition(action.url,action.scrollPosition);break}});module.exports=InfiniteListScrollStore},755:function(module,exports,__webpack_require__){"use strict";var _Object$keys=__webpack_require__(73)["default"];var assign=__webpack_require__(15),async=__webpack_require__(718),debug=__webpack_require__(1)("calypso:post-normalizer"),deepClone=__webpack_require__(730),every=__webpack_require__(305),filter=__webpack_require__(97),find=__webpack_require__(56),first=__webpack_require__(709),forEach=__webpack_require__(292),forOwn=__webpack_require__(704),map=__webpack_require__(282),max=__webpack_require__(739),pick=__webpack_require__(153),startsWith=__webpack_require__(59),some=__webpack_require__(57),toArray=__webpack_require__(741),uniq=__webpack_require__(695),url=__webpack_require__(43);var formatting=__webpack_require__(287),safeImageURL=__webpack_require__(312);function debugForPost(post){return function(msg){debug(post.global_ID+": "+msg)}}function stripAutoPlays(query){var keys=_Object$keys(query).filter(function(k){k=k.toLowerCase();return k==="autoplay"||k==="auto_play"});keys.forEach(function(key){var val=query[key].toLowerCase();if(val==="1"){query[key]="0"}else if(val==="true"){query[key]="false"}});return query}var DEFAULT_PHOTON_QUALITY=80,READING_WORDS_PER_SECOND=250/60;function normalizePost(post,transforms,callback){if(!callback){throw new Error("must supply a callback")}if(!post||!transforms){debug("no post or no transform");callback(null,post);return}var normalizedPost=deepClone(post),postDebug=debugForPost(post);postDebug("running transforms");async.eachSeries(transforms,function(transform,transformCallback){postDebug("running transform "+(transform.name||"anonymous"));transform(normalizedPost,transformCallback)},function(err){postDebug("transforms complete");if(err){callback(err)}else{callback(null,normalizedPost)}})}function maxWidthPhotonishURL(imageURL,width){var parsedURL=url.parse(imageURL,true,true),isGravatar,sizeParam;if(!parsedURL.host){return imageURL}isGravatar=parsedURL.host.indexOf("gravatar.com")!==-1;delete parsedURL.search;forEach(["h","crop","resize","fit"],function(param){delete parsedURL.query[param]});sizeParam=isGravatar?"s":"w";parsedURL.query[sizeParam]=width;if(!isGravatar){parsedURL.query.quality=DEFAULT_PHOTON_QUALITY;parsedURL.query.strip="info"}return url.format(parsedURL)}function makeImageURLSafe(object,propName,maxWidth,baseURL){if(object&&object[propName]){if(baseURL&&!url.parse(object[propName],true,true).hostname){object[propName]=url.resolve(baseURL,object[propName])}object[propName]=safeImageURL(object[propName]);if(maxWidth){object[propName]=maxWidthPhotonishURL(object[propName],maxWidth)}}}function imageForURL(imageUrl){var img=new Image;img.src=imageUrl;return img}function imageSizeFromAttachments(post,imageUrl){var attachments=post.attachments,found;if(!attachments){return}found=find(attachments,function(attachment){return attachment.URL===imageUrl});if(found){return{width:found.width,height:found.height}}}function candidateForCanonicalImage(image){if(!image){return false}if(image.naturalWidth<350){debug(image&&image.src,": not wide enough");return false}if(image.naturalHeight*image.naturalHeight<3e4){debug(image&&image.src,": not enough area");return false}return true}function removeUnsafeAttributes(node){if(!node||!node.hasAttributes()){return}forEach(toArray(node.attributes),function(attr){if(startsWith(attr.name,"on")){node.removeAttribute(attr.name)}})}var excludedContentImageUrlParts=["gravatar.com"];function isCandidateForContentImage(imageUrl){return!imageShouldBeRemovedFromContent(imageUrl)&&every(excludedContentImageUrlParts,function(part){return imageUrl&&imageUrl.toLowerCase().indexOf(part)===-1})}var bannedUrlParts=["feeds.feedburner.com",".feedsportal.com","wp-includes","wp-content/themes","wp-content/plugins","stats.wordpress.com","pixel.wp.com"];function imageShouldBeRemovedFromContent(imageUrl){return some(bannedUrlParts,function(part){return imageUrl&&imageUrl.toLowerCase().indexOf(part)!==-1})}normalizePost.decodeEntities=function decodeEntities(post,callback){forEach(["excerpt","title","site_name"],function(prop){if(post[prop]){post[prop]=formatting.decodeEntities(post[prop])}});if(post.parent&&post.parent.title){post.parent.title=formatting.decodeEntities(post.parent.title)}if(post.author){if(post.author.name){post.author.name=formatting.decodeEntities(post.author.name)}if(post.author.avatar_URL){post.author.avatar_URL=safeImageURL(post.author.avatar_URL)}}if(post.tags){forOwn(post.tags,function(tag){tag.name=formatting.decodeEntities(tag.name)})}callback()};normalizePost.stripHTML=function stripHTML(post,callback){forEach(["excerpt","title","site_name"],function(prop){if(post[prop]){post[prop]=formatting.stripHTML(post[prop])}});if(post.author&&post.author.name){post.author.name=formatting.stripHTML(post.author.name)}callback()};normalizePost.preventWidows=function preventWidows(post,callback){forEach(["title","excerpt"],function(prop){if(post[prop]){post[prop]=formatting.preventWidows(post[prop],2)}});callback()};normalizePost.firstPassCanonicalImage=function firstPassCanonicalImage(post,callback){if(post.featured_image){post.canonical_image=assign({uri:post.featured_image,type:"image"},imageSizeFromAttachments(post.featured_image))}else{var candidate=first(filter(post.attachments,function(attachment){return startsWith(attachment.mime_type,"image/")}));if(candidate){post.canonical_image={uri:candidate.URL,width:candidate.width,height:candidate.height,type:"image"}}}callback()};normalizePost.makeSiteIDSafeForAPI=function makeSiteIDSafeForAPI(post,callback){if(post.site_id){post.normalized_site_id=(""+post.site_id).replace(/::/g,"/")}callback()};normalizePost.pickPrimaryTag=function assignPrimaryTag(post,callback){var NO_ENTRIES_FOUND_MARKER=-Infinity;post.primary_tag=max(post.tags,function(tag){return tag.post_count});if(post.primary_tag===NO_ENTRIES_FOUND_MARKER){delete post.primary_tag}callback()};normalizePost.safeImageProperties=function(maxWidth){return function safeImageProperties(post,callback){makeImageURLSafe(post.author,"avatar_URL",maxWidth);makeImageURLSafe(post,"featured_image",maxWidth,post.URL);if(post.featured_media&&post.featured_media.type==="image"){makeImageURLSafe(post.featured_media,"uri",maxWidth,post.URL)}if(post.canonical_image&&post.canonical_image.type==="image"){makeImageURLSafe(post.canonical_image,"uri",maxWidth,post.URL)}callback()}};function keepImagesThatLoad(image,acceptCallback){if(image.complete&&image.naturalWidth>0){acceptCallback(true);return}image.onload=function(){acceptCallback(true)};image.onerror=function(){acceptCallback(false)}}function convertImageToObject(image){return pick(image,["src","naturalWidth","naturalHeight"])}normalizePost.waitForImagesToLoad=function waitForImagesToLoad(post,callback){function acceptLoadedImages(images){post.images=map(images,convertImageToObject);post.content_images=filter(map(post.content_images,function(image){return find(post.images,{src:image.src})}),Boolean);callback()}var imagesToCheck=[];if(post.featured_image){imagesToCheck.push(imageForURL(post.featured_image))}forEach(post.content_images,function(image){imagesToCheck.push(imageForURL(image.src))});imagesToCheck=uniq(imagesToCheck,function(image){return image.src});if(imagesToCheck.length===0){callback();return}post.images=imagesToCheck;async.filter(post.images,keepImagesThatLoad,acceptLoadedImages)};function imageHasMinWidthAndHeight(width,height){return function(image){return image.naturalWidth>=width&&image.naturalHeight>=height}}normalizePost.keepValidImages=function(minWidth,minHeight){return function keepValidImages(post,callback){var imageFilter=imageHasMinWidthAndHeight(minWidth,minHeight);if(post.images){post.images=filter(post.images,imageFilter)}if(post.content_images){post.content_images=filter(post.content_images,imageFilter)}callback()}};normalizePost.pickCanonicalImage=function pickCanonicalImage(post,callback){var canonicalImage;if(post.images){canonicalImage=filter(post.images,candidateForCanonicalImage)[0];if(canonicalImage){canonicalImage={uri:canonicalImage.src,width:canonicalImage.naturalWidth,height:canonicalImage.naturalHeight}}}else if(post.featured_image){canonicalImage={uri:post.featured_image,width:0,height:0}}if(canonicalImage){post.canonical_image=canonicalImage}callback()};normalizePost.withContentDOM=function(transforms){return function withContentDOM(post,callback){if(!post||!post.content||!transforms){callback();return}var postDebug=debugForPost(post);postDebug("spinning up dom");post.__contentDOM=document.createElement("div");post.__contentDOM.innerHTML=post.content;postDebug("running dom transforms");async.eachSeries(transforms,function(transform,transformCallback){postDebug("running dom transform "+(transform.name||"anonymous"));transform(post,transformCallback)},function(err){postDebug("done with dom transforms");if(!err){post.content=post.__contentDOM.innerHTML}delete post.__contentDOM;callback(err)})}};normalizePost.content={removeStyles:function removeContentStyles(post,callback){if(!post.__contentDOM){throw new Error("this transform must be used as part of withContentDOM")}if(post.__contentDOM.querySelector(".gallery, .tiled-gallery")){callback();return}var styled=post.__contentDOM.querySelectorAll("[style]");forEach(styled,function(element){element.removeAttribute("style")});forEach(post.__contentDOM.querySelectorAll("style"),function(element){element.parentNode&&element.parentNode.removeChild(element)});callback()},safeContentImages:function safeContentImages(maxWidth){return function safeContentImages(post,callback){var content_images=[],images;if(!post.__contentDOM){throw new Error("this transform must be used as part of withContentDOM")}images=post.__contentDOM.querySelectorAll("img[src]");forEach(images,function(image){var imgSource=image.getAttribute("src"),hostName=url.parse(imgSource,false,true).hostname,safeSource;if(!hostName){imgSource=url.resolve(post.URL,imgSource)}removeUnsafeAttributes(image);if(imageShouldBeRemovedFromContent(imgSource)){image.parentNode.removeChild(image);image.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");return}safeSource=safeImageURL(imgSource);if(maxWidth){safeSource=maxWidthPhotonishURL(safeSource,maxWidth)}image.setAttribute("src",safeSource);if(isCandidateForContentImage(imgSource)){content_images.push({src:safeSource,original_src:imgSource,width:image.width,height:image.height})}});content_images=filter(content_images,function(image){var edgeLength=image.height+image.width;return edgeLength===0||edgeLength>2});if(content_images.length){post.content_images=content_images}callback()}},makeEmbedsSecure:function makeEmbedsSecure(post,callback){if(!post.__contentDOM){throw new Error("this transform must be used as part of withContentDOM")}var embeds=post.__contentDOM.querySelectorAll("iframe");forEach(embeds,function(iframe){iframe.src=iframe.src.replace(/^http:/,"https:")});callback()},wordCountAndReadingTime:function wordCountAndReadingTime(post,callback){if(!post.__contentDOM){throw new Error("this transform must be used as part of withContentDOM")}var textContent=post.__contentDOM.textContent.trim();post.word_count=(textContent.replace(/['";:,.?\-!]+/g,"").match(/\S+/g)||[]).length;if(post.word_count>0){post.reading_time=Math.ceil(post.word_count/READING_WORDS_PER_SECOND)}callback()},detectEmbeds:function detectEmbeds(post,callback){if(!post.__contentDOM){throw new Error("this transform must be used as part of withContentDOM")}var embeds=toArray(post.__contentDOM.querySelectorAll("iframe"));if(!embeds.length){callback();return}post.content_embeds=map(embeds,function(iframe){var node=iframe,embedType=null,aspectRatio=0,width,height,matches;if(iframe.width&&iframe.height){width=Number(iframe.width);height=Number(iframe.height);aspectRatio=Number(iframe.width)/Number(iframe.height)}do{if(!node.className){continue}matches=node.className.match(/\bembed-([-a-zA-Z0-9_]+)\b/);if(matches){embedType=matches[1];break}}while(node=node.parentNode);return{type:embedType,iframe:iframe.outerHTML,aspectRatio:aspectRatio,width:width,height:height}});callback()},disableAutoPlayOnEmbeds:function disableAutoPlayOnEmbeds(post,callback){if(!post.__contentDOM){throw new Error("this transform must be used as part of withContentDOM")}var embeds=toArray(post.__contentDOM.querySelectorAll("iframe"));embeds.forEach(function(embed){var srcUrl=url.parse(embed.src,true,true);if(srcUrl.query){srcUrl.query=stripAutoPlays(srcUrl.query);srcUrl.search=null;embed.src=url.format(srcUrl)}});callback()}};module.exports=normalizePost},758:function(module,exports,__webpack_require__){(function(process){(function(){var getNanoSeconds,hrtime,loadTime;if(typeof performance!=="undefined"&&performance!==null&&performance.now){module.exports=function(){return performance.now()}}else if(typeof process!=="undefined"&&process!==null&&process.hrtime){module.exports=function(){return(getNanoSeconds()-loadTime)/1e6};hrtime=process.hrtime;getNanoSeconds=function(){var hr;hr=hrtime();return hr[0]*1e9+hr[1]};loadTime=getNanoSeconds()}else if(Date.now){module.exports=function(){return Date.now()-loadTime};loadTime=Date.now()}else{module.exports=function(){return(new Date).getTime()-loadTime};loadTime=(new Date).getTime()}}).call(this)}).call(exports,__webpack_require__(284))},765:function(module,exports,__webpack_require__){var set=__webpack_require__(41).set,$at=__webpack_require__(778)(true),ITER=__webpack_require__(706).safe("iter"),$iter=__webpack_require__(692),step=$iter.step;__webpack_require__(728)(String,"String",function(iterated){set(this,ITER,{o:String(iterated),i:0})},function(){var iter=this[ITER],O=iter.o,index=iter.i,point;if(index>=O.length)return step(1);point=$at(O,index);iter.i+=point.length;return step(0,point)})},778:function(module,exports,__webpack_require__){var $=__webpack_require__(41);module.exports=function(TO_STRING){return function(that,pos){var s=String($.assertDefined(that)),i=$.toInteger(pos),l=s.length,a,b;if(i<0||i>=l)return TO_STRING?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}}},779:function(module,exports){function arrayExtremum(array,iteratee,comparator,exValue){var index=-1,length=array.length,computed=exValue,result=computed;while(++index<length){var value=array[index],current=+iteratee(value);if(comparator(current,computed)){computed=current;result=value}}return result}module.exports=arrayExtremum},780:function(module,exports,__webpack_require__){var baseEach=__webpack_require__(45);function baseExtremum(collection,iteratee,comparator,exValue){var computed=exValue,result=computed;baseEach(collection,function(value,index,collection){var current=+iteratee(value,index,collection);if(comparator(current,computed)||current===exValue&&current===result){computed=current;result=value}});return result}module.exports=baseExtremum},781:function(module,exports,__webpack_require__){var arrayExtremum=__webpack_require__(779),baseCallback=__webpack_require__(32),baseExtremum=__webpack_require__(780),isArray=__webpack_require__(8),isIterateeCall=__webpack_require__(27),toIterable=__webpack_require__(740);function createExtremum(comparator,exValue){return function(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=undefined}iteratee=baseCallback(iteratee,thisArg,3);if(iteratee.length==1){collection=isArray(collection)?collection:toIterable(collection);var result=arrayExtremum(collection,iteratee,comparator,exValue);if(!(collection.length&&result===exValue)){return result}}return baseExtremum(collection,iteratee,comparator,exValue)}}module.exports=createExtremum},782:function(module,exports){function gt(value,other){return value>other}module.exports=gt},783:function(module,exports,__webpack_require__){var createExtremum=__webpack_require__(781),gt=__webpack_require__(782);var NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;var max=createExtremum(gt,NEGATIVE_INFINITY);module.exports=max},792:function(module,exports){"use strict";module.exports={action:{FETCH:"FETCH_SITE",RECEIVE_FETCH:"RECEIVE_FETCH_SITE"},state:{PENDING:1,COMPLETE:2,ERROR:4}}},808:function(module,exports){"use strict";module.exports={action:{FETCH:"FEED_FETCH",RECEIVE_FETCH:"RECEIVE_FEED_FETCH"},state:{PENDING:1,COMPLETE:2,ERROR:4}}},819:function(module,exports,__webpack_require__){"use strict";var find=__webpack_require__(56),get=__webpack_require__(828),url=__webpack_require__(43);module.exports={isDiscoverPost:function isDiscoverPost(post){return!!post.discover_metadata},isDiscoverSitePick:function isDiscoverSitePick(post){return!!find(post.discover_metadata.discover_fp_post_formats,{slug:"site-pick"})},isInternalDiscoverPost:function isInternalDiscoverPost(post){var featured_post_wpcom_data=get(post,"discover_metadata.featured_post_wpcom_data");return!!featured_post_wpcom_data},getSiteUrl:function getSiteUrl(post){if(!get(post,"discover_metadata")){return false}var blogId=get(post,"discover_metadata.featured_post_wpcom_data.blog_id");if(blogId){return"/read/blog/id/"+blogId}return post.discover_metadata.permalink},getLinkProps:function getLinkProps(linkUrl){var parsedUrl=url.parse(linkUrl);var isExternal=parsedUrl.hostname&&parsedUrl.hostname!==window.location.hostname;return{rel:isExternal?"external":"",target:isExternal?"_blank":""}}}},820:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(14),noop=__webpack_require__(35),times=__webpack_require__(716);var Main=__webpack_require__(679),DISPLAY_TYPES=__webpack_require__(905),EmptyContent=__webpack_require__(1686),FeedStreamStoreActions=__webpack_require__(906),FeedPostStoreActions=__webpack_require__(970),ListGap=__webpack_require__(1695),InfiniteList=__webpack_require__(731),MobileBackToSidebar=__webpack_require__(956),Post=__webpack_require__(1690),CrossPost=__webpack_require__(1691),page=__webpack_require__(13),PostUnavailable=__webpack_require__(1689),PostPlaceholder=__webpack_require__(1688),PostStore=__webpack_require__(867),MobileBackToSidebar=__webpack_require__(956),UpdateNotice=__webpack_require__(1707),PostBlocked=__webpack_require__(1687),CommentStore=__webpack_require__(902);var GUESSED_POST_HEIGHT=600;function cardClassForPost(post){if(post.display_type&DISPLAY_TYPES.X_POST){return CrossPost}if(post.is_site_blocked){return PostBlocked}return Post}module.exports=React.createClass({displayName:"ReaderFollowing",propTypes:{store:React.PropTypes.object.isRequired,trackScrollPage:React.PropTypes.func.isRequired,suppressSiteNameLink:React.PropTypes.bool,onUpdatesShown:React.PropTypes.func,emptyContent:React.PropTypes.object},getDefaultProps:function getDefaultProps(){return{suppressSiteNameLink:false,onShowUpdates:noop}},getInitialState:function getInitialState(){return this.getStateFromStores()},getStateFromStores:function getStateFromStores(store){store=store||this.props.store;return{posts:store.get(),updateCount:store.getUpdateCount()}},updateState:function updateState(store){this.setState(this.getStateFromStores(store))},componentDidMount:function componentDidMount(){this.props.store.on("change",this.updateState);PostStore.on("change",this.updateState);CommentStore.on("change",this.updateState)},componentWillUnmount:function componentWillUnmount(){this.props.store.off("change",this.updateState);PostStore.off("change",this.updateState);CommentStore.off("change",this.updateState)},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(nextProps.store!==this.props.store){this.props.store.off("change",this.updateState);nextProps.store.on("change",this.updateState);this.updateState(nextProps.store)}},fetchNextPage:function fetchNextPage(options){if(this.props.store.isLastPage()||this.props.store.isFetchingNextPage()){return}if(options.triggeredByScroll){this.props.trackScrollPage(this.props.store.getPage()+1)}FeedStreamStoreActions.fetchNextPage(this.props.store.id)},handleUpdateClick:function handleUpdateClick(){this.props.onUpdatesShown();FeedStreamStoreActions.showUpdates(this.props.store.id);window.scrollTo(0,0)},renderLoadingPlaceholders:function renderLoadingPlaceholders(){var count=this.state.posts.length?2:this.props.store.getPerPage(),placeholders=[];times(count,function(i){placeholders.push(React.createElement(PostPlaceholder,{key:"feed-post-placeholder-"+i}))});return placeholders},getPostRef:function getPostRef(postKey){return"feed-post-"+(postKey.feedId||postKey.blogId)+"-"+postKey.postId},cardClickHandler:function cardClickHandler(post){if(post.feed_ID&&post.feed_item_ID){page.show("/read/post/feed/"+post.feed_ID+"/"+post.feed_item_ID)}else{page.show("/read/post/id/"+post.site_ID+"/"+post.ID)}},renderPost:function renderPost(postKey){var post,postState,itemKey,content,PostClass;if(postKey.isGap){return React.createElement(ListGap,{key:"gap-"+postKey.from+"-"+postKey.to,gap:postKey,store:this.props.store})}post=PostStore.get(postKey);postState=post._state;itemKey=this.getPostRef(postKey);if(!post||postState==="minimal"){FeedPostStoreActions.fetchPost(postKey);postState="pending"}switch(postState){case"pending":content=React.createElement(PostPlaceholder,{key:"feed-post-placeholder-"+itemKey});break;case"error":content=React.createElement(PostUnavailable,{key:"feed-post-unavailable-"+itemKey,post:post});break;default:PostClass=cardClassForPost(post);content=React.createElement(PostClass,{ref:itemKey,key:itemKey,post:post,suppressSiteNameLink:this.props.suppressSiteNameLink,onClick:this.cardClickHandler})}return content},render:function render(){var store=this.props.store,hasNoPosts=store.isLastPage()&&(!this.state.posts||this.state.posts.length===0),body;if(hasNoPosts){body=this.props.emptyContent||React.createElement(EmptyContent,null)}else{body=React.createElement(InfiniteList,{className:"reader__content",items:this.state.posts,lastPage:this.props.store.isLastPage(),fetchingNextPage:this.props.store.isFetchingNextPage(),guessedItemHeight:GUESSED_POST_HEIGHT,fetchNextPage:this.fetchNextPage,getItemRef:this.getPostRef,renderItem:this.renderPost,renderLoadingPlaceholders:this.renderLoadingPlaceholders})}return React.createElement(Main,{className:"following"},React.createElement(MobileBackToSidebar,null,React.createElement("h1",null,this.props.listName)),React.createElement(UpdateNotice,{count:this.state.updateCount,onClick:this.handleUpdateClick}),this.props.children,body)}})},821:function(module,exports,__webpack_require__){var assertObject=__webpack_require__(698).obj;function close(iterator){var ret=iterator["return"];if(ret!==undefined)assertObject(ret.call(iterator))}function call(iterator,fn,value,entries){try{return entries?fn(assertObject(value)[0],value[1]):fn(value)}catch(e){close(iterator);throw e}}call.close=close;module.exports=call},828:function(module,exports,__webpack_require__){var baseGet=__webpack_require__(165),toPath=__webpack_require__(167);function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,toPath(path),path+"");return result===undefined?defaultValue:result}module.exports=get},831:function(module,exports,__webpack_require__){"use strict";var _extends=__webpack_require__(94)["default"];var React=__webpack_require__(14);var ExternalLink=React.createClass({displayName:"ExternalLink",mixins:[React.addons.PureRenderMixin],render:function render(){return React.createElement("a",_extends({},this.props,{rel:"external"}),this.props.children)}});module.exports=ExternalLink},836:function(module,exports,__webpack_require__){"use strict";var keyMirror=__webpack_require__(48);module.exports.action=keyMirror({FOLLOW_READER_FEED:null,UNFOLLOW_READER_FEED:null,RECEIVE_FOLLOW_READER_FEED:null,RECEIVE_UNFOLLOW_READER_FEED:null,DISMISS_FOLLOW_ERROR:null,RECEIVE_FEED_SUBSCRIPTIONS:null,FETCH_NEXT_FEED_SUBSCRIPTIONS_PAGE:null});module.exports.error=keyMirror({UNABLE_TO_FOLLOW:null,UNABLE_TO_UNFOLLOW:null});module.exports.state=keyMirror({SUBSCRIBED:null,UNSUBSCRIBED:null})},837:function(module,exports,__webpack_require__){
"use strict";var assign=__webpack_require__(15),omit=__webpack_require__(81),url=__webpack_require__(43);function resizeImageUrl(imageUrl,params){var parsedUrl=url.parse(imageUrl,true,true);parsedUrl.query=omit(parsedUrl.query,["w","h","resize","fit"]);parsedUrl.query=assign(parsedUrl.query,params);delete parsedUrl.search;return url.format(parsedUrl)}module.exports=resizeImageUrl},838:function(module,exports,__webpack_require__){"use strict";var Immutable=__webpack_require__(849),omit=__webpack_require__(81);var Dispatcher=__webpack_require__(30),Emitter=__webpack_require__(10),SiteStoreActionType=__webpack_require__(792).action,FeedStoreActionType=__webpack_require__(808).action,State=__webpack_require__(792).state;var sites={},SiteStore;SiteStore={get:function get(siteId){return sites[siteId]}};Emitter(SiteStore);SiteStore.setMaxListeners(50);function setSite(attributes){var site=sites[attributes.ID],newSite;if(!attributes.state){attributes.state=State.COMPLETE}attributes=omit(attributes,["meta","_headers"]);if(attributes.URL){attributes.domain=attributes.URL.replace(/^https?:\/\//,"");attributes.slug=attributes.domain.replace(/\//g,"::")}attributes.title=attributes.name?attributes.name:attributes.domain;if(attributes.options&&attributes.options.is_mapped_domain&&!attributes.is_jetpack){attributes.wpcom_url=attributes.options.unmapped_url.replace(/^https?:\/\//,"")}if(attributes.options&&attributes.options.is_redirect){attributes.slug=attributes.options.unmapped_url.replace(/^https?:\/\//,"");attributes.domain=attributes.slug}if(site){newSite=site.mergeDeep(attributes)}else{newSite=Immutable.fromJS(attributes)}if(newSite===site){return}sites[attributes.ID]=newSite;SiteStore.emit("change")}SiteStore.dispatchToken=Dispatcher.register(function(payload){var action=payload&&payload.action;if(!action){return}switch(action.type){case SiteStoreActionType.RECEIVE_FETCH:if(action.error){setSite({ID:action.siteId,state:State.ERROR,error:action.error})}else{setSite(action.data)}break;case FeedStoreActionType.RECEIVE_FETCH:if(action.data&&action.data.meta&&action.data.meta.data&&action.data.meta.data.site){setSite(action.data.meta.data.site)}break}});module.exports=SiteStore},849:function(module,exports,__webpack_require__){(function(global,factory){true?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.Immutable=factory()})(this,function(){"use strict";var SLICE$0=Array.prototype.slice;function createClass(ctor,superClass){if(superClass){ctor.prototype=Object.create(superClass.prototype)}ctor.prototype.constructor=ctor}var DELETE="delete";var SHIFT=5;var SIZE=1<<SHIFT;var MASK=SIZE-1;var NOT_SET={};var CHANGE_LENGTH={value:false};var DID_ALTER={value:false};function MakeRef(ref){ref.value=false;return ref}function SetRef(ref){ref&&(ref.value=true)}function OwnerID(){}function arrCopy(arr,offset){offset=offset||0;var len=Math.max(0,arr.length-offset);var newArr=new Array(len);for(var ii=0;ii<len;ii++){newArr[ii]=arr[ii+offset]}return newArr}function ensureSize(iter){if(iter.size===undefined){iter.size=iter.__iterate(returnTrue)}return iter.size}function wrapIndex(iter,index){return index>=0?+index:ensureSize(iter)+ +index}function returnTrue(){return true}function wholeSlice(begin,end,size){return(begin===0||size!==undefined&&begin<=-size)&&(end===undefined||size!==undefined&&end>=size)}function resolveBegin(begin,size){return resolveIndex(begin,size,0)}function resolveEnd(end,size){return resolveIndex(end,size,size)}function resolveIndex(index,size,defaultIndex){return index===undefined?defaultIndex:index<0?Math.max(0,size+index):size===undefined?index:Math.min(size,index)}function Iterable(value){return isIterable(value)?value:Seq(value)}createClass(KeyedIterable,Iterable);function KeyedIterable(value){return isKeyed(value)?value:KeyedSeq(value)}createClass(IndexedIterable,Iterable);function IndexedIterable(value){return isIndexed(value)?value:IndexedSeq(value)}createClass(SetIterable,Iterable);function SetIterable(value){return isIterable(value)&&!isAssociative(value)?value:SetSeq(value)}function isIterable(maybeIterable){return!!(maybeIterable&&maybeIterable[IS_ITERABLE_SENTINEL])}function isKeyed(maybeKeyed){return!!(maybeKeyed&&maybeKeyed[IS_KEYED_SENTINEL])}function isIndexed(maybeIndexed){return!!(maybeIndexed&&maybeIndexed[IS_INDEXED_SENTINEL])}function isAssociative(maybeAssociative){return isKeyed(maybeAssociative)||isIndexed(maybeAssociative)}function isOrdered(maybeOrdered){return!!(maybeOrdered&&maybeOrdered[IS_ORDERED_SENTINEL])}Iterable.isIterable=isIterable;Iterable.isKeyed=isKeyed;Iterable.isIndexed=isIndexed;Iterable.isAssociative=isAssociative;Iterable.isOrdered=isOrdered;Iterable.Keyed=KeyedIterable;Iterable.Indexed=IndexedIterable;Iterable.Set=SetIterable;var IS_ITERABLE_SENTINEL="@@__IMMUTABLE_ITERABLE__@@";var IS_KEYED_SENTINEL="@@__IMMUTABLE_KEYED__@@";var IS_INDEXED_SENTINEL="@@__IMMUTABLE_INDEXED__@@";var IS_ORDERED_SENTINEL="@@__IMMUTABLE_ORDERED__@@";var ITERATE_KEYS=0;var ITERATE_VALUES=1;var ITERATE_ENTRIES=2;var REAL_ITERATOR_SYMBOL=typeof Symbol==="function"&&Symbol.iterator;var FAUX_ITERATOR_SYMBOL="@@iterator";var ITERATOR_SYMBOL=REAL_ITERATOR_SYMBOL||FAUX_ITERATOR_SYMBOL;function src_Iterator__Iterator(next){this.next=next}src_Iterator__Iterator.prototype.toString=function(){return"[Iterator]"};src_Iterator__Iterator.KEYS=ITERATE_KEYS;src_Iterator__Iterator.VALUES=ITERATE_VALUES;src_Iterator__Iterator.ENTRIES=ITERATE_ENTRIES;src_Iterator__Iterator.prototype.inspect=src_Iterator__Iterator.prototype.toSource=function(){return this.toString()};src_Iterator__Iterator.prototype[ITERATOR_SYMBOL]=function(){return this};function iteratorValue(type,k,v,iteratorResult){var value=type===0?k:type===1?v:[k,v];iteratorResult?iteratorResult.value=value:iteratorResult={value:value,done:false};return iteratorResult}function iteratorDone(){return{value:undefined,done:true}}function hasIterator(maybeIterable){return!!getIteratorFn(maybeIterable)}function isIterator(maybeIterator){return maybeIterator&&typeof maybeIterator.next==="function"}function getIterator(iterable){var iteratorFn=getIteratorFn(iterable);return iteratorFn&&iteratorFn.call(iterable)}function getIteratorFn(iterable){var iteratorFn=iterable&&(REAL_ITERATOR_SYMBOL&&iterable[REAL_ITERATOR_SYMBOL]||iterable[FAUX_ITERATOR_SYMBOL]);if(typeof iteratorFn==="function"){return iteratorFn}}function isArrayLike(value){return value&&typeof value.length==="number"}createClass(Seq,Iterable);function Seq(value){return value===null||value===undefined?emptySequence():isIterable(value)?value.toSeq():seqFromValue(value)}Seq.of=function(){return Seq(arguments)};Seq.prototype.toSeq=function(){return this};Seq.prototype.toString=function(){return this.__toString("Seq {","}")};Seq.prototype.cacheResult=function(){if(!this._cache&&this.__iterateUncached){this._cache=this.entrySeq().toArray();this.size=this._cache.length}return this};Seq.prototype.__iterate=function(fn,reverse){return seqIterate(this,fn,reverse,true)};Seq.prototype.__iterator=function(type,reverse){return seqIterator(this,type,reverse,true)};createClass(KeyedSeq,Seq);function KeyedSeq(value){return value===null||value===undefined?emptySequence().toKeyedSeq():isIterable(value)?isKeyed(value)?value.toSeq():value.fromEntrySeq():keyedSeqFromValue(value)}KeyedSeq.prototype.toKeyedSeq=function(){return this};createClass(IndexedSeq,Seq);function IndexedSeq(value){return value===null||value===undefined?emptySequence():!isIterable(value)?indexedSeqFromValue(value):isKeyed(value)?value.entrySeq():value.toIndexedSeq()}IndexedSeq.of=function(){return IndexedSeq(arguments)};IndexedSeq.prototype.toIndexedSeq=function(){return this};IndexedSeq.prototype.toString=function(){return this.__toString("Seq [","]")};IndexedSeq.prototype.__iterate=function(fn,reverse){return seqIterate(this,fn,reverse,false)};IndexedSeq.prototype.__iterator=function(type,reverse){return seqIterator(this,type,reverse,false)};createClass(SetSeq,Seq);function SetSeq(value){return(value===null||value===undefined?emptySequence():!isIterable(value)?indexedSeqFromValue(value):isKeyed(value)?value.entrySeq():value).toSetSeq()}SetSeq.of=function(){return SetSeq(arguments)};SetSeq.prototype.toSetSeq=function(){return this};Seq.isSeq=isSeq;Seq.Keyed=KeyedSeq;Seq.Set=SetSeq;Seq.Indexed=IndexedSeq;var IS_SEQ_SENTINEL="@@__IMMUTABLE_SEQ__@@";Seq.prototype[IS_SEQ_SENTINEL]=true;createClass(ArraySeq,IndexedSeq);function ArraySeq(array){this._array=array;this.size=array.length}ArraySeq.prototype.get=function(index,notSetValue){return this.has(index)?this._array[wrapIndex(this,index)]:notSetValue};ArraySeq.prototype.__iterate=function(fn,reverse){var array=this._array;var maxIndex=array.length-1;for(var ii=0;ii<=maxIndex;ii++){if(fn(array[reverse?maxIndex-ii:ii],ii,this)===false){return ii+1}}return ii};ArraySeq.prototype.__iterator=function(type,reverse){var array=this._array;var maxIndex=array.length-1;var ii=0;return new src_Iterator__Iterator(function(){return ii>maxIndex?iteratorDone():iteratorValue(type,ii,array[reverse?maxIndex-ii++:ii++])})};createClass(ObjectSeq,KeyedSeq);function ObjectSeq(object){var keys=Object.keys(object);this._object=object;this._keys=keys;this.size=keys.length}ObjectSeq.prototype.get=function(key,notSetValue){if(notSetValue!==undefined&&!this.has(key)){return notSetValue}return this._object[key]};ObjectSeq.prototype.has=function(key){return this._object.hasOwnProperty(key)};ObjectSeq.prototype.__iterate=function(fn,reverse){var object=this._object;var keys=this._keys;var maxIndex=keys.length-1;for(var ii=0;ii<=maxIndex;ii++){var key=keys[reverse?maxIndex-ii:ii];if(fn(object[key],key,this)===false){return ii+1}}return ii};ObjectSeq.prototype.__iterator=function(type,reverse){var object=this._object;var keys=this._keys;var maxIndex=keys.length-1;var ii=0;return new src_Iterator__Iterator(function(){var key=keys[reverse?maxIndex-ii:ii];return ii++>maxIndex?iteratorDone():iteratorValue(type,key,object[key])})};ObjectSeq.prototype[IS_ORDERED_SENTINEL]=true;createClass(IterableSeq,IndexedSeq);function IterableSeq(iterable){this._iterable=iterable;this.size=iterable.length||iterable.size}IterableSeq.prototype.__iterateUncached=function(fn,reverse){if(reverse){return this.cacheResult().__iterate(fn,reverse)}var iterable=this._iterable;var iterator=getIterator(iterable);var iterations=0;if(isIterator(iterator)){var step;while(!(step=iterator.next()).done){if(fn(step.value,iterations++,this)===false){break}}}return iterations};IterableSeq.prototype.__iteratorUncached=function(type,reverse){if(reverse){return this.cacheResult().__iterator(type,reverse)}var iterable=this._iterable;var iterator=getIterator(iterable);if(!isIterator(iterator)){return new src_Iterator__Iterator(iteratorDone)}var iterations=0;return new src_Iterator__Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,iterations++,step.value)})};createClass(IteratorSeq,IndexedSeq);function IteratorSeq(iterator){this._iterator=iterator;this._iteratorCache=[]}IteratorSeq.prototype.__iterateUncached=function(fn,reverse){if(reverse){return this.cacheResult().__iterate(fn,reverse)}var iterator=this._iterator;var cache=this._iteratorCache;var iterations=0;while(iterations<cache.length){if(fn(cache[iterations],iterations++,this)===false){return iterations}}var step;while(!(step=iterator.next()).done){var val=step.value;cache[iterations]=val;if(fn(val,iterations++,this)===false){break}}return iterations};IteratorSeq.prototype.__iteratorUncached=function(type,reverse){if(reverse){return this.cacheResult().__iterator(type,reverse)}var iterator=this._iterator;var cache=this._iteratorCache;var iterations=0;return new src_Iterator__Iterator(function(){if(iterations>=cache.length){var step=iterator.next();if(step.done){return step}cache[iterations]=step.value}return iteratorValue(type,iterations,cache[iterations++])})};function isSeq(maybeSeq){return!!(maybeSeq&&maybeSeq[IS_SEQ_SENTINEL])}var EMPTY_SEQ;function emptySequence(){return EMPTY_SEQ||(EMPTY_SEQ=new ArraySeq([]))}function keyedSeqFromValue(value){var seq=Array.isArray(value)?new ArraySeq(value).fromEntrySeq():isIterator(value)?new IteratorSeq(value).fromEntrySeq():hasIterator(value)?new IterableSeq(value).fromEntrySeq():typeof value==="object"?new ObjectSeq(value):undefined;if(!seq){throw new TypeError("Expected Array or iterable object of [k, v] entries, "+"or keyed object: "+value)}return seq}function indexedSeqFromValue(value){var seq=maybeIndexedSeqFromValue(value);if(!seq){throw new TypeError("Expected Array or iterable object of values: "+value)}return seq}function seqFromValue(value){var seq=maybeIndexedSeqFromValue(value)||typeof value==="object"&&new ObjectSeq(value);if(!seq){throw new TypeError("Expected Array or iterable object of values, or keyed object: "+value)}return seq}function maybeIndexedSeqFromValue(value){return isArrayLike(value)?new ArraySeq(value):isIterator(value)?new IteratorSeq(value):hasIterator(value)?new IterableSeq(value):undefined}function seqIterate(seq,fn,reverse,useKeys){var cache=seq._cache;if(cache){var maxIndex=cache.length-1;for(var ii=0;ii<=maxIndex;ii++){var entry=cache[reverse?maxIndex-ii:ii];if(fn(entry[1],useKeys?entry[0]:ii,seq)===false){return ii+1}}return ii}return seq.__iterateUncached(fn,reverse)}function seqIterator(seq,type,reverse,useKeys){var cache=seq._cache;if(cache){var maxIndex=cache.length-1;var ii=0;return new src_Iterator__Iterator(function(){var entry=cache[reverse?maxIndex-ii:ii];return ii++>maxIndex?iteratorDone():iteratorValue(type,useKeys?entry[0]:ii-1,entry[1])})}return seq.__iteratorUncached(type,reverse)}createClass(Collection,Iterable);function Collection(){throw TypeError("Abstract")}createClass(KeyedCollection,Collection);function KeyedCollection(){}createClass(IndexedCollection,Collection);function IndexedCollection(){}createClass(SetCollection,Collection);function SetCollection(){}Collection.Keyed=KeyedCollection;Collection.Indexed=IndexedCollection;Collection.Set=SetCollection;function is(valueA,valueB){if(valueA===valueB||valueA!==valueA&&valueB!==valueB){return true}if(!valueA||!valueB){return false}if(typeof valueA.valueOf==="function"&&typeof valueB.valueOf==="function"){valueA=valueA.valueOf();valueB=valueB.valueOf();if(valueA===valueB||valueA!==valueA&&valueB!==valueB){return true}if(!valueA||!valueB){return false}}if(typeof valueA.equals==="function"&&typeof valueB.equals==="function"&&valueA.equals(valueB)){return true}return false}function fromJS(json,converter){return converter?fromJSWith(converter,json,"",{"":json}):fromJSDefault(json)}function fromJSWith(converter,json,key,parentJSON){if(Array.isArray(json)){return converter.call(parentJSON,key,IndexedSeq(json).map(function(v,k){return fromJSWith(converter,v,k,json)}))}if(isPlainObj(json)){return converter.call(parentJSON,key,KeyedSeq(json).map(function(v,k){return fromJSWith(converter,v,k,json)}))}return json}function fromJSDefault(json){if(Array.isArray(json)){return IndexedSeq(json).map(fromJSDefault).toList()}if(isPlainObj(json)){return KeyedSeq(json).map(fromJSDefault).toMap()}return json}function isPlainObj(value){return value&&(value.constructor===Object||value.constructor===undefined)}var src_Math__imul=typeof Math.imul==="function"&&Math.imul(4294967295,2)===-2?Math.imul:function imul(a,b){a=a|0;b=b|0;var c=a&65535;var d=b&65535;return c*d+((a>>>16)*d+c*(b>>>16)<<16>>>0)|0};function smi(i32){return i32>>>1&1073741824|i32&3221225471}function hash(o){if(o===false||o===null||o===undefined){return 0}if(typeof o.valueOf==="function"){o=o.valueOf();if(o===false||o===null||o===undefined){return 0}}if(o===true){return 1}var type=typeof o;if(type==="number"){var h=o|0;if(h!==o){h^=o*4294967295}while(o>4294967295){o/=4294967295;h^=o}return smi(h)}if(type==="string"){return o.length>STRING_HASH_CACHE_MIN_STRLEN?cachedHashString(o):hashString(o)}if(typeof o.hashCode==="function"){return o.hashCode()}return hashJSObj(o)}function cachedHashString(string){var hash=stringHashCache[string];if(hash===undefined){hash=hashString(string);if(STRING_HASH_CACHE_SIZE===STRING_HASH_CACHE_MAX_SIZE){STRING_HASH_CACHE_SIZE=0;stringHashCache={}}STRING_HASH_CACHE_SIZE++;stringHashCache[string]=hash}return hash}function hashString(string){var hash=0;for(var ii=0;ii<string.length;ii++){hash=31*hash+string.charCodeAt(ii)|0}return smi(hash)}function hashJSObj(obj){var hash;if(usingWeakMap){hash=weakMap.get(obj);if(hash!==undefined){return hash}}hash=obj[UID_HASH_KEY];if(hash!==undefined){return hash}if(!canDefineProperty){hash=obj.propertyIsEnumerable&&obj.propertyIsEnumerable[UID_HASH_KEY];if(hash!==undefined){return hash}hash=getIENodeHash(obj);if(hash!==undefined){return hash}}hash=++objHashUID;if(objHashUID&1073741824){objHashUID=0}if(usingWeakMap){weakMap.set(obj,hash)}else if(isExtensible!==undefined&&isExtensible(obj)===false){throw new Error("Non-extensible objects are not allowed as keys.")}else if(canDefineProperty){Object.defineProperty(obj,UID_HASH_KEY,{enumerable:false,configurable:false,writable:false,value:hash})}else if(obj.propertyIsEnumerable!==undefined&&obj.propertyIsEnumerable===obj.constructor.prototype.propertyIsEnumerable){obj.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)};obj.propertyIsEnumerable[UID_HASH_KEY]=hash}else if(obj.nodeType!==undefined){obj[UID_HASH_KEY]=hash}else{throw new Error("Unable to set a non-enumerable property on object.")}return hash}var isExtensible=Object.isExtensible;var canDefineProperty=function(){try{Object.defineProperty({},"@",{});return true}catch(e){return false}}();function getIENodeHash(node){if(node&&node.nodeType>0){switch(node.nodeType){case 1:return node.uniqueID;case 9:return node.documentElement&&node.documentElement.uniqueID}}}var usingWeakMap=typeof WeakMap==="function";var weakMap;if(usingWeakMap){weakMap=new WeakMap}var objHashUID=0;var UID_HASH_KEY="__immutablehash__";if(typeof Symbol==="function"){UID_HASH_KEY=Symbol(UID_HASH_KEY)}var STRING_HASH_CACHE_MIN_STRLEN=16;var STRING_HASH_CACHE_MAX_SIZE=255;var STRING_HASH_CACHE_SIZE=0;var stringHashCache={};function invariant(condition,error){if(!condition)throw new Error(error)}function assertNotInfinite(size){invariant(size!==Infinity,"Cannot perform this action with an infinite size.")}createClass(ToKeyedSequence,KeyedSeq);function ToKeyedSequence(indexed,useKeys){this._iter=indexed;this._useKeys=useKeys;this.size=indexed.size}ToKeyedSequence.prototype.get=function(key,notSetValue){return this._iter.get(key,notSetValue)};ToKeyedSequence.prototype.has=function(key){return this._iter.has(key)};ToKeyedSequence.prototype.valueSeq=function(){return this._iter.valueSeq()};ToKeyedSequence.prototype.reverse=function(){var this$0=this;var reversedSequence=reverseFactory(this,true);if(!this._useKeys){reversedSequence.valueSeq=function(){return this$0._iter.toSeq().reverse()}}return reversedSequence};ToKeyedSequence.prototype.map=function(mapper,context){var this$0=this;var mappedSequence=mapFactory(this,mapper,context);if(!this._useKeys){mappedSequence.valueSeq=function(){return this$0._iter.toSeq().map(mapper,context)}}return mappedSequence};ToKeyedSequence.prototype.__iterate=function(fn,reverse){var this$0=this;var ii;return this._iter.__iterate(this._useKeys?function(v,k){return fn(v,k,this$0)}:(ii=reverse?resolveSize(this):0,function(v){return fn(v,reverse?--ii:ii++,this$0)}),reverse)};ToKeyedSequence.prototype.__iterator=function(type,reverse){if(this._useKeys){return this._iter.__iterator(type,reverse)}var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);var ii=reverse?resolveSize(this):0;return new src_Iterator__Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,reverse?--ii:ii++,step.value,step)})};ToKeyedSequence.prototype[IS_ORDERED_SENTINEL]=true;createClass(ToIndexedSequence,IndexedSeq);function ToIndexedSequence(iter){this._iter=iter;this.size=iter.size}ToIndexedSequence.prototype.includes=function(value){return this._iter.includes(value)};ToIndexedSequence.prototype.__iterate=function(fn,reverse){var this$0=this;var iterations=0;return this._iter.__iterate(function(v){return fn(v,iterations++,this$0)},reverse)};ToIndexedSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);var iterations=0;return new src_Iterator__Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,iterations++,step.value,step)})};createClass(ToSetSequence,SetSeq);function ToSetSequence(iter){this._iter=iter;this.size=iter.size}ToSetSequence.prototype.has=function(key){return this._iter.includes(key)};ToSetSequence.prototype.__iterate=function(fn,reverse){var this$0=this;return this._iter.__iterate(function(v){return fn(v,v,this$0)},reverse)};ToSetSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);return new src_Iterator__Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,step.value,step.value,step)})};createClass(FromEntriesSequence,KeyedSeq);function FromEntriesSequence(entries){this._iter=entries;this.size=entries.size}FromEntriesSequence.prototype.entrySeq=function(){return this._iter.toSeq()};FromEntriesSequence.prototype.__iterate=function(fn,reverse){var this$0=this;return this._iter.__iterate(function(entry){if(entry){validateEntry(entry);var indexedIterable=isIterable(entry);return fn(indexedIterable?entry.get(1):entry[1],indexedIterable?entry.get(0):entry[0],this$0)}},reverse)};FromEntriesSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);return new src_Iterator__Iterator(function(){while(true){var step=iterator.next();if(step.done){return step}var entry=step.value;if(entry){validateEntry(entry);var indexedIterable=isIterable(entry);return iteratorValue(type,indexedIterable?entry.get(0):entry[0],indexedIterable?entry.get(1):entry[1],step)}}})};ToIndexedSequence.prototype.cacheResult=ToKeyedSequence.prototype.cacheResult=ToSetSequence.prototype.cacheResult=FromEntriesSequence.prototype.cacheResult=cacheResultThrough;function flipFactory(iterable){var flipSequence=makeSequence(iterable);flipSequence._iter=iterable;flipSequence.size=iterable.size;flipSequence.flip=function(){return iterable};flipSequence.reverse=function(){var reversedSequence=iterable.reverse.apply(this);reversedSequence.flip=function(){return iterable.reverse()};return reversedSequence};flipSequence.has=function(key){return iterable.includes(key)};flipSequence.includes=function(key){return iterable.has(key)};flipSequence.cacheResult=cacheResultThrough;flipSequence.__iterateUncached=function(fn,reverse){var this$0=this;return iterable.__iterate(function(v,k){return fn(k,v,this$0)!==false},reverse)};flipSequence.__iteratorUncached=function(type,reverse){if(type===ITERATE_ENTRIES){var iterator=iterable.__iterator(type,reverse);return new src_Iterator__Iterator(function(){var step=iterator.next();if(!step.done){var k=step.value[0];step.value[0]=step.value[1];step.value[1]=k}return step})}return iterable.__iterator(type===ITERATE_VALUES?ITERATE_KEYS:ITERATE_VALUES,reverse)};return flipSequence}function mapFactory(iterable,mapper,context){var mappedSequence=makeSequence(iterable);mappedSequence.size=iterable.size;mappedSequence.has=function(key){return iterable.has(key)};mappedSequence.get=function(key,notSetValue){var v=iterable.get(key,NOT_SET);return v===NOT_SET?notSetValue:mapper.call(context,v,key,iterable)};mappedSequence.__iterateUncached=function(fn,reverse){var this$0=this;return iterable.__iterate(function(v,k,c){return fn(mapper.call(context,v,k,c),k,this$0)!==false},reverse)};mappedSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse);return new src_Iterator__Iterator(function(){var step=iterator.next();if(step.done){return step}var entry=step.value;var key=entry[0];return iteratorValue(type,key,mapper.call(context,entry[1],key,iterable),step)})};return mappedSequence}function reverseFactory(iterable,useKeys){var reversedSequence=makeSequence(iterable);reversedSequence._iter=iterable;reversedSequence.size=iterable.size;reversedSequence.reverse=function(){return iterable};if(iterable.flip){reversedSequence.flip=function(){var flipSequence=flipFactory(iterable);flipSequence.reverse=function(){return iterable.flip()};return flipSequence}}reversedSequence.get=function(key,notSetValue){return iterable.get(useKeys?key:-1-key,notSetValue)};reversedSequence.has=function(key){return iterable.has(useKeys?key:-1-key)};reversedSequence.includes=function(value){return iterable.includes(value)};reversedSequence.cacheResult=cacheResultThrough;reversedSequence.__iterate=function(fn,reverse){var this$0=this;return iterable.__iterate(function(v,k){return fn(v,k,this$0)},!reverse)};reversedSequence.__iterator=function(type,reverse){return iterable.__iterator(type,!reverse)};return reversedSequence}function filterFactory(iterable,predicate,context,useKeys){var filterSequence=makeSequence(iterable);if(useKeys){filterSequence.has=function(key){var v=iterable.get(key,NOT_SET);return v!==NOT_SET&&!!predicate.call(context,v,key,iterable)};filterSequence.get=function(key,notSetValue){var v=iterable.get(key,NOT_SET);return v!==NOT_SET&&predicate.call(context,v,key,iterable)?v:notSetValue}}filterSequence.__iterateUncached=function(fn,reverse){var this$0=this;var iterations=0;iterable.__iterate(function(v,k,c){if(predicate.call(context,v,k,c)){iterations++;return fn(v,useKeys?k:iterations-1,this$0)}},reverse);return iterations};filterSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse);var iterations=0;return new src_Iterator__Iterator(function(){while(true){var step=iterator.next();if(step.done){return step}var entry=step.value;var key=entry[0];var value=entry[1];if(predicate.call(context,value,key,iterable)){return iteratorValue(type,useKeys?key:iterations++,value,step)}}})};return filterSequence}function countByFactory(iterable,grouper,context){var groups=src_Map__Map().asMutable();iterable.__iterate(function(v,k){groups.update(grouper.call(context,v,k,iterable),0,function(a){return a+1})});return groups.asImmutable()}function groupByFactory(iterable,grouper,context){var isKeyedIter=isKeyed(iterable);var groups=(isOrdered(iterable)?OrderedMap():src_Map__Map()).asMutable();iterable.__iterate(function(v,k){groups.update(grouper.call(context,v,k,iterable),function(a){return a=a||[],a.push(isKeyedIter?[k,v]:v),a})});var coerce=iterableClass(iterable);return groups.map(function(arr){return reify(iterable,coerce(arr))})}function sliceFactory(iterable,begin,end,useKeys){var originalSize=iterable.size;if(wholeSlice(begin,end,originalSize)){return iterable}var resolvedBegin=resolveBegin(begin,originalSize);var resolvedEnd=resolveEnd(end,originalSize);if(resolvedBegin!==resolvedBegin||resolvedEnd!==resolvedEnd){return sliceFactory(iterable.toSeq().cacheResult(),begin,end,useKeys)}var sliceSize=resolvedEnd-resolvedBegin;if(sliceSize<0){sliceSize=0}var sliceSeq=makeSequence(iterable);sliceSeq.size=sliceSize===0?sliceSize:iterable.size&&sliceSize||undefined;if(!useKeys&&isSeq(iterable)&&sliceSize>=0){sliceSeq.get=function(index,notSetValue){index=wrapIndex(this,index);return index>=0&&index<sliceSize?iterable.get(index+resolvedBegin,notSetValue):notSetValue}}sliceSeq.__iterateUncached=function(fn,reverse){var this$0=this;if(sliceSize===0){return 0}if(reverse){return this.cacheResult().__iterate(fn,reverse)}var skipped=0;var isSkipping=true;var iterations=0;iterable.__iterate(function(v,k){if(!(isSkipping&&(isSkipping=skipped++<resolvedBegin))){iterations++;return fn(v,useKeys?k:iterations-1,this$0)!==false&&iterations!==sliceSize}});return iterations};sliceSeq.__iteratorUncached=function(type,reverse){if(sliceSize&&reverse){return this.cacheResult().__iterator(type,reverse)}var iterator=sliceSize&&iterable.__iterator(type,reverse);var skipped=0;var iterations=0;return new src_Iterator__Iterator(function(){while(skipped++<resolvedBegin){iterator.next()}if(++iterations>sliceSize){return iteratorDone()}var step=iterator.next();if(useKeys||type===ITERATE_VALUES){return step}else if(type===ITERATE_KEYS){return iteratorValue(type,iterations-1,undefined,step)}else{return iteratorValue(type,iterations-1,step.value[1],step)}})};return sliceSeq}function takeWhileFactory(iterable,predicate,context){var takeSequence=makeSequence(iterable);takeSequence.__iterateUncached=function(fn,reverse){var this$0=this;if(reverse){return this.cacheResult().__iterate(fn,reverse)}var iterations=0;iterable.__iterate(function(v,k,c){return predicate.call(context,v,k,c)&&++iterations&&fn(v,k,this$0)});return iterations};takeSequence.__iteratorUncached=function(type,reverse){var this$0=this;if(reverse){return this.cacheResult().__iterator(type,reverse)}var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse);var iterating=true;return new src_Iterator__Iterator(function(){if(!iterating){return iteratorDone()}var step=iterator.next();if(step.done){return step}var entry=step.value;var k=entry[0];var v=entry[1];if(!predicate.call(context,v,k,this$0)){iterating=false;return iteratorDone()}return type===ITERATE_ENTRIES?step:iteratorValue(type,k,v,step)})};return takeSequence}function skipWhileFactory(iterable,predicate,context,useKeys){var skipSequence=makeSequence(iterable);skipSequence.__iterateUncached=function(fn,reverse){var this$0=this;if(reverse){return this.cacheResult().__iterate(fn,reverse)}var isSkipping=true;var iterations=0;iterable.__iterate(function(v,k,c){if(!(isSkipping&&(isSkipping=predicate.call(context,v,k,c)))){iterations++;return fn(v,useKeys?k:iterations-1,this$0)}});return iterations};skipSequence.__iteratorUncached=function(type,reverse){var this$0=this;if(reverse){return this.cacheResult().__iterator(type,reverse)}var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse);var skipping=true;var iterations=0;return new src_Iterator__Iterator(function(){var step,k,v;do{step=iterator.next();if(step.done){if(useKeys||type===ITERATE_VALUES){return step}else if(type===ITERATE_KEYS){return iteratorValue(type,iterations++,undefined,step)}else{return iteratorValue(type,iterations++,step.value[1],step)}}var entry=step.value;k=entry[0];v=entry[1];skipping&&(skipping=predicate.call(context,v,k,this$0))}while(skipping);return type===ITERATE_ENTRIES?step:iteratorValue(type,k,v,step)})};return skipSequence}function concatFactory(iterable,values){var isKeyedIterable=isKeyed(iterable);var iters=[iterable].concat(values).map(function(v){if(!isIterable(v)){v=isKeyedIterable?keyedSeqFromValue(v):indexedSeqFromValue(Array.isArray(v)?v:[v])}else if(isKeyedIterable){v=KeyedIterable(v)}return v}).filter(function(v){return v.size!==0});if(iters.length===0){return iterable}if(iters.length===1){var singleton=iters[0];if(singleton===iterable||isKeyedIterable&&isKeyed(singleton)||isIndexed(iterable)&&isIndexed(singleton)){return singleton}}var concatSeq=new ArraySeq(iters);if(isKeyedIterable){concatSeq=concatSeq.toKeyedSeq()}else if(!isIndexed(iterable)){concatSeq=concatSeq.toSetSeq()}concatSeq=concatSeq.flatten(true);concatSeq.size=iters.reduce(function(sum,seq){if(sum!==undefined){var size=seq.size;if(size!==undefined){return sum+size}}},0);return concatSeq}function flattenFactory(iterable,depth,useKeys){var flatSequence=makeSequence(iterable);flatSequence.__iterateUncached=function(fn,reverse){var iterations=0;var stopped=false;function flatDeep(iter,currentDepth){var this$0=this;iter.__iterate(function(v,k){if((!depth||currentDepth<depth)&&isIterable(v)){flatDeep(v,currentDepth+1)}else if(fn(v,useKeys?k:iterations++,this$0)===false){stopped=true}return!stopped},reverse)}flatDeep(iterable,0);return iterations};flatSequence.__iteratorUncached=function(type,reverse){
var iterator=iterable.__iterator(type,reverse);var stack=[];var iterations=0;return new src_Iterator__Iterator(function(){while(iterator){var step=iterator.next();if(step.done!==false){iterator=stack.pop();continue}var v=step.value;if(type===ITERATE_ENTRIES){v=v[1]}if((!depth||stack.length<depth)&&isIterable(v)){stack.push(iterator);iterator=v.__iterator(type,reverse)}else{return useKeys?step:iteratorValue(type,iterations++,v,step)}}return iteratorDone()})};return flatSequence}function flatMapFactory(iterable,mapper,context){var coerce=iterableClass(iterable);return iterable.toSeq().map(function(v,k){return coerce(mapper.call(context,v,k,iterable))}).flatten(true)}function interposeFactory(iterable,separator){var interposedSequence=makeSequence(iterable);interposedSequence.size=iterable.size&&iterable.size*2-1;interposedSequence.__iterateUncached=function(fn,reverse){var this$0=this;var iterations=0;iterable.__iterate(function(v,k){return(!iterations||fn(separator,iterations++,this$0)!==false)&&fn(v,iterations++,this$0)!==false},reverse);return iterations};interposedSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(ITERATE_VALUES,reverse);var iterations=0;var step;return new src_Iterator__Iterator(function(){if(!step||iterations%2){step=iterator.next();if(step.done){return step}}return iterations%2?iteratorValue(type,iterations++,separator):iteratorValue(type,iterations++,step.value,step)})};return interposedSequence}function sortFactory(iterable,comparator,mapper){if(!comparator){comparator=defaultComparator}var isKeyedIterable=isKeyed(iterable);var index=0;var entries=iterable.toSeq().map(function(v,k){return[k,v,index++,mapper?mapper(v,k,iterable):v]}).toArray();entries.sort(function(a,b){return comparator(a[3],b[3])||a[2]-b[2]}).forEach(isKeyedIterable?function(v,i){entries[i].length=2}:function(v,i){entries[i]=v[1]});return isKeyedIterable?KeyedSeq(entries):isIndexed(iterable)?IndexedSeq(entries):SetSeq(entries)}function maxFactory(iterable,comparator,mapper){if(!comparator){comparator=defaultComparator}if(mapper){var entry=iterable.toSeq().map(function(v,k){return[v,mapper(v,k,iterable)]}).reduce(function(a,b){return maxCompare(comparator,a[1],b[1])?b:a});return entry&&entry[0]}else{return iterable.reduce(function(a,b){return maxCompare(comparator,a,b)?b:a})}}function maxCompare(comparator,a,b){var comp=comparator(b,a);return comp===0&&b!==a&&(b===undefined||b===null||b!==b)||comp>0}function zipWithFactory(keyIter,zipper,iters){var zipSequence=makeSequence(keyIter);zipSequence.size=new ArraySeq(iters).map(function(i){return i.size}).min();zipSequence.__iterate=function(fn,reverse){var iterator=this.__iterator(ITERATE_VALUES,reverse);var step;var iterations=0;while(!(step=iterator.next()).done){if(fn(step.value,iterations++,this)===false){break}}return iterations};zipSequence.__iteratorUncached=function(type,reverse){var iterators=iters.map(function(i){return i=Iterable(i),getIterator(reverse?i.reverse():i)});var iterations=0;var isDone=false;return new src_Iterator__Iterator(function(){var steps;if(!isDone){steps=iterators.map(function(i){return i.next()});isDone=steps.some(function(s){return s.done})}if(isDone){return iteratorDone()}return iteratorValue(type,iterations++,zipper.apply(null,steps.map(function(s){return s.value})))})};return zipSequence}function reify(iter,seq){return isSeq(iter)?seq:iter.constructor(seq)}function validateEntry(entry){if(entry!==Object(entry)){throw new TypeError("Expected [K, V] tuple: "+entry)}}function resolveSize(iter){assertNotInfinite(iter.size);return ensureSize(iter)}function iterableClass(iterable){return isKeyed(iterable)?KeyedIterable:isIndexed(iterable)?IndexedIterable:SetIterable}function makeSequence(iterable){return Object.create((isKeyed(iterable)?KeyedSeq:isIndexed(iterable)?IndexedSeq:SetSeq).prototype)}function cacheResultThrough(){if(this._iter.cacheResult){this._iter.cacheResult();this.size=this._iter.size;return this}else{return Seq.prototype.cacheResult.call(this)}}function defaultComparator(a,b){return a>b?1:a<b?-1:0}function forceIterator(keyPath){var iter=getIterator(keyPath);if(!iter){if(!isArrayLike(keyPath)){throw new TypeError("Expected iterable or array-like: "+keyPath)}iter=getIterator(Iterable(keyPath))}return iter}createClass(src_Map__Map,KeyedCollection);function src_Map__Map(value){return value===null||value===undefined?emptyMap():isMap(value)?value:emptyMap().withMutations(function(map){var iter=KeyedIterable(value);assertNotInfinite(iter.size);iter.forEach(function(v,k){return map.set(k,v)})})}src_Map__Map.prototype.toString=function(){return this.__toString("Map {","}")};src_Map__Map.prototype.get=function(k,notSetValue){return this._root?this._root.get(0,undefined,k,notSetValue):notSetValue};src_Map__Map.prototype.set=function(k,v){return updateMap(this,k,v)};src_Map__Map.prototype.setIn=function(keyPath,v){return this.updateIn(keyPath,NOT_SET,function(){return v})};src_Map__Map.prototype.remove=function(k){return updateMap(this,k,NOT_SET)};src_Map__Map.prototype.deleteIn=function(keyPath){return this.updateIn(keyPath,function(){return NOT_SET})};src_Map__Map.prototype.update=function(k,notSetValue,updater){return arguments.length===1?k(this):this.updateIn([k],notSetValue,updater)};src_Map__Map.prototype.updateIn=function(keyPath,notSetValue,updater){if(!updater){updater=notSetValue;notSetValue=undefined}var updatedValue=updateInDeepMap(this,forceIterator(keyPath),notSetValue,updater);return updatedValue===NOT_SET?undefined:updatedValue};src_Map__Map.prototype.clear=function(){if(this.size===0){return this}if(this.__ownerID){this.size=0;this._root=null;this.__hash=undefined;this.__altered=true;return this}return emptyMap()};src_Map__Map.prototype.merge=function(){return mergeIntoMapWith(this,undefined,arguments)};src_Map__Map.prototype.mergeWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoMapWith(this,merger,iters)};src_Map__Map.prototype.mergeIn=function(keyPath){var iters=SLICE$0.call(arguments,1);return this.updateIn(keyPath,emptyMap(),function(m){return m.merge.apply(m,iters)})};src_Map__Map.prototype.mergeDeep=function(){return mergeIntoMapWith(this,deepMerger(undefined),arguments)};src_Map__Map.prototype.mergeDeepWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoMapWith(this,deepMerger(merger),iters)};src_Map__Map.prototype.mergeDeepIn=function(keyPath){var iters=SLICE$0.call(arguments,1);return this.updateIn(keyPath,emptyMap(),function(m){return m.mergeDeep.apply(m,iters)})};src_Map__Map.prototype.sort=function(comparator){return OrderedMap(sortFactory(this,comparator))};src_Map__Map.prototype.sortBy=function(mapper,comparator){return OrderedMap(sortFactory(this,comparator,mapper))};src_Map__Map.prototype.withMutations=function(fn){var mutable=this.asMutable();fn(mutable);return mutable.wasAltered()?mutable.__ensureOwner(this.__ownerID):this};src_Map__Map.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new OwnerID)};src_Map__Map.prototype.asImmutable=function(){return this.__ensureOwner()};src_Map__Map.prototype.wasAltered=function(){return this.__altered};src_Map__Map.prototype.__iterator=function(type,reverse){return new MapIterator(this,type,reverse)};src_Map__Map.prototype.__iterate=function(fn,reverse){var this$0=this;var iterations=0;this._root&&this._root.iterate(function(entry){iterations++;return fn(entry[1],entry[0],this$0)},reverse);return iterations};src_Map__Map.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}if(!ownerID){this.__ownerID=ownerID;this.__altered=false;return this}return makeMap(this.size,this._root,ownerID,this.__hash)};function isMap(maybeMap){return!!(maybeMap&&maybeMap[IS_MAP_SENTINEL])}src_Map__Map.isMap=isMap;var IS_MAP_SENTINEL="@@__IMMUTABLE_MAP__@@";var MapPrototype=src_Map__Map.prototype;MapPrototype[IS_MAP_SENTINEL]=true;MapPrototype[DELETE]=MapPrototype.remove;MapPrototype.removeIn=MapPrototype.deleteIn;function ArrayMapNode(ownerID,entries){this.ownerID=ownerID;this.entries=entries}ArrayMapNode.prototype.get=function(shift,keyHash,key,notSetValue){var entries=this.entries;for(var ii=0,len=entries.length;ii<len;ii++){if(is(key,entries[ii][0])){return entries[ii][1]}}return notSetValue};ArrayMapNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){var removed=value===NOT_SET;var entries=this.entries;var idx=0;for(var len=entries.length;idx<len;idx++){if(is(key,entries[idx][0])){break}}var exists=idx<len;if(exists?entries[idx][1]===value:removed){return this}SetRef(didAlter);(removed||!exists)&&SetRef(didChangeSize);if(removed&&entries.length===1){return}if(!exists&&!removed&&entries.length>=MAX_ARRAY_MAP_SIZE){return createNodes(ownerID,entries,key,value)}var isEditable=ownerID&&ownerID===this.ownerID;var newEntries=isEditable?entries:arrCopy(entries);if(exists){if(removed){idx===len-1?newEntries.pop():newEntries[idx]=newEntries.pop()}else{newEntries[idx]=[key,value]}}else{newEntries.push([key,value])}if(isEditable){this.entries=newEntries;return this}return new ArrayMapNode(ownerID,newEntries)};function BitmapIndexedNode(ownerID,bitmap,nodes){this.ownerID=ownerID;this.bitmap=bitmap;this.nodes=nodes}BitmapIndexedNode.prototype.get=function(shift,keyHash,key,notSetValue){if(keyHash===undefined){keyHash=hash(key)}var bit=1<<((shift===0?keyHash:keyHash>>>shift)&MASK);var bitmap=this.bitmap;return(bitmap&bit)===0?notSetValue:this.nodes[popCount(bitmap&bit-1)].get(shift+SHIFT,keyHash,key,notSetValue)};BitmapIndexedNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){if(keyHash===undefined){keyHash=hash(key)}var keyHashFrag=(shift===0?keyHash:keyHash>>>shift)&MASK;var bit=1<<keyHashFrag;var bitmap=this.bitmap;var exists=(bitmap&bit)!==0;if(!exists&&value===NOT_SET){return this}var idx=popCount(bitmap&bit-1);var nodes=this.nodes;var node=exists?nodes[idx]:undefined;var newNode=updateNode(node,ownerID,shift+SHIFT,keyHash,key,value,didChangeSize,didAlter);if(newNode===node){return this}if(!exists&&newNode&&nodes.length>=MAX_BITMAP_INDEXED_SIZE){return expandNodes(ownerID,nodes,bitmap,keyHashFrag,newNode)}if(exists&&!newNode&&nodes.length===2&&isLeafNode(nodes[idx^1])){return nodes[idx^1]}if(exists&&newNode&&nodes.length===1&&isLeafNode(newNode)){return newNode}var isEditable=ownerID&&ownerID===this.ownerID;var newBitmap=exists?newNode?bitmap:bitmap^bit:bitmap|bit;var newNodes=exists?newNode?setIn(nodes,idx,newNode,isEditable):spliceOut(nodes,idx,isEditable):spliceIn(nodes,idx,newNode,isEditable);if(isEditable){this.bitmap=newBitmap;this.nodes=newNodes;return this}return new BitmapIndexedNode(ownerID,newBitmap,newNodes)};function HashArrayMapNode(ownerID,count,nodes){this.ownerID=ownerID;this.count=count;this.nodes=nodes}HashArrayMapNode.prototype.get=function(shift,keyHash,key,notSetValue){if(keyHash===undefined){keyHash=hash(key)}var idx=(shift===0?keyHash:keyHash>>>shift)&MASK;var node=this.nodes[idx];return node?node.get(shift+SHIFT,keyHash,key,notSetValue):notSetValue};HashArrayMapNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){if(keyHash===undefined){keyHash=hash(key)}var idx=(shift===0?keyHash:keyHash>>>shift)&MASK;var removed=value===NOT_SET;var nodes=this.nodes;var node=nodes[idx];if(removed&&!node){return this}var newNode=updateNode(node,ownerID,shift+SHIFT,keyHash,key,value,didChangeSize,didAlter);if(newNode===node){return this}var newCount=this.count;if(!node){newCount++}else if(!newNode){newCount--;if(newCount<MIN_HASH_ARRAY_MAP_SIZE){return packNodes(ownerID,nodes,newCount,idx)}}var isEditable=ownerID&&ownerID===this.ownerID;var newNodes=setIn(nodes,idx,newNode,isEditable);if(isEditable){this.count=newCount;this.nodes=newNodes;return this}return new HashArrayMapNode(ownerID,newCount,newNodes)};function HashCollisionNode(ownerID,keyHash,entries){this.ownerID=ownerID;this.keyHash=keyHash;this.entries=entries}HashCollisionNode.prototype.get=function(shift,keyHash,key,notSetValue){var entries=this.entries;for(var ii=0,len=entries.length;ii<len;ii++){if(is(key,entries[ii][0])){return entries[ii][1]}}return notSetValue};HashCollisionNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){if(keyHash===undefined){keyHash=hash(key)}var removed=value===NOT_SET;if(keyHash!==this.keyHash){if(removed){return this}SetRef(didAlter);SetRef(didChangeSize);return mergeIntoNode(this,ownerID,shift,keyHash,[key,value])}var entries=this.entries;var idx=0;for(var len=entries.length;idx<len;idx++){if(is(key,entries[idx][0])){break}}var exists=idx<len;if(exists?entries[idx][1]===value:removed){return this}SetRef(didAlter);(removed||!exists)&&SetRef(didChangeSize);if(removed&&len===2){return new ValueNode(ownerID,this.keyHash,entries[idx^1])}var isEditable=ownerID&&ownerID===this.ownerID;var newEntries=isEditable?entries:arrCopy(entries);if(exists){if(removed){idx===len-1?newEntries.pop():newEntries[idx]=newEntries.pop()}else{newEntries[idx]=[key,value]}}else{newEntries.push([key,value])}if(isEditable){this.entries=newEntries;return this}return new HashCollisionNode(ownerID,this.keyHash,newEntries)};function ValueNode(ownerID,keyHash,entry){this.ownerID=ownerID;this.keyHash=keyHash;this.entry=entry}ValueNode.prototype.get=function(shift,keyHash,key,notSetValue){return is(key,this.entry[0])?this.entry[1]:notSetValue};ValueNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){var removed=value===NOT_SET;var keyMatch=is(key,this.entry[0]);if(keyMatch?value===this.entry[1]:removed){return this}SetRef(didAlter);if(removed){SetRef(didChangeSize);return}if(keyMatch){if(ownerID&&ownerID===this.ownerID){this.entry[1]=value;return this}return new ValueNode(ownerID,this.keyHash,[key,value])}SetRef(didChangeSize);return mergeIntoNode(this,ownerID,shift,hash(key),[key,value])};ArrayMapNode.prototype.iterate=HashCollisionNode.prototype.iterate=function(fn,reverse){var entries=this.entries;for(var ii=0,maxIndex=entries.length-1;ii<=maxIndex;ii++){if(fn(entries[reverse?maxIndex-ii:ii])===false){return false}}};BitmapIndexedNode.prototype.iterate=HashArrayMapNode.prototype.iterate=function(fn,reverse){var nodes=this.nodes;for(var ii=0,maxIndex=nodes.length-1;ii<=maxIndex;ii++){var node=nodes[reverse?maxIndex-ii:ii];if(node&&node.iterate(fn,reverse)===false){return false}}};ValueNode.prototype.iterate=function(fn,reverse){return fn(this.entry)};createClass(MapIterator,src_Iterator__Iterator);function MapIterator(map,type,reverse){this._type=type;this._reverse=reverse;this._stack=map._root&&mapIteratorFrame(map._root)}MapIterator.prototype.next=function(){var type=this._type;var stack=this._stack;while(stack){var node=stack.node;var index=stack.index++;var maxIndex;if(node.entry){if(index===0){return mapIteratorValue(type,node.entry)}}else if(node.entries){maxIndex=node.entries.length-1;if(index<=maxIndex){return mapIteratorValue(type,node.entries[this._reverse?maxIndex-index:index])}}else{maxIndex=node.nodes.length-1;if(index<=maxIndex){var subNode=node.nodes[this._reverse?maxIndex-index:index];if(subNode){if(subNode.entry){return mapIteratorValue(type,subNode.entry)}stack=this._stack=mapIteratorFrame(subNode,stack)}continue}}stack=this._stack=this._stack.__prev}return iteratorDone()};function mapIteratorValue(type,entry){return iteratorValue(type,entry[0],entry[1])}function mapIteratorFrame(node,prev){return{node:node,index:0,__prev:prev}}function makeMap(size,root,ownerID,hash){var map=Object.create(MapPrototype);map.size=size;map._root=root;map.__ownerID=ownerID;map.__hash=hash;map.__altered=false;return map}var EMPTY_MAP;function emptyMap(){return EMPTY_MAP||(EMPTY_MAP=makeMap(0))}function updateMap(map,k,v){var newRoot;var newSize;if(!map._root){if(v===NOT_SET){return map}newSize=1;newRoot=new ArrayMapNode(map.__ownerID,[[k,v]])}else{var didChangeSize=MakeRef(CHANGE_LENGTH);var didAlter=MakeRef(DID_ALTER);newRoot=updateNode(map._root,map.__ownerID,0,undefined,k,v,didChangeSize,didAlter);if(!didAlter.value){return map}newSize=map.size+(didChangeSize.value?v===NOT_SET?-1:1:0)}if(map.__ownerID){map.size=newSize;map._root=newRoot;map.__hash=undefined;map.__altered=true;return map}return newRoot?makeMap(newSize,newRoot):emptyMap()}function updateNode(node,ownerID,shift,keyHash,key,value,didChangeSize,didAlter){if(!node){if(value===NOT_SET){return node}SetRef(didAlter);SetRef(didChangeSize);return new ValueNode(ownerID,keyHash,[key,value])}return node.update(ownerID,shift,keyHash,key,value,didChangeSize,didAlter)}function isLeafNode(node){return node.constructor===ValueNode||node.constructor===HashCollisionNode}function mergeIntoNode(node,ownerID,shift,keyHash,entry){if(node.keyHash===keyHash){return new HashCollisionNode(ownerID,keyHash,[node.entry,entry])}var idx1=(shift===0?node.keyHash:node.keyHash>>>shift)&MASK;var idx2=(shift===0?keyHash:keyHash>>>shift)&MASK;var newNode;var nodes=idx1===idx2?[mergeIntoNode(node,ownerID,shift+SHIFT,keyHash,entry)]:(newNode=new ValueNode(ownerID,keyHash,entry),idx1<idx2?[node,newNode]:[newNode,node]);return new BitmapIndexedNode(ownerID,1<<idx1|1<<idx2,nodes)}function createNodes(ownerID,entries,key,value){if(!ownerID){ownerID=new OwnerID}var node=new ValueNode(ownerID,hash(key),[key,value]);for(var ii=0;ii<entries.length;ii++){var entry=entries[ii];node=node.update(ownerID,0,undefined,entry[0],entry[1])}return node}function packNodes(ownerID,nodes,count,excluding){var bitmap=0;var packedII=0;var packedNodes=new Array(count);for(var ii=0,bit=1,len=nodes.length;ii<len;ii++,bit<<=1){var node=nodes[ii];if(node!==undefined&&ii!==excluding){bitmap|=bit;packedNodes[packedII++]=node}}return new BitmapIndexedNode(ownerID,bitmap,packedNodes)}function expandNodes(ownerID,nodes,bitmap,including,node){var count=0;var expandedNodes=new Array(SIZE);for(var ii=0;bitmap!==0;ii++,bitmap>>>=1){expandedNodes[ii]=bitmap&1?nodes[count++]:undefined}expandedNodes[including]=node;return new HashArrayMapNode(ownerID,count+1,expandedNodes)}function mergeIntoMapWith(map,merger,iterables){var iters=[];for(var ii=0;ii<iterables.length;ii++){var value=iterables[ii];var iter=KeyedIterable(value);if(!isIterable(value)){iter=iter.map(function(v){return fromJS(v)})}iters.push(iter)}return mergeIntoCollectionWith(map,merger,iters)}function deepMerger(merger){return function(existing,value,key){return existing&&existing.mergeDeepWith&&isIterable(value)?existing.mergeDeepWith(merger,value):merger?merger(existing,value,key):value}}function mergeIntoCollectionWith(collection,merger,iters){iters=iters.filter(function(x){return x.size!==0});if(iters.length===0){return collection}if(collection.size===0&&!collection.__ownerID&&iters.length===1){return collection.constructor(iters[0])}return collection.withMutations(function(collection){var mergeIntoMap=merger?function(value,key){collection.update(key,NOT_SET,function(existing){return existing===NOT_SET?value:merger(existing,value,key)})}:function(value,key){collection.set(key,value)};for(var ii=0;ii<iters.length;ii++){iters[ii].forEach(mergeIntoMap)}})}function updateInDeepMap(existing,keyPathIter,notSetValue,updater){var isNotSet=existing===NOT_SET;var step=keyPathIter.next();if(step.done){var existingValue=isNotSet?notSetValue:existing;var newValue=updater(existingValue);return newValue===existingValue?existing:newValue}invariant(isNotSet||existing&&existing.set,"invalid keyPath");var key=step.value;var nextExisting=isNotSet?NOT_SET:existing.get(key,NOT_SET);var nextUpdated=updateInDeepMap(nextExisting,keyPathIter,notSetValue,updater);return nextUpdated===nextExisting?existing:nextUpdated===NOT_SET?existing.remove(key):(isNotSet?emptyMap():existing).set(key,nextUpdated)}function popCount(x){x=x-(x>>1&1431655765);x=(x&858993459)+(x>>2&858993459);x=x+(x>>4)&252645135;x=x+(x>>8);x=x+(x>>16);return x&127}function setIn(array,idx,val,canEdit){var newArray=canEdit?array:arrCopy(array);newArray[idx]=val;return newArray}function spliceIn(array,idx,val,canEdit){var newLen=array.length+1;if(canEdit&&idx+1===newLen){array[idx]=val;return array}var newArray=new Array(newLen);var after=0;for(var ii=0;ii<newLen;ii++){if(ii===idx){newArray[ii]=val;after=-1}else{newArray[ii]=array[ii+after]}}return newArray}function spliceOut(array,idx,canEdit){var newLen=array.length-1;if(canEdit&&idx===newLen){array.pop();return array}var newArray=new Array(newLen);var after=0;for(var ii=0;ii<newLen;ii++){if(ii===idx){after=1}newArray[ii]=array[ii+after]}return newArray}var MAX_ARRAY_MAP_SIZE=SIZE/4;var MAX_BITMAP_INDEXED_SIZE=SIZE/2;var MIN_HASH_ARRAY_MAP_SIZE=SIZE/4;createClass(List,IndexedCollection);function List(value){var empty=emptyList();if(value===null||value===undefined){return empty}if(isList(value)){return value}var iter=IndexedIterable(value);var size=iter.size;if(size===0){return empty}assertNotInfinite(size);if(size>0&&size<SIZE){return makeList(0,size,SHIFT,null,new VNode(iter.toArray()))}return empty.withMutations(function(list){list.setSize(size);iter.forEach(function(v,i){return list.set(i,v)})})}List.of=function(){return this(arguments)};List.prototype.toString=function(){return this.__toString("List [","]")};List.prototype.get=function(index,notSetValue){index=wrapIndex(this,index);if(index<0||index>=this.size){return notSetValue}index+=this._origin;var node=listNodeFor(this,index);return node&&node.array[index&MASK]};List.prototype.set=function(index,value){return updateList(this,index,value)};List.prototype.remove=function(index){return!this.has(index)?this:index===0?this.shift():index===this.size-1?this.pop():this.splice(index,1)};List.prototype.clear=function(){if(this.size===0){return this}if(this.__ownerID){this.size=this._origin=this._capacity=0;this._level=SHIFT;this._root=this._tail=null;this.__hash=undefined;this.__altered=true;return this}return emptyList()};List.prototype.push=function(){var values=arguments;var oldSize=this.size;return this.withMutations(function(list){setListBounds(list,0,oldSize+values.length);for(var ii=0;ii<values.length;ii++){list.set(oldSize+ii,values[ii])}})};List.prototype.pop=function(){return setListBounds(this,0,-1)};List.prototype.unshift=function(){var values=arguments;return this.withMutations(function(list){setListBounds(list,-values.length);for(var ii=0;ii<values.length;ii++){list.set(ii,values[ii])}})};List.prototype.shift=function(){return setListBounds(this,1)};List.prototype.merge=function(){return mergeIntoListWith(this,undefined,arguments)};List.prototype.mergeWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoListWith(this,merger,iters)};List.prototype.mergeDeep=function(){return mergeIntoListWith(this,deepMerger(undefined),arguments)};List.prototype.mergeDeepWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoListWith(this,deepMerger(merger),iters)};List.prototype.setSize=function(size){return setListBounds(this,0,size)};List.prototype.slice=function(begin,end){var size=this.size;if(wholeSlice(begin,end,size)){return this}return setListBounds(this,resolveBegin(begin,size),resolveEnd(end,size))};List.prototype.__iterator=function(type,reverse){var index=0;var values=iterateList(this,reverse);return new src_Iterator__Iterator(function(){var value=values();return value===DONE?iteratorDone():iteratorValue(type,index++,value)})};List.prototype.__iterate=function(fn,reverse){var index=0;var values=iterateList(this,reverse);var value;while((value=values())!==DONE){if(fn(value,index++,this)===false){break}}return index};List.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}if(!ownerID){this.__ownerID=ownerID;return this}return makeList(this._origin,this._capacity,this._level,this._root,this._tail,ownerID,this.__hash)};function isList(maybeList){return!!(maybeList&&maybeList[IS_LIST_SENTINEL])}List.isList=isList;var IS_LIST_SENTINEL="@@__IMMUTABLE_LIST__@@";var ListPrototype=List.prototype;ListPrototype[IS_LIST_SENTINEL]=true;ListPrototype[DELETE]=ListPrototype.remove;ListPrototype.setIn=MapPrototype.setIn;ListPrototype.deleteIn=ListPrototype.removeIn=MapPrototype.removeIn;ListPrototype.update=MapPrototype.update;ListPrototype.updateIn=MapPrototype.updateIn;ListPrototype.mergeIn=MapPrototype.mergeIn;ListPrototype.mergeDeepIn=MapPrototype.mergeDeepIn;ListPrototype.withMutations=MapPrototype.withMutations;ListPrototype.asMutable=MapPrototype.asMutable;ListPrototype.asImmutable=MapPrototype.asImmutable;ListPrototype.wasAltered=MapPrototype.wasAltered;function VNode(array,ownerID){this.array=array;this.ownerID=ownerID}VNode.prototype.removeBefore=function(ownerID,level,index){if(index===level?1<<level:0||this.array.length===0){return this}var originIndex=index>>>level&MASK;if(originIndex>=this.array.length){return new VNode([],ownerID)}var removingFirst=originIndex===0;var newChild;if(level>0){var oldChild=this.array[originIndex];newChild=oldChild&&oldChild.removeBefore(ownerID,level-SHIFT,index);if(newChild===oldChild&&removingFirst){return this}}if(removingFirst&&!newChild){return this}var editable=editableVNode(this,ownerID);if(!removingFirst){for(var ii=0;ii<originIndex;ii++){editable.array[ii]=undefined}}if(newChild){editable.array[originIndex]=newChild}return editable};VNode.prototype.removeAfter=function(ownerID,level,index){if(index===level?1<<level:0||this.array.length===0){return this}var sizeIndex=index-1>>>level&MASK;if(sizeIndex>=this.array.length){return this}var removingLast=sizeIndex===this.array.length-1;var newChild;if(level>0){var oldChild=this.array[sizeIndex];newChild=oldChild&&oldChild.removeAfter(ownerID,level-SHIFT,index);if(newChild===oldChild&&removingLast){return this}}if(removingLast&&!newChild){return this}var editable=editableVNode(this,ownerID);if(!removingLast){editable.array.pop()}if(newChild){editable.array[sizeIndex]=newChild}return editable};var DONE={};function iterateList(list,reverse){var left=list._origin;var right=list._capacity;var tailPos=getTailOffset(right);var tail=list._tail;return iterateNodeOrLeaf(list._root,list._level,0);function iterateNodeOrLeaf(node,level,offset){return level===0?iterateLeaf(node,offset):iterateNode(node,level,offset)}function iterateLeaf(node,offset){var array=offset===tailPos?tail&&tail.array:node&&node.array;var from=offset>left?0:left-offset;var to=right-offset;if(to>SIZE){to=SIZE}return function(){if(from===to){return DONE}var idx=reverse?--to:from++;return array&&array[idx]}}function iterateNode(node,level,offset){var values;var array=node&&node.array;var from=offset>left?0:left-offset>>level;var to=(right-offset>>level)+1;if(to>SIZE){to=SIZE}return function(){do{if(values){var value=values();if(value!==DONE){return value}values=null}if(from===to){return DONE}var idx=reverse?--to:from++;values=iterateNodeOrLeaf(array&&array[idx],level-SHIFT,offset+(idx<<level))}while(true)}}}function makeList(origin,capacity,level,root,tail,ownerID,hash){var list=Object.create(ListPrototype);list.size=capacity-origin;list._origin=origin;list._capacity=capacity;list._level=level;list._root=root;list._tail=tail;list.__ownerID=ownerID;list.__hash=hash;list.__altered=false;return list}var EMPTY_LIST;function emptyList(){return EMPTY_LIST||(EMPTY_LIST=makeList(0,0,SHIFT))}function updateList(list,index,value){index=wrapIndex(list,index);if(index>=list.size||index<0){return list.withMutations(function(list){index<0?setListBounds(list,index).set(0,value):setListBounds(list,0,index+1).set(index,value)})}index+=list._origin;var newTail=list._tail;var newRoot=list._root;var didAlter=MakeRef(DID_ALTER);if(index>=getTailOffset(list._capacity)){newTail=updateVNode(newTail,list.__ownerID,0,index,value,didAlter)}else{newRoot=updateVNode(newRoot,list.__ownerID,list._level,index,value,didAlter)}if(!didAlter.value){return list}if(list.__ownerID){list._root=newRoot;list._tail=newTail;list.__hash=undefined;list.__altered=true;return list}return makeList(list._origin,list._capacity,list._level,newRoot,newTail)}function updateVNode(node,ownerID,level,index,value,didAlter){var idx=index>>>level&MASK;var nodeHas=node&&idx<node.array.length;if(!nodeHas&&value===undefined){return node}var newNode;if(level>0){var lowerNode=node&&node.array[idx];var newLowerNode=updateVNode(lowerNode,ownerID,level-SHIFT,index,value,didAlter);if(newLowerNode===lowerNode){return node}newNode=editableVNode(node,ownerID);newNode.array[idx]=newLowerNode;return newNode}if(nodeHas&&node.array[idx]===value){return node}SetRef(didAlter);newNode=editableVNode(node,ownerID);if(value===undefined&&idx===newNode.array.length-1){newNode.array.pop()}else{newNode.array[idx]=value}return newNode}function editableVNode(node,ownerID){if(ownerID&&node&&ownerID===node.ownerID){return node}return new VNode(node?node.array.slice():[],ownerID)}function listNodeFor(list,rawIndex){if(rawIndex>=getTailOffset(list._capacity)){return list._tail}if(rawIndex<1<<list._level+SHIFT){var node=list._root;var level=list._level;while(node&&level>0){node=node.array[rawIndex>>>level&MASK];level-=SHIFT}return node}}function setListBounds(list,begin,end){var owner=list.__ownerID||new OwnerID;var oldOrigin=list._origin;var oldCapacity=list._capacity;var newOrigin=oldOrigin+begin;var newCapacity=end===undefined?oldCapacity:end<0?oldCapacity+end:oldOrigin+end;if(newOrigin===oldOrigin&&newCapacity===oldCapacity){return list}if(newOrigin>=newCapacity){return list.clear()}var newLevel=list._level;var newRoot=list._root;var offsetShift=0;while(newOrigin+offsetShift<0){newRoot=new VNode(newRoot&&newRoot.array.length?[undefined,newRoot]:[],owner);newLevel+=SHIFT;offsetShift+=1<<newLevel}if(offsetShift){newOrigin+=offsetShift;oldOrigin+=offsetShift;newCapacity+=offsetShift;oldCapacity+=offsetShift}var oldTailOffset=getTailOffset(oldCapacity);var newTailOffset=getTailOffset(newCapacity);while(newTailOffset>=1<<newLevel+SHIFT){newRoot=new VNode(newRoot&&newRoot.array.length?[newRoot]:[],owner);newLevel+=SHIFT}var oldTail=list._tail;var newTail=newTailOffset<oldTailOffset?listNodeFor(list,newCapacity-1):newTailOffset>oldTailOffset?new VNode([],owner):oldTail;if(oldTail&&newTailOffset>oldTailOffset&&newOrigin<oldCapacity&&oldTail.array.length){newRoot=editableVNode(newRoot,owner);var node=newRoot;for(var level=newLevel;level>SHIFT;level-=SHIFT){var idx=oldTailOffset>>>level&MASK;node=node.array[idx]=editableVNode(node.array[idx],owner)}node.array[oldTailOffset>>>SHIFT&MASK]=oldTail}if(newCapacity<oldCapacity){newTail=newTail&&newTail.removeAfter(owner,0,newCapacity)}if(newOrigin>=newTailOffset){newOrigin-=newTailOffset;newCapacity-=newTailOffset;newLevel=SHIFT;newRoot=null;newTail=newTail&&newTail.removeBefore(owner,0,newOrigin)}else if(newOrigin>oldOrigin||newTailOffset<oldTailOffset){offsetShift=0;while(newRoot){var beginIndex=newOrigin>>>newLevel&MASK;if(beginIndex!==newTailOffset>>>newLevel&MASK){break}if(beginIndex){offsetShift+=(1<<newLevel)*beginIndex}newLevel-=SHIFT;newRoot=newRoot.array[beginIndex]}if(newRoot&&newOrigin>oldOrigin){newRoot=newRoot.removeBefore(owner,newLevel,newOrigin-offsetShift)}if(newRoot&&newTailOffset<oldTailOffset){newRoot=newRoot.removeAfter(owner,newLevel,newTailOffset-offsetShift)}if(offsetShift){newOrigin-=offsetShift;newCapacity-=offsetShift}}if(list.__ownerID){list.size=newCapacity-newOrigin;list._origin=newOrigin;list._capacity=newCapacity;list._level=newLevel;list._root=newRoot;list._tail=newTail;list.__hash=undefined;list.__altered=true;return list}return makeList(newOrigin,newCapacity,newLevel,newRoot,newTail)}function mergeIntoListWith(list,merger,iterables){var iters=[];var maxSize=0;for(var ii=0;ii<iterables.length;ii++){var value=iterables[ii];var iter=IndexedIterable(value);if(iter.size>maxSize){maxSize=iter.size}if(!isIterable(value)){iter=iter.map(function(v){return fromJS(v)})}iters.push(iter)}if(maxSize>list.size){list=list.setSize(maxSize)}return mergeIntoCollectionWith(list,merger,iters)}function getTailOffset(size){return size<SIZE?0:size-1>>>SHIFT<<SHIFT;
}createClass(OrderedMap,src_Map__Map);function OrderedMap(value){return value===null||value===undefined?emptyOrderedMap():isOrderedMap(value)?value:emptyOrderedMap().withMutations(function(map){var iter=KeyedIterable(value);assertNotInfinite(iter.size);iter.forEach(function(v,k){return map.set(k,v)})})}OrderedMap.of=function(){return this(arguments)};OrderedMap.prototype.toString=function(){return this.__toString("OrderedMap {","}")};OrderedMap.prototype.get=function(k,notSetValue){var index=this._map.get(k);return index!==undefined?this._list.get(index)[1]:notSetValue};OrderedMap.prototype.clear=function(){if(this.size===0){return this}if(this.__ownerID){this.size=0;this._map.clear();this._list.clear();return this}return emptyOrderedMap()};OrderedMap.prototype.set=function(k,v){return updateOrderedMap(this,k,v)};OrderedMap.prototype.remove=function(k){return updateOrderedMap(this,k,NOT_SET)};OrderedMap.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()};OrderedMap.prototype.__iterate=function(fn,reverse){var this$0=this;return this._list.__iterate(function(entry){return entry&&fn(entry[1],entry[0],this$0)},reverse)};OrderedMap.prototype.__iterator=function(type,reverse){return this._list.fromEntrySeq().__iterator(type,reverse)};OrderedMap.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}var newMap=this._map.__ensureOwner(ownerID);var newList=this._list.__ensureOwner(ownerID);if(!ownerID){this.__ownerID=ownerID;this._map=newMap;this._list=newList;return this}return makeOrderedMap(newMap,newList,ownerID,this.__hash)};function isOrderedMap(maybeOrderedMap){return isMap(maybeOrderedMap)&&isOrdered(maybeOrderedMap)}OrderedMap.isOrderedMap=isOrderedMap;OrderedMap.prototype[IS_ORDERED_SENTINEL]=true;OrderedMap.prototype[DELETE]=OrderedMap.prototype.remove;function makeOrderedMap(map,list,ownerID,hash){var omap=Object.create(OrderedMap.prototype);omap.size=map?map.size:0;omap._map=map;omap._list=list;omap.__ownerID=ownerID;omap.__hash=hash;return omap}var EMPTY_ORDERED_MAP;function emptyOrderedMap(){return EMPTY_ORDERED_MAP||(EMPTY_ORDERED_MAP=makeOrderedMap(emptyMap(),emptyList()))}function updateOrderedMap(omap,k,v){var map=omap._map;var list=omap._list;var i=map.get(k);var has=i!==undefined;var newMap;var newList;if(v===NOT_SET){if(!has){return omap}if(list.size>=SIZE&&list.size>=map.size*2){newList=list.filter(function(entry,idx){return entry!==undefined&&i!==idx});newMap=newList.toKeyedSeq().map(function(entry){return entry[0]}).flip().toMap();if(omap.__ownerID){newMap.__ownerID=newList.__ownerID=omap.__ownerID}}else{newMap=map.remove(k);newList=i===list.size-1?list.pop():list.set(i,undefined)}}else{if(has){if(v===list.get(i)[1]){return omap}newMap=map;newList=list.set(i,[k,v])}else{newMap=map.set(k,list.size);newList=list.set(list.size,[k,v])}}if(omap.__ownerID){omap.size=newMap.size;omap._map=newMap;omap._list=newList;omap.__hash=undefined;return omap}return makeOrderedMap(newMap,newList)}createClass(Stack,IndexedCollection);function Stack(value){return value===null||value===undefined?emptyStack():isStack(value)?value:emptyStack().unshiftAll(value)}Stack.of=function(){return this(arguments)};Stack.prototype.toString=function(){return this.__toString("Stack [","]")};Stack.prototype.get=function(index,notSetValue){var head=this._head;index=wrapIndex(this,index);while(head&&index--){head=head.next}return head?head.value:notSetValue};Stack.prototype.peek=function(){return this._head&&this._head.value};Stack.prototype.push=function(){if(arguments.length===0){return this}var newSize=this.size+arguments.length;var head=this._head;for(var ii=arguments.length-1;ii>=0;ii--){head={value:arguments[ii],next:head}}if(this.__ownerID){this.size=newSize;this._head=head;this.__hash=undefined;this.__altered=true;return this}return makeStack(newSize,head)};Stack.prototype.pushAll=function(iter){iter=IndexedIterable(iter);if(iter.size===0){return this}assertNotInfinite(iter.size);var newSize=this.size;var head=this._head;iter.reverse().forEach(function(value){newSize++;head={value:value,next:head}});if(this.__ownerID){this.size=newSize;this._head=head;this.__hash=undefined;this.__altered=true;return this}return makeStack(newSize,head)};Stack.prototype.pop=function(){return this.slice(1)};Stack.prototype.unshift=function(){return this.push.apply(this,arguments)};Stack.prototype.unshiftAll=function(iter){return this.pushAll(iter)};Stack.prototype.shift=function(){return this.pop.apply(this,arguments)};Stack.prototype.clear=function(){if(this.size===0){return this}if(this.__ownerID){this.size=0;this._head=undefined;this.__hash=undefined;this.__altered=true;return this}return emptyStack()};Stack.prototype.slice=function(begin,end){if(wholeSlice(begin,end,this.size)){return this}var resolvedBegin=resolveBegin(begin,this.size);var resolvedEnd=resolveEnd(end,this.size);if(resolvedEnd!==this.size){return IndexedCollection.prototype.slice.call(this,begin,end)}var newSize=this.size-resolvedBegin;var head=this._head;while(resolvedBegin--){head=head.next}if(this.__ownerID){this.size=newSize;this._head=head;this.__hash=undefined;this.__altered=true;return this}return makeStack(newSize,head)};Stack.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}if(!ownerID){this.__ownerID=ownerID;this.__altered=false;return this}return makeStack(this.size,this._head,ownerID,this.__hash)};Stack.prototype.__iterate=function(fn,reverse){if(reverse){return this.reverse().__iterate(fn)}var iterations=0;var node=this._head;while(node){if(fn(node.value,iterations++,this)===false){break}node=node.next}return iterations};Stack.prototype.__iterator=function(type,reverse){if(reverse){return this.reverse().__iterator(type)}var iterations=0;var node=this._head;return new src_Iterator__Iterator(function(){if(node){var value=node.value;node=node.next;return iteratorValue(type,iterations++,value)}return iteratorDone()})};function isStack(maybeStack){return!!(maybeStack&&maybeStack[IS_STACK_SENTINEL])}Stack.isStack=isStack;var IS_STACK_SENTINEL="@@__IMMUTABLE_STACK__@@";var StackPrototype=Stack.prototype;StackPrototype[IS_STACK_SENTINEL]=true;StackPrototype.withMutations=MapPrototype.withMutations;StackPrototype.asMutable=MapPrototype.asMutable;StackPrototype.asImmutable=MapPrototype.asImmutable;StackPrototype.wasAltered=MapPrototype.wasAltered;function makeStack(size,head,ownerID,hash){var map=Object.create(StackPrototype);map.size=size;map._head=head;map.__ownerID=ownerID;map.__hash=hash;map.__altered=false;return map}var EMPTY_STACK;function emptyStack(){return EMPTY_STACK||(EMPTY_STACK=makeStack(0))}createClass(src_Set__Set,SetCollection);function src_Set__Set(value){return value===null||value===undefined?emptySet():isSet(value)?value:emptySet().withMutations(function(set){var iter=SetIterable(value);assertNotInfinite(iter.size);iter.forEach(function(v){return set.add(v)})})}src_Set__Set.of=function(){return this(arguments)};src_Set__Set.fromKeys=function(value){return this(KeyedIterable(value).keySeq())};src_Set__Set.prototype.toString=function(){return this.__toString("Set {","}")};src_Set__Set.prototype.has=function(value){return this._map.has(value)};src_Set__Set.prototype.add=function(value){return updateSet(this,this._map.set(value,true))};src_Set__Set.prototype.remove=function(value){return updateSet(this,this._map.remove(value))};src_Set__Set.prototype.clear=function(){return updateSet(this,this._map.clear())};src_Set__Set.prototype.union=function(){var iters=SLICE$0.call(arguments,0);iters=iters.filter(function(x){return x.size!==0});if(iters.length===0){return this}if(this.size===0&&!this.__ownerID&&iters.length===1){return this.constructor(iters[0])}return this.withMutations(function(set){for(var ii=0;ii<iters.length;ii++){SetIterable(iters[ii]).forEach(function(value){return set.add(value)})}})};src_Set__Set.prototype.intersect=function(){var iters=SLICE$0.call(arguments,0);if(iters.length===0){return this}iters=iters.map(function(iter){return SetIterable(iter)});var originalSet=this;return this.withMutations(function(set){originalSet.forEach(function(value){if(!iters.every(function(iter){return iter.includes(value)})){set.remove(value)}})})};src_Set__Set.prototype.subtract=function(){var iters=SLICE$0.call(arguments,0);if(iters.length===0){return this}iters=iters.map(function(iter){return SetIterable(iter)});var originalSet=this;return this.withMutations(function(set){originalSet.forEach(function(value){if(iters.some(function(iter){return iter.includes(value)})){set.remove(value)}})})};src_Set__Set.prototype.merge=function(){return this.union.apply(this,arguments)};src_Set__Set.prototype.mergeWith=function(merger){var iters=SLICE$0.call(arguments,1);return this.union.apply(this,iters)};src_Set__Set.prototype.sort=function(comparator){return OrderedSet(sortFactory(this,comparator))};src_Set__Set.prototype.sortBy=function(mapper,comparator){return OrderedSet(sortFactory(this,comparator,mapper))};src_Set__Set.prototype.wasAltered=function(){return this._map.wasAltered()};src_Set__Set.prototype.__iterate=function(fn,reverse){var this$0=this;return this._map.__iterate(function(_,k){return fn(k,k,this$0)},reverse)};src_Set__Set.prototype.__iterator=function(type,reverse){return this._map.map(function(_,k){return k}).__iterator(type,reverse)};src_Set__Set.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}var newMap=this._map.__ensureOwner(ownerID);if(!ownerID){this.__ownerID=ownerID;this._map=newMap;return this}return this.__make(newMap,ownerID)};function isSet(maybeSet){return!!(maybeSet&&maybeSet[IS_SET_SENTINEL])}src_Set__Set.isSet=isSet;var IS_SET_SENTINEL="@@__IMMUTABLE_SET__@@";var SetPrototype=src_Set__Set.prototype;SetPrototype[IS_SET_SENTINEL]=true;SetPrototype[DELETE]=SetPrototype.remove;SetPrototype.mergeDeep=SetPrototype.merge;SetPrototype.mergeDeepWith=SetPrototype.mergeWith;SetPrototype.withMutations=MapPrototype.withMutations;SetPrototype.asMutable=MapPrototype.asMutable;SetPrototype.asImmutable=MapPrototype.asImmutable;SetPrototype.__empty=emptySet;SetPrototype.__make=makeSet;function updateSet(set,newMap){if(set.__ownerID){set.size=newMap.size;set._map=newMap;return set}return newMap===set._map?set:newMap.size===0?set.__empty():set.__make(newMap)}function makeSet(map,ownerID){var set=Object.create(SetPrototype);set.size=map?map.size:0;set._map=map;set.__ownerID=ownerID;return set}var EMPTY_SET;function emptySet(){return EMPTY_SET||(EMPTY_SET=makeSet(emptyMap()))}createClass(OrderedSet,src_Set__Set);function OrderedSet(value){return value===null||value===undefined?emptyOrderedSet():isOrderedSet(value)?value:emptyOrderedSet().withMutations(function(set){var iter=SetIterable(value);assertNotInfinite(iter.size);iter.forEach(function(v){return set.add(v)})})}OrderedSet.of=function(){return this(arguments)};OrderedSet.fromKeys=function(value){return this(KeyedIterable(value).keySeq())};OrderedSet.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function isOrderedSet(maybeOrderedSet){return isSet(maybeOrderedSet)&&isOrdered(maybeOrderedSet)}OrderedSet.isOrderedSet=isOrderedSet;var OrderedSetPrototype=OrderedSet.prototype;OrderedSetPrototype[IS_ORDERED_SENTINEL]=true;OrderedSetPrototype.__empty=emptyOrderedSet;OrderedSetPrototype.__make=makeOrderedSet;function makeOrderedSet(map,ownerID){var set=Object.create(OrderedSetPrototype);set.size=map?map.size:0;set._map=map;set.__ownerID=ownerID;return set}var EMPTY_ORDERED_SET;function emptyOrderedSet(){return EMPTY_ORDERED_SET||(EMPTY_ORDERED_SET=makeOrderedSet(emptyOrderedMap()))}createClass(Record,KeyedCollection);function Record(defaultValues,name){var hasInitialized;var RecordType=function Record(values){if(values instanceof RecordType){return values}if(!(this instanceof RecordType)){return new RecordType(values)}if(!hasInitialized){hasInitialized=true;var keys=Object.keys(defaultValues);setProps(RecordTypePrototype,keys);RecordTypePrototype.size=keys.length;RecordTypePrototype._name=name;RecordTypePrototype._keys=keys;RecordTypePrototype._defaultValues=defaultValues}this._map=src_Map__Map(values)};var RecordTypePrototype=RecordType.prototype=Object.create(RecordPrototype);RecordTypePrototype.constructor=RecordType;return RecordType}Record.prototype.toString=function(){return this.__toString(recordName(this)+" {","}")};Record.prototype.has=function(k){return this._defaultValues.hasOwnProperty(k)};Record.prototype.get=function(k,notSetValue){if(!this.has(k)){return notSetValue}var defaultVal=this._defaultValues[k];return this._map?this._map.get(k,defaultVal):defaultVal};Record.prototype.clear=function(){if(this.__ownerID){this._map&&this._map.clear();return this}var RecordType=this.constructor;return RecordType._empty||(RecordType._empty=makeRecord(this,emptyMap()))};Record.prototype.set=function(k,v){if(!this.has(k)){throw new Error('Cannot set unknown key "'+k+'" on '+recordName(this))}var newMap=this._map&&this._map.set(k,v);if(this.__ownerID||newMap===this._map){return this}return makeRecord(this,newMap)};Record.prototype.remove=function(k){if(!this.has(k)){return this}var newMap=this._map&&this._map.remove(k);if(this.__ownerID||newMap===this._map){return this}return makeRecord(this,newMap)};Record.prototype.wasAltered=function(){return this._map.wasAltered()};Record.prototype.__iterator=function(type,reverse){var this$0=this;return KeyedIterable(this._defaultValues).map(function(_,k){return this$0.get(k)}).__iterator(type,reverse)};Record.prototype.__iterate=function(fn,reverse){var this$0=this;return KeyedIterable(this._defaultValues).map(function(_,k){return this$0.get(k)}).__iterate(fn,reverse)};Record.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}var newMap=this._map&&this._map.__ensureOwner(ownerID);if(!ownerID){this.__ownerID=ownerID;this._map=newMap;return this}return makeRecord(this,newMap,ownerID)};var RecordPrototype=Record.prototype;RecordPrototype[DELETE]=RecordPrototype.remove;RecordPrototype.deleteIn=RecordPrototype.removeIn=MapPrototype.removeIn;RecordPrototype.merge=MapPrototype.merge;RecordPrototype.mergeWith=MapPrototype.mergeWith;RecordPrototype.mergeIn=MapPrototype.mergeIn;RecordPrototype.mergeDeep=MapPrototype.mergeDeep;RecordPrototype.mergeDeepWith=MapPrototype.mergeDeepWith;RecordPrototype.mergeDeepIn=MapPrototype.mergeDeepIn;RecordPrototype.setIn=MapPrototype.setIn;RecordPrototype.update=MapPrototype.update;RecordPrototype.updateIn=MapPrototype.updateIn;RecordPrototype.withMutations=MapPrototype.withMutations;RecordPrototype.asMutable=MapPrototype.asMutable;RecordPrototype.asImmutable=MapPrototype.asImmutable;function makeRecord(likeRecord,map,ownerID){var record=Object.create(Object.getPrototypeOf(likeRecord));record._map=map;record.__ownerID=ownerID;return record}function recordName(record){return record._name||record.constructor.name||"Record"}function setProps(prototype,names){try{names.forEach(setProp.bind(undefined,prototype))}catch(error){}}function setProp(prototype,name){Object.defineProperty(prototype,name,{get:function(){return this.get(name)},set:function(value){invariant(this.__ownerID,"Cannot set on an immutable record.");this.set(name,value)}})}function deepEqual(a,b){if(a===b){return true}if(!isIterable(b)||a.size!==undefined&&b.size!==undefined&&a.size!==b.size||a.__hash!==undefined&&b.__hash!==undefined&&a.__hash!==b.__hash||isKeyed(a)!==isKeyed(b)||isIndexed(a)!==isIndexed(b)||isOrdered(a)!==isOrdered(b)){return false}if(a.size===0&&b.size===0){return true}var notAssociative=!isAssociative(a);if(isOrdered(a)){var entries=a.entries();return b.every(function(v,k){var entry=entries.next().value;return entry&&is(entry[1],v)&&(notAssociative||is(entry[0],k))})&&entries.next().done}var flipped=false;if(a.size===undefined){if(b.size===undefined){if(typeof a.cacheResult==="function"){a.cacheResult()}}else{flipped=true;var _=a;a=b;b=_}}var allEqual=true;var bSize=b.__iterate(function(v,k){if(notAssociative?!a.has(v):flipped?!is(v,a.get(k,NOT_SET)):!is(a.get(k,NOT_SET),v)){allEqual=false;return false}});return allEqual&&a.size===bSize}createClass(Range,IndexedSeq);function Range(start,end,step){if(!(this instanceof Range)){return new Range(start,end,step)}invariant(step!==0,"Cannot step a Range by 0");start=start||0;if(end===undefined){end=Infinity}step=step===undefined?1:Math.abs(step);if(end<start){step=-step}this._start=start;this._end=end;this._step=step;this.size=Math.max(0,Math.ceil((end-start)/step-1)+1);if(this.size===0){if(EMPTY_RANGE){return EMPTY_RANGE}EMPTY_RANGE=this}}Range.prototype.toString=function(){if(this.size===0){return"Range []"}return"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"};Range.prototype.get=function(index,notSetValue){return this.has(index)?this._start+wrapIndex(this,index)*this._step:notSetValue};Range.prototype.includes=function(searchValue){var possibleIndex=(searchValue-this._start)/this._step;return possibleIndex>=0&&possibleIndex<this.size&&possibleIndex===Math.floor(possibleIndex)};Range.prototype.slice=function(begin,end){if(wholeSlice(begin,end,this.size)){return this}begin=resolveBegin(begin,this.size);end=resolveEnd(end,this.size);if(end<=begin){return new Range(0,0)}return new Range(this.get(begin,this._end),this.get(end,this._end),this._step)};Range.prototype.indexOf=function(searchValue){var offsetValue=searchValue-this._start;if(offsetValue%this._step===0){var index=offsetValue/this._step;if(index>=0&&index<this.size){return index}}return-1};Range.prototype.lastIndexOf=function(searchValue){return this.indexOf(searchValue)};Range.prototype.__iterate=function(fn,reverse){var maxIndex=this.size-1;var step=this._step;var value=reverse?this._start+maxIndex*step:this._start;for(var ii=0;ii<=maxIndex;ii++){if(fn(value,ii,this)===false){return ii+1}value+=reverse?-step:step}return ii};Range.prototype.__iterator=function(type,reverse){var maxIndex=this.size-1;var step=this._step;var value=reverse?this._start+maxIndex*step:this._start;var ii=0;return new src_Iterator__Iterator(function(){var v=value;value+=reverse?-step:step;return ii>maxIndex?iteratorDone():iteratorValue(type,ii++,v)})};Range.prototype.equals=function(other){return other instanceof Range?this._start===other._start&&this._end===other._end&&this._step===other._step:deepEqual(this,other)};var EMPTY_RANGE;createClass(Repeat,IndexedSeq);function Repeat(value,times){if(!(this instanceof Repeat)){return new Repeat(value,times)}this._value=value;this.size=times===undefined?Infinity:Math.max(0,times);if(this.size===0){if(EMPTY_REPEAT){return EMPTY_REPEAT}EMPTY_REPEAT=this}}Repeat.prototype.toString=function(){if(this.size===0){return"Repeat []"}return"Repeat [ "+this._value+" "+this.size+" times ]"};Repeat.prototype.get=function(index,notSetValue){return this.has(index)?this._value:notSetValue};Repeat.prototype.includes=function(searchValue){return is(this._value,searchValue)};Repeat.prototype.slice=function(begin,end){var size=this.size;return wholeSlice(begin,end,size)?this:new Repeat(this._value,resolveEnd(end,size)-resolveBegin(begin,size))};Repeat.prototype.reverse=function(){return this};Repeat.prototype.indexOf=function(searchValue){if(is(this._value,searchValue)){return 0}return-1};Repeat.prototype.lastIndexOf=function(searchValue){if(is(this._value,searchValue)){return this.size}return-1};Repeat.prototype.__iterate=function(fn,reverse){for(var ii=0;ii<this.size;ii++){if(fn(this._value,ii,this)===false){return ii+1}}return ii};Repeat.prototype.__iterator=function(type,reverse){var this$0=this;var ii=0;return new src_Iterator__Iterator(function(){return ii<this$0.size?iteratorValue(type,ii++,this$0._value):iteratorDone()})};Repeat.prototype.equals=function(other){return other instanceof Repeat?is(this._value,other._value):deepEqual(other)};var EMPTY_REPEAT;function mixin(ctor,methods){var keyCopier=function(key){ctor.prototype[key]=methods[key]};Object.keys(methods).forEach(keyCopier);Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(methods).forEach(keyCopier);return ctor}Iterable.Iterator=src_Iterator__Iterator;mixin(Iterable,{toArray:function(){assertNotInfinite(this.size);var array=new Array(this.size||0);this.valueSeq().__iterate(function(v,i){array[i]=v});return array},toIndexedSeq:function(){return new ToIndexedSequence(this)},toJS:function(){return this.toSeq().map(function(value){return value&&typeof value.toJS==="function"?value.toJS():value}).__toJS()},toJSON:function(){return this.toSeq().map(function(value){return value&&typeof value.toJSON==="function"?value.toJSON():value}).__toJS()},toKeyedSeq:function(){return new ToKeyedSequence(this,true)},toMap:function(){return src_Map__Map(this.toKeyedSeq())},toObject:function(){assertNotInfinite(this.size);var object={};this.__iterate(function(v,k){object[k]=v});return object},toOrderedMap:function(){return OrderedMap(this.toKeyedSeq())},toOrderedSet:function(){return OrderedSet(isKeyed(this)?this.valueSeq():this)},toSet:function(){return src_Set__Set(isKeyed(this)?this.valueSeq():this)},toSetSeq:function(){return new ToSetSequence(this)},toSeq:function(){return isIndexed(this)?this.toIndexedSeq():isKeyed(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Stack(isKeyed(this)?this.valueSeq():this)},toList:function(){return List(isKeyed(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(head,tail){if(this.size===0){return head+tail}return head+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+tail},concat:function(){var values=SLICE$0.call(arguments,0);return reify(this,concatFactory(this,values))},contains:function(searchValue){return this.includes(searchValue)},includes:function(searchValue){return this.some(function(value){return is(value,searchValue)})},entries:function(){return this.__iterator(ITERATE_ENTRIES)},every:function(predicate,context){assertNotInfinite(this.size);var returnValue=true;this.__iterate(function(v,k,c){if(!predicate.call(context,v,k,c)){returnValue=false;return false}});return returnValue},filter:function(predicate,context){return reify(this,filterFactory(this,predicate,context,true))},find:function(predicate,context,notSetValue){var entry=this.findEntry(predicate,context);return entry?entry[1]:notSetValue},findEntry:function(predicate,context){var found;this.__iterate(function(v,k,c){if(predicate.call(context,v,k,c)){found=[k,v];return false}});return found},findLastEntry:function(predicate,context){return this.toSeq().reverse().findEntry(predicate,context)},forEach:function(sideEffect,context){assertNotInfinite(this.size);return this.__iterate(context?sideEffect.bind(context):sideEffect)},join:function(separator){assertNotInfinite(this.size);separator=separator!==undefined?""+separator:",";var joined="";var isFirst=true;this.__iterate(function(v){isFirst?isFirst=false:joined+=separator;joined+=v!==null&&v!==undefined?v.toString():""});return joined},keys:function(){return this.__iterator(ITERATE_KEYS)},map:function(mapper,context){return reify(this,mapFactory(this,mapper,context))},reduce:function(reducer,initialReduction,context){assertNotInfinite(this.size);var reduction;var useFirst;if(arguments.length<2){useFirst=true}else{reduction=initialReduction}this.__iterate(function(v,k,c){if(useFirst){useFirst=false;reduction=v}else{reduction=reducer.call(context,reduction,v,k,c)}});return reduction},reduceRight:function(reducer,initialReduction,context){var reversed=this.toKeyedSeq().reverse();return reversed.reduce.apply(reversed,arguments)},reverse:function(){return reify(this,reverseFactory(this,true))},slice:function(begin,end){return reify(this,sliceFactory(this,begin,end,true))},some:function(predicate,context){return!this.every(not(predicate),context)},sort:function(comparator){return reify(this,sortFactory(this,comparator))},values:function(){return this.__iterator(ITERATE_VALUES)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==undefined?this.size===0:!this.some(function(){return true})},count:function(predicate,context){return ensureSize(predicate?this.toSeq().filter(predicate,context):this)},countBy:function(grouper,context){return countByFactory(this,grouper,context)},equals:function(other){return deepEqual(this,other)},entrySeq:function(){var iterable=this;if(iterable._cache){return new ArraySeq(iterable._cache)}var entriesSequence=iterable.toSeq().map(entryMapper).toIndexedSeq();entriesSequence.fromEntrySeq=function(){return iterable.toSeq()};return entriesSequence},filterNot:function(predicate,context){return this.filter(not(predicate),context)},findLast:function(predicate,context,notSetValue){return this.toKeyedSeq().reverse().find(predicate,context,notSetValue)},first:function(){return this.find(returnTrue)},flatMap:function(mapper,context){return reify(this,flatMapFactory(this,mapper,context))},flatten:function(depth){return reify(this,flattenFactory(this,depth,true))},fromEntrySeq:function(){return new FromEntriesSequence(this)},get:function(searchKey,notSetValue){return this.find(function(_,key){return is(key,searchKey)},undefined,notSetValue)},getIn:function(searchKeyPath,notSetValue){var nested=this;var iter=forceIterator(searchKeyPath);var step;while(!(step=iter.next()).done){var key=step.value;nested=nested&&nested.get?nested.get(key,NOT_SET):NOT_SET;if(nested===NOT_SET){return notSetValue}}return nested},groupBy:function(grouper,context){return groupByFactory(this,grouper,context)},has:function(searchKey){return this.get(searchKey,NOT_SET)!==NOT_SET},hasIn:function(searchKeyPath){return this.getIn(searchKeyPath,NOT_SET)!==NOT_SET},isSubset:function(iter){iter=typeof iter.includes==="function"?iter:Iterable(iter);return this.every(function(value){return iter.includes(value)})},isSuperset:function(iter){return iter.isSubset(this)},keySeq:function(){return this.toSeq().map(keyMapper).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(comparator){return maxFactory(this,comparator)},maxBy:function(mapper,comparator){return maxFactory(this,comparator,mapper)},min:function(comparator){return maxFactory(this,comparator?neg(comparator):defaultNegComparator)},minBy:function(mapper,comparator){return maxFactory(this,comparator?neg(comparator):defaultNegComparator,mapper)},rest:function(){return this.slice(1)},skip:function(amount){return this.slice(Math.max(0,amount))},skipLast:function(amount){return reify(this,this.toSeq().reverse().skip(amount).reverse())},skipWhile:function(predicate,context){return reify(this,skipWhileFactory(this,predicate,context,true))},skipUntil:function(predicate,context){return this.skipWhile(not(predicate),context)},sortBy:function(mapper,comparator){return reify(this,sortFactory(this,comparator,mapper))},take:function(amount){return this.slice(0,Math.max(0,amount))},takeLast:function(amount){return reify(this,this.toSeq().reverse().take(amount).reverse())},takeWhile:function(predicate,context){return reify(this,takeWhileFactory(this,predicate,context))},takeUntil:function(predicate,context){return this.takeWhile(not(predicate),context)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=hashIterable(this))}});var IterablePrototype=Iterable.prototype;IterablePrototype[IS_ITERABLE_SENTINEL]=true;IterablePrototype[ITERATOR_SYMBOL]=IterablePrototype.values;IterablePrototype.__toJS=IterablePrototype.toArray;IterablePrototype.__toStringMapper=quoteString;IterablePrototype.inspect=IterablePrototype.toSource=function(){return this.toString()};IterablePrototype.chain=IterablePrototype.flatMap;(function(){try{Object.defineProperty(IterablePrototype,"length",{get:function(){if(!Iterable.noLengthWarning){var stack;try{throw new Error}catch(error){stack=error.stack}if(stack.indexOf("_wrapObject")===-1){console&&console.warn&&console.warn("iterable.length has been deprecated, "+"use iterable.size or iterable.count(). "+"This warning will become a silent error in a future version. "+stack);return this.size}}}})}catch(e){}})();mixin(KeyedIterable,{flip:function(){return reify(this,flipFactory(this))},findKey:function(predicate,context){var entry=this.findEntry(predicate,context);return entry&&entry[0]},findLastKey:function(predicate,context){return this.toSeq().reverse().findKey(predicate,context)},keyOf:function(searchValue){return this.findKey(function(value){return is(value,searchValue)})},lastKeyOf:function(searchValue){return this.findLastKey(function(value){return is(value,searchValue)})},mapEntries:function(mapper,context){var this$0=this;var iterations=0;return reify(this,this.toSeq().map(function(v,k){return mapper.call(context,[k,v],iterations++,this$0)}).fromEntrySeq())},mapKeys:function(mapper,context){var this$0=this;return reify(this,this.toSeq().flip().map(function(k,v){return mapper.call(context,k,v,this$0)}).flip())}});var KeyedIterablePrototype=KeyedIterable.prototype;KeyedIterablePrototype[IS_KEYED_SENTINEL]=true;KeyedIterablePrototype[ITERATOR_SYMBOL]=IterablePrototype.entries;KeyedIterablePrototype.__toJS=IterablePrototype.toObject;KeyedIterablePrototype.__toStringMapper=function(v,k){return JSON.stringify(k)+": "+quoteString(v)};mixin(IndexedIterable,{toKeyedSeq:function(){return new ToKeyedSequence(this,false)},filter:function(predicate,context){return reify(this,filterFactory(this,predicate,context,false))},findIndex:function(predicate,context){var entry=this.findEntry(predicate,context);return entry?entry[0]:-1},indexOf:function(searchValue){var key=this.toKeyedSeq().keyOf(searchValue);return key===undefined?-1:key},lastIndexOf:function(searchValue){return this.toSeq().reverse().indexOf(searchValue)},reverse:function(){return reify(this,reverseFactory(this,false))},slice:function(begin,end){return reify(this,sliceFactory(this,begin,end,false))},splice:function(index,removeNum){var numArgs=arguments.length;removeNum=Math.max(removeNum|0,0);if(numArgs===0||numArgs===2&&!removeNum){return this}index=resolveBegin(index,this.size);var spliced=this.slice(0,index);return reify(this,numArgs===1?spliced:spliced.concat(arrCopy(arguments,2),this.slice(index+removeNum)))},findLastIndex:function(predicate,context){var key=this.toKeyedSeq().findLastKey(predicate,context);return key===undefined?-1:key},first:function(){return this.get(0)},flatten:function(depth){return reify(this,flattenFactory(this,depth,false))},get:function(index,notSetValue){index=wrapIndex(this,index);return index<0||(this.size===Infinity||this.size!==undefined&&index>this.size)?notSetValue:this.find(function(_,key){return key===index},undefined,notSetValue)},has:function(index){index=wrapIndex(this,index);return index>=0&&(this.size!==undefined?this.size===Infinity||index<this.size:this.indexOf(index)!==-1)},interpose:function(separator){return reify(this,interposeFactory(this,separator))},interleave:function(){var iterables=[this].concat(arrCopy(arguments));var zipped=zipWithFactory(this.toSeq(),IndexedSeq.of,iterables);var interleaved=zipped.flatten(true);if(zipped.size){interleaved.size=zipped.size*iterables.length}return reify(this,interleaved)},last:function(){return this.get(-1)},skipWhile:function(predicate,context){return reify(this,skipWhileFactory(this,predicate,context,false))},zip:function(){var iterables=[this].concat(arrCopy(arguments));return reify(this,zipWithFactory(this,defaultZipper,iterables))},zipWith:function(zipper){var iterables=arrCopy(arguments);iterables[0]=this;return reify(this,zipWithFactory(this,zipper,iterables))}});IndexedIterable.prototype[IS_INDEXED_SENTINEL]=true;IndexedIterable.prototype[IS_ORDERED_SENTINEL]=true;mixin(SetIterable,{get:function(value,notSetValue){return this.has(value)?value:notSetValue},includes:function(value){return this.has(value)},keySeq:function(){return this.valueSeq()}});SetIterable.prototype.has=IterablePrototype.includes;mixin(KeyedSeq,KeyedIterable.prototype);mixin(IndexedSeq,IndexedIterable.prototype);
mixin(SetSeq,SetIterable.prototype);mixin(KeyedCollection,KeyedIterable.prototype);mixin(IndexedCollection,IndexedIterable.prototype);mixin(SetCollection,SetIterable.prototype);function keyMapper(v,k){return k}function entryMapper(v,k){return[k,v]}function not(predicate){return function(){return!predicate.apply(this,arguments)}}function neg(predicate){return function(){return-predicate.apply(this,arguments)}}function quoteString(value){return typeof value==="string"?JSON.stringify(value):value}function defaultZipper(){return arrCopy(arguments)}function defaultNegComparator(a,b){return a<b?1:a>b?-1:0}function hashIterable(iterable){if(iterable.size===Infinity){return 0}var ordered=isOrdered(iterable);var keyed=isKeyed(iterable);var h=ordered?1:0;var size=iterable.__iterate(keyed?ordered?function(v,k){h=31*h+hashMerge(hash(v),hash(k))|0}:function(v,k){h=h+hashMerge(hash(v),hash(k))|0}:ordered?function(v){h=31*h+hash(v)|0}:function(v){h=h+hash(v)|0});return murmurHashOfSize(size,h)}function murmurHashOfSize(size,h){h=src_Math__imul(h,3432918353);h=src_Math__imul(h<<15|h>>>-15,461845907);h=src_Math__imul(h<<13|h>>>-13,5);h=(h+3864292196|0)^size;h=src_Math__imul(h^h>>>16,2246822507);h=src_Math__imul(h^h>>>13,3266489909);h=smi(h^h>>>16);return h}function hashMerge(a,b){return a^b+2654435769+(a<<6)+(a>>2)|0}var Immutable={Iterable:Iterable,Seq:Seq,Collection:Collection,Map:src_Map__Map,OrderedMap:OrderedMap,List:List,Stack:Stack,Set:src_Set__Set,OrderedSet:OrderedSet,Record:Record,Range:Range,Repeat:Repeat,is:is,fromJS:fromJS};return Immutable})},865:function(module,exports,__webpack_require__){"use strict";var keyMirror=__webpack_require__(48);module.exports.action=keyMirror({ADD_COMMENT:null,RECEIVE_ADD_COMMENT:null,REPLY_TO_COMMENT:null,RECEIVE_REPLY_TO_COMMENT:null,RECEIVE_POST_COMMENTS:null});module.exports.state=keyMirror({PENDING:null,COMPLETE:null,ERROR:null})},866:function(module,exports,__webpack_require__){"use strict";var keyMirror=__webpack_require__(48);module.exports={action:keyMirror({FETCH_FEED_POST:null,RECEIVE_FEED_POST:null})}},867:function(module,exports,__webpack_require__){(function(process){"use strict";var _Object$keys=__webpack_require__(73)["default"];var assign=__webpack_require__(15),config=__webpack_require__(4),debug=__webpack_require__(1)("calypso:feed-post-store"),forEach=__webpack_require__(292),isEqual=__webpack_require__(96),forOwn=__webpack_require__(704),clone=__webpack_require__(154);var Dispatcher=__webpack_require__(30),emitter=__webpack_require__(10),normalizer=__webpack_require__(755),normalizationRules=__webpack_require__(1272),FeedPostActionType=__webpack_require__(866).action,FeedStreamActionType=__webpack_require__(972).action,ReaderSiteBlockActionType=__webpack_require__(873).action;var _posts={},_postsForBlogs={},FeedPostStore;function blogKey(postKey){return postKey.blogId+"-"+postKey.postId}FeedPostStore={get:function get(postKey){if(!postKey){return}if(postKey.blogId){return _postsForBlogs[blogKey(postKey)]}else if(postKey.feedId&&postKey.postId){return _posts[postKey.postId]}return}};if(config("env")==="development"){assign(FeedPostStore,{_all:function _all(){return _posts},_reset:function _reset(){_posts={};_postsForBlogs={}}})}emitter(FeedPostStore);FeedPostStore.dispatchToken=Dispatcher.register(function(payload){var action=payload&&payload.action,error;if(!action){return}switch(action.type){case FeedPostActionType.FETCH_FEED_POST:receivePending(action);break;case FeedStreamActionType.RECEIVE_PAGE:case FeedStreamActionType.RECEIVE_UPDATES:case FeedStreamActionType.RECEIVE_GAP:if(!action.error&&action.data.posts){forEach(action.data.posts,receivePostFromPage)}break;case FeedPostActionType.RECEIVE_FEED_POST:if(action.error){error={status_code:-1,errorCode:"-",message:action.error.toString()};if(action.blogId){receiveBlogError(action.blogId,action.postId,error)}else{receiveError(action.feedId,action.postId,error)}}else if(action.blogId){receiveBlogPost(action.blogId,action.postId,action.data)}else{receivePost(action.feedId,action.postId,action.data)}break;case ReaderSiteBlockActionType.BLOCK_SITE:markBlockedSitePosts(action.siteId,true);break;case ReaderSiteBlockActionType.RECEIVE_BLOCK_SITE:markBlockedSitePosts(action.siteId,action.data&&action.data.success);break;case ReaderSiteBlockActionType.UNBLOCK_SITE:markBlockedSitePosts(action.siteId,false);break;case ReaderSiteBlockActionType.RECEIVE_UNBLOCK_SITE:markBlockedSitePosts(action.siteId,!(action.data&&action.data.success));break}});function _setFeedPost(id,post){var cachedPost;if(!id){return false}cachedPost=_posts[id];post.feed_item_ID=id;if(cachedPost&&isEqual(post,cachedPost)){return false}_posts[id]=post;return true}function _setBlogPost(post){var key,cachedPost;if(!post||!post.site_ID||post.is_external){return false}key=blogKey({blogId:post.site_ID,postId:post.ID});cachedPost=_postsForBlogs[key];if(cachedPost&&isEqual(post,cachedPost)){return false}_postsForBlogs[key]=post;return true}function setPost(id,post){var changedFeed=_setFeedPost(id,post),changedBlog=_setBlogPost(post),changed=changedFeed||changedBlog;if(changed){FeedPostStore.emit("change")}}function receivePending(action){var post,currentPost;if(action.blogId){post={site_ID:action.blogId,ID:action.postId};currentPost=_postsForBlogs[blogKey(action.blogId,action.postId)];post=assign(post,currentPost,{_state:"pending"});setPost(null,post)}else{post={feed_ID:action.feedId,feed_item_ID:action.postId};currentPost=_posts[action.postId];post=assign(post,currentPost,{_state:"pending"});setPost(action.postId,post)}}function receivePostFromPage(newPost){if(!(newPost&&newPost.ID)){return}if(newPost.feed_ID&&newPost.ID&&!_posts[newPost.ID]){setPost(newPost.ID,assign({},newPost,{_state:"minimal"}))}else if(newPost.site_ID&&!_postsForBlogs[blogKey({blogId:newPost.site_ID,postId:newPost.ID})]){setPost(null,assign({},newPost,{_state:"minimal"}))}}function receivePost(feedId,postId,post){if(post.errors){receiveError(feedId,postId,post)}else{normalizePost(feedId,postId,post)}}function receiveBlogPost(blogId,postId,post){if(post.errors){post.site_ID=blogId;post.ID=postId;post.is_external=false;receiveError(null,null,post)}else{normalizePost(null,null,post)}}function receiveError(feedId,postId,error){var statusCode,errorCode,message;if(error.status_code){statusCode=error.status_code;errorCode=error.errors.error;message=error.errors.message}else{errorCode=_Object$keys(error.errors)[0];if(errorCode){statusCode=error.error_data[errorCode];message=error.errors[errorCode][0]}}setPost(postId,{feed_ID:feedId,feed_item_ID:postId,site_ID:error.site_ID,ID:error.ID,date:error.date,_state:"error",message:message,errorCode:errorCode,statusCode:statusCode})}function receiveBlogError(blogId,postId,error){error.site_ID=blogId;error.ID=postId;error.is_external=false;receiveError(null,null,error)}function normalizePost(feedId,postId,post){if(!post){debug("post is required");return}normalizer(post,normalizationRules.fastRules,function(err,normalizedPost){if(!err){setPost(postId,normalizedPost);process.nextTick(function(){normalizer(normalizedPost,normalizationRules.slowRules,function(fullErr,fullyNormalizedPost){if(!fullErr){setPost(postId,fullyNormalizedPost)}})})}})}function markBlockedSitePosts(siteId,isSiteBlocked){forOwn(_postsForBlogs,function(post){var newPost;if(post.site_ID===siteId&&post.is_site_blocked!==isSiteBlocked){newPost=clone(post);newPost.is_site_blocked=isSiteBlocked;setPost(newPost.feed_item_ID,newPost)}})}module.exports=FeedPostStore}).call(exports,__webpack_require__(284))},872:function(module,exports,__webpack_require__){"use strict";var Dispatcher=__webpack_require__(30),reject=__webpack_require__(158),findLast=__webpack_require__(1175),get=__webpack_require__(828),last=__webpack_require__(159),Immutable=__webpack_require__(849),clone=__webpack_require__(154),map=__webpack_require__(282);var Emitter=__webpack_require__(10),ActionTypes=__webpack_require__(836).action,ErrorTypes=__webpack_require__(836).error,PostStoreActionTypes=__webpack_require__(866).action,FeedSubscriptionHelper=__webpack_require__(1082),States=__webpack_require__(836).state;var subscriptionsTemplate={list:Immutable.List(),count:0},subscriptions=clone(subscriptionsTemplate),errors=[],perPage=10,currentPage=0,_isLastPage=false,totalSubscriptions,subscriptionTemplate=Immutable.Map({state:States.SUBSCRIBED});var FeedSubscriptionStore={receiveFollow:function receiveFollow(action){var subscription={URL:action.data.url};if(addSubscription(subscription)){FeedSubscriptionStore.emit("change")}},receiveUnfollow:function receiveUnfollow(action){if(removeSubscription({URL:action.data.url})){FeedSubscriptionStore.emit("change")}},receiveFollowResponse:function receiveFollowResponse(action){var updatedSubscriptionInfo;if(!action.error&&action.data&&action.data.subscribed&&action.data.subscription){FeedSubscriptionStore.removeErrorsForSiteUrl(action.url);updatedSubscriptionInfo=action.data.subscription;updatedSubscriptionInfo.state=States.SUBSCRIBED;updateSubscription(action.url,updatedSubscriptionInfo);FeedSubscriptionStore.emit("change");return}errors.push({URL:action.url,errorType:ErrorTypes.UNABLE_TO_FOLLOW,info:get(action,"data.info"),timestamp:Date.now()});if(removeSubscription({URL:action.url})){FeedSubscriptionStore.emit("change")}},receiveUnfollowResponse:function receiveUnfollowResponse(action){if(!action.error&&action.data&&!action.data.subscribed){FeedSubscriptionStore.removeErrorsForSiteUrl(action.url);FeedSubscriptionStore.emit("remove",action.url);return}errors.push({URL:action.url,errorType:ErrorTypes.UNABLE_TO_UNFOLLOW,info:get(action,"data.info"),timestamp:Date.now()});if(addSubscription({URL:action.url})){FeedSubscriptionStore.emit("change")}},receivePost:function receivePost(post){if(!(post&&post.site_URL)){return}var siteUrl=FeedSubscriptionHelper.prepareSiteUrl(post.site_URL);if(post.is_following&&!this.getIsFollowingBySiteUrl(post.site_URL)){addSubscription({URL:siteUrl})}FeedSubscriptionStore.emit("change")},receiveSubscriptions:function receiveSubscriptions(data){var currentSubscriptions=subscriptions,newSubscriptions,combinedSubscriptions;if(!data.subscriptions){return}var subscriptionsWithState=map(data.subscriptions,function(sub){sub.state=States.SUBSCRIBED;return sub});newSubscriptions=Immutable.fromJS(subscriptionsWithState);if(data.number<perPage){_isLastPage=true}if(currentPage>0&&data.page>currentPage){combinedSubscriptions=currentSubscriptions.list.concat(newSubscriptions);subscriptions={count:combinedSubscriptions.size,list:combinedSubscriptions}}else{subscriptions={count:newSubscriptions.size,list:newSubscriptions}}currentPage=data.page;if(currentPage===1){totalSubscriptions=data.total_subscriptions}FeedSubscriptionStore.emit("change")},getIsFollowingBySiteUrl:function getIsFollowingBySiteUrl(siteUrl){return!!this.getSubscription(siteUrl)},getSubscriptions:function getSubscriptions(){if(!subscriptions.list){return}return{list:subscriptions.list.toJS(),count:subscriptions.count}},getSubscription:function getSubscription(siteUrl){var preparedSiteUrl=FeedSubscriptionHelper.prepareSiteUrl(siteUrl);var foundSubscription=subscriptions.list.find(function(subscription){return subscription.get("URL")===preparedSiteUrl&&subscription.get("state")===States.SUBSCRIBED});if(!foundSubscription){return}return foundSubscription.toJS()},getTotalSubscriptions:function getTotalSubscriptions(){return totalSubscriptions},getLastError:function getLastError(){return last(errors)},getLastErrorBySiteUrl:function getLastErrorBySiteUrl(siteUrl){return findLast(errors,{URL:FeedSubscriptionHelper.prepareSiteUrl(siteUrl)})},removeErrorsForSiteUrl:function removeErrorsForSiteUrl(siteUrl){var newErrors=reject(errors,{URL:FeedSubscriptionHelper.prepareSiteUrl(siteUrl)});if(newErrors.length===errors.length){return false}errors=newErrors;return true},dismissError:function dismissError(error){this.removeErrorsForSiteUrl(error.data.siteUrl);FeedSubscriptionStore.emit("change")},clearErrors:function clearErrors(){errors=[]},clearSubscriptions:function clearSubscriptions(){subscriptions=clone(subscriptionsTemplate)},isLastPage:function isLastPage(){return _isLastPage},getCurrentPage:function getCurrentPage(){return currentPage},getPerPage:function getPerPage(){return perPage},setPerPage:function setPerPage(newPerPage){perPage=newPerPage}};function addSubscription(subscription){if(!subscription||!subscription.URL){return}var preparedSiteUrl=FeedSubscriptionHelper.prepareSiteUrl(subscription.URL);var existingSubscription=subscriptions.list.find(function(sub){return sub.get("URL")===preparedSiteUrl});if(existingSubscription){return updateSubscription(preparedSiteUrl,subscriptionTemplate)}var newSubscription=subscriptionTemplate.merge(subscription);newSubscription.URL=preparedSiteUrl;subscriptions.list=subscriptions.list.push(newSubscription);subscriptions.count++;if(totalSubscriptions>0){totalSubscriptions++}return true}function updateSubscription(url,newSubscriptionInfo){if(!url||!newSubscriptionInfo){return}var preparedSiteUrl=FeedSubscriptionHelper.prepareSiteUrl(url);var subscriptionIndex=subscriptions.list.findIndex(function(item){return item.get("URL")===preparedSiteUrl});if(isNaN(subscriptionIndex)){return}var existingSubscription=subscriptions.list.get(subscriptionIndex);var updatedSubscription=existingSubscription.merge(newSubscriptionInfo);var updatedSubscriptionsList=subscriptions.list.set(subscriptionIndex,updatedSubscription);if(updatedSubscriptionsList===subscriptions.list){return false}subscriptions.list=updatedSubscriptionsList;if(totalSubscriptions>0&&existingSubscription.get("state")===States.UNSUBSCRIBED&&updatedSubscription.get("state")===States.SUBSCRIBED){totalSubscriptions++}return true}function removeSubscription(subscription){if(!subscription||!subscription.URL){return}var newSubscriptionInfo={state:States.UNSUBSCRIBED};updateSubscription(subscription.URL,newSubscriptionInfo);if(totalSubscriptions>0){totalSubscriptions--}return true}Emitter(FeedSubscriptionStore);FeedSubscriptionStore.setMaxListeners(100);FeedSubscriptionStore.dispatchToken=Dispatcher.register(function(payload){var action=payload.action;if(!action){return}switch(action.type){case ActionTypes.FOLLOW_READER_FEED:FeedSubscriptionStore.receiveFollow(action);break;case ActionTypes.UNFOLLOW_READER_FEED:FeedSubscriptionStore.receiveUnfollow(action);break;case ActionTypes.RECEIVE_FOLLOW_READER_FEED:FeedSubscriptionStore.receiveFollowResponse(action);break;case ActionTypes.RECEIVE_UNFOLLOW_READER_FEED:FeedSubscriptionStore.receiveUnfollowResponse(action);break;case ActionTypes.DISMISS_FOLLOW_ERROR:FeedSubscriptionStore.dismissError(action);break;case PostStoreActionTypes.RECEIVE_FEED_POST:if(action.data&&!action.data.errors){FeedSubscriptionStore.receivePost(action.data)}break;case ActionTypes.RECEIVE_FEED_SUBSCRIPTIONS:if(action.data&&!action.data.errors){FeedSubscriptionStore.receiveSubscriptions(action.data)}break}});module.exports=FeedSubscriptionStore},873:function(module,exports,__webpack_require__){"use strict";var keyMirror=__webpack_require__(48);module.exports.action=keyMirror({BLOCK_SITE:null,RECEIVE_BLOCK_SITE:null,UNBLOCK_SITE:null,RECEIVE_UNBLOCK_SITE:null,DISMISS_BLOCK_ERROR:null});module.exports.error=keyMirror({UNABLE_TO_BLOCK:null,UNABLE_TO_UNBLOCK:null})},902:function(module,exports,__webpack_require__){"use strict";var assign=__webpack_require__(15),config=__webpack_require__(4),isEqual=__webpack_require__(96),clone=__webpack_require__(154),moment=__webpack_require__(294),findKey=__webpack_require__(1842),reject=__webpack_require__(158);var Dispatcher=__webpack_require__(30),Emitter=__webpack_require__(10),CommentActions=__webpack_require__(1072),FeedPostStoreActionTypes=__webpack_require__(866).action,key=__webpack_require__(1073).key,ActionTypes=__webpack_require__(865).action,States=__webpack_require__(865).state,formatting=__webpack_require__(287);var _commentsForPost={},CommentStore,receivedErrors=[],commentPlaceholder={ID:"pending",content:"",type:"comment",date:moment().toISOString()};function getComments(siteId,postId){return _commentsForPost[key(siteId,postId)]}function setComments(siteId,postId,comments){_commentsForPost[key(siteId,postId)]=comments}function addComment(siteId,postId,comment){if(comment.parent&&comment.parent.ID>0){_commentsForPost[key(siteId,postId)].comments.push(comment);return}_commentsForPost[key(siteId,postId)].comments.unshift(comment)}function addPendingComment(siteId,postId,commentText,parentCommentId,commentPlaceholderId){var postComments=getComments(siteId,postId);if(!postComments){setComments(siteId,postId,{comments:[],count:0})}removeErrorsForPost(siteId,postId);removePostsInErrorState(siteId,postId);var comment=clone(commentPlaceholder);comment.state=States.PENDING;comment.ID=commentPlaceholderId;comment.content=formatting.stripHTML(commentText);comment.parent={ID:parentCommentId};comment.date=moment().toISOString();addComment(siteId,postId,comment);CommentStore.emit("add",comment);CommentStore.emit("change")}function confirmComment(siteId,postId,commentPlaceholderId,confirmedComment){var postComments=getComments(siteId,postId),pendingCommentKey=findKey(postComments.comments,{ID:commentPlaceholderId});if(!pendingCommentKey){return}confirmedComment.state=States.CONFIRMED;if(confirmedComment.status==="approved"){postComments.count++}if(confirmedComment.parent.ID>0){postComments.comments.splice(pendingCommentKey,1);postComments.comments.push(confirmedComment)}else{postComments.comments[pendingCommentKey]=confirmedComment}setComments(siteId,postId,postComments);CommentStore.emit("change")}function receiveError(siteId,postId,commentPlaceholderId,error){var receivedErrorsForPost=receivedErrors[key(siteId,postId)];if(!receivedErrorsForPost){receivedErrorsForPost=[]}var postComments=getComments(siteId,postId),pendingCommentKey=findKey(postComments.comments,{ID:commentPlaceholderId});error.ID=commentPlaceholderId;receivedErrorsForPost.push(error);receivedErrors[key(siteId,postId)]=receivedErrorsForPost;if(pendingCommentKey&&postComments.comments[pendingCommentKey]){var newPostComments=clone(postComments);var errorComment=newPostComments.comments[pendingCommentKey];errorComment.state=States.ERROR;if(errorComment.parent.ID>0){newPostComments.comments.splice(pendingCommentKey,1);newPostComments.comments.push(errorComment)}setComments(siteId,postId,newPostComments)}CommentStore.emit("change")}function removeErrorsForPost(siteId,postId){receivedErrors[key(siteId,postId)]=null}function removePostsInErrorState(siteId,postId){var postComments=getComments(siteId,postId);if(postComments){var newPostComments=reject(postComments.comments,{state:States.ERROR});postComments.comments=newPostComments;setComments(siteId,postId,postComments)}}CommentStore={getCommentsForPost:function getCommentsForPost(siteId,postId){var comments=getComments(siteId,postId);if(!comments||!comments.comments){CommentActions.fetch(siteId,postId);return null}var commentResults={};comments.comments.forEach(function(comment){var parentCommentId=0;if(comment.parent&&comment.parent.ID){parentCommentId=comment.parent.ID}if(!commentResults[parentCommentId]){commentResults[parentCommentId]=[]}commentResults[parentCommentId].unshift(comment)});return commentResults},getCommentCountForPost:function getCommentCountForPost(siteId,postId){var comments=getComments(siteId,postId);if(!comments||isNaN(comments.count)){return 0}return comments.count},getErrorsForPost:function getErrorsForPost(siteId,postId){return receivedErrors[key(siteId,postId)]},receivePostComments:function receivePostComments(action){if(!action||action.error){if(action.error){receivedErrors.push(action)}return}if(!action.siteId||!action.postId){return}var currentComments=getComments(action.siteId,action.postId),commentCount=0;if(!action.data.comments){return}if(currentComments){commentCount=currentComments.count}var receivedComments={count:commentCount,comments:action.data.comments};if(!isEqual(receivedComments,currentComments)){setComments(action.siteId,action.postId,receivedComments);CommentStore.emit("change")}},receiveFeedPost:function receiveFeedPost(action){if(!action||action.error){if(action.error){receivedErrors.push(action)}return}var post,currentComments,newCount;post=action.data;if(!post.discussion){return}currentComments=getComments(post.site_ID,post.ID)||{};newCount=post.discussion&&post.discussion.comment_count;if(currentComments.count!==newCount){setComments(post.site_ID,post.ID,{count:newCount,comments:currentComments.comments});CommentStore.emit("change")}},receiveNewComment:function receiveNewComment(action){var args=action.args;addPendingComment(args.siteId,args.postId,args.commentText,args.parentCommentId,args.commentPlaceholderId)},receiveNewCommentResponse:function receiveNewCommentResponse(action){var args=action.args;if(action.error){receiveError(args.siteId,args.postId,args.commentPlaceholderId,action.error);return}confirmComment(args.siteId,args.postId,args.commentPlaceholderId,action.data)}};if(config("env")==="development"){assign(CommentStore,{_all:function _all(){return _commentsForPost},_reset:function _reset(){_commentsForPost={}}})}Emitter(CommentStore);CommentStore.dispatchToken=Dispatcher.register(function(payload){var action=payload.action;if(!action){return}switch(action.type){case ActionTypes.RECEIVE_POST_COMMENTS:CommentStore.receivePostComments(action);break;case FeedPostStoreActionTypes.RECEIVE_FEED_POST:CommentStore.receiveFeedPost(action);break;case ActionTypes.ADD_COMMENT:case ActionTypes.REPLY_TO_COMMENT:CommentStore.receiveNewComment(action);break;case ActionTypes.RECEIVE_ADD_COMMENT:case ActionTypes.RECEIVE_REPLY_TO_COMMENT:CommentStore.receiveNewCommentResponse(action);break}});module.exports=CommentStore},905:function(module,exports){"use strict";module.exports={UNCLASSIFIED:0,PHOTO_ONLY:1,LARGE_BANNER:2,ONE_LINER:4,LANDSCAPE_BANNER:8,PORTRAIT_BANNER:16,GALLERY:32,VIDEO:64,THUMBNAIL:128,CANONICAL_IN_CONTENT:256,FEATURED_VIDEO:512,X_POST:1024}},906:function(module,exports,__webpack_require__){"use strict";var forEach=__webpack_require__(292),get=__webpack_require__(828);var Dispatcher=__webpack_require__(30),ActionType=__webpack_require__(972).action,FeedPostStoreActions=__webpack_require__(970),feedPostListCache=__webpack_require__(1075),FeedStreamActions;function getNextPageParams(store){var params={orderBy:store.orderBy,number:store.perPage,meta:"post,discover_original_post"},lastDate=store.getLastItemWithDate();if(lastDate){params.before=lastDate}else{params.number=2}return params}FeedStreamActions={fetchNextPage:function fetchNextPage(id){var store=feedPostListCache.get(id),params;if(!store||store.isLastPage()||store.isFetchingNextPage()||store.hasRecentError()){return}Dispatcher.handleViewAction({type:ActionType.FETCH_NEXT_PAGE,id:id});params=getNextPageParams(store);store.onNextPageFetch(params);store.fetcher(params,FeedStreamActions.receivePage.bind(FeedStreamActions,store.id))},receivePage:function receivePage(id,error,data){if(!error&&data&&data.posts){forEach(data.posts,function(post){if(post&&get(post,"meta.data.discover_original_post")){FeedPostStoreActions.receivePost(null,post.meta.data.discover_original_post,{blogId:post.meta.data.discover_original_post.site_ID,postId:post.meta.data.discover_original_post.ID})}else if(post&&get(post,"meta.data.post")){FeedPostStoreActions.receivePost(null,post.meta.data.post,{feedId:post.feed_ID,postId:post.ID})}else if(post&&post.feed_ID){FeedPostStoreActions.receivePost(null,post,{feedId:post.feed_ID,postId:post.ID})}else if(post&&post.site_ID){FeedPostStoreActions.receivePost(null,post,{blogId:post.site_ID,postId:post.ID})}})}Dispatcher.handleServerAction({type:ActionType.RECEIVE_PAGE,id:id,error:error,data:data})},receiveUpdates:function receiveUpdates(id,error,data){Dispatcher.handleServerAction({type:ActionType.RECEIVE_UPDATES,id:id,error:error,data:data})},showUpdates:function showUpdates(id){Dispatcher.handleViewAction({type:ActionType.SHOW_UPDATES,id:id})},fillGap:function fillGap(id,gap){var store=feedPostListCache.get(id),params;if(!store){return}Dispatcher.handleViewAction({type:ActionType.FILL_GAP,id:id,gap:gap});params={before:gap.to.toISOString(),after:gap.from.toISOString(),number:store.gapFillCount,orderBy:store.orderBy};store.onGapFetch(params);store.fetcher(params,FeedStreamActions.receiveGap.bind(FeedStreamActions,store.id,gap))},receiveGap:function receiveGap(id,gap,error,data){Dispatcher.handleServerAction({type:ActionType.RECEIVE_GAP,id:id,gap:gap,error:error,data:data})}};module.exports=FeedStreamActions},913:function(module,exports,__webpack_require__){"use strict";var get=__webpack_require__(828);var Dispatcher=__webpack_require__(30),wpcom=__webpack_require__(20),ActionTypes=__webpack_require__(836).action,FeedSubscriptionHelper=__webpack_require__(1082),inflight=__webpack_require__(1279),FeedSubscriptionStore=__webpack_require__(872),SiteStoreActionTypes=__webpack_require__(792).action,FeedStoreActionTypes=__webpack_require__(808).action;function getNextPageParams(){var params={number:FeedSubscriptionStore.getPerPage(),meta:"feed,site"},currentPage=FeedSubscriptionStore.getCurrentPage();if(currentPage){params.page=currentPage+1}return params}var FeedSubscriptionActions={follow:function follow(url){var preparedUrl;if(!url){return}preparedUrl=FeedSubscriptionHelper.prepareSiteUrl(url);Dispatcher.handleViewAction({type:ActionTypes.FOLLOW_READER_FEED,url:url,data:{url:preparedUrl}});wpcom.undocumented().followReaderFeed(preparedUrl,function(error,data){Dispatcher.handleServerAction({type:ActionTypes.RECEIVE_FOLLOW_READER_FEED,url:preparedUrl,data:data,error:error})})},unfollow:function unfollow(url){var preparedUrl;if(!url){return}preparedUrl=FeedSubscriptionHelper.prepareSiteUrl(url);Dispatcher.handleViewAction({type:ActionTypes.UNFOLLOW_READER_FEED,url:url,data:{url:preparedUrl}});wpcom.undocumented().unfollowReaderFeed(preparedUrl,function(error,data){Dispatcher.handleServerAction({type:ActionTypes.RECEIVE_UNFOLLOW_READER_FEED,url:preparedUrl,data:data,error:error})})},dismissError:function dismissError(error){if(!error){return}Dispatcher.handleViewAction({type:ActionTypes.DISMISS_FOLLOW_ERROR,data:error})},fetch:function fetch(params){var requestKey="following_mine",callback;if(!params){params=getNextPageParams()}requestKey=requestKey+"_page"+params.page;if(inflight.requestInflight(requestKey)){return}callback=inflight.requestTracker(requestKey,function(error,data){FeedSubscriptionActions.receiveFollowingList(error,data)});wpcom.undocumented().readFollowingMine(params,callback)},fetchNextPage:function fetchNextPage(){var params;if(FeedSubscriptionStore.isLastPage()){return}Dispatcher.handleViewAction({type:ActionTypes.FETCH_NEXT_FEED_SUBSCRIPTIONS_PAGE});params=getNextPageParams();FeedSubscriptionActions.fetch(params)},receiveFollowingList:function receiveFollowingList(error,data){Dispatcher.handleServerAction({type:ActionTypes.RECEIVE_FEED_SUBSCRIPTIONS,error:error,data:data});if(!data||!data.subscriptions||!data.subscriptions.length){return}data.subscriptions.forEach(function(subscription){if(get(subscription,"meta.data.site")){Dispatcher.handleServerAction({type:SiteStoreActionTypes.RECEIVE_FETCH,siteId:subscription.meta.data.site.ID,error:error,data:subscription.meta.data.site})}if(get(subscription,"meta.data.feed")){Dispatcher.handleServerAction({type:FeedStoreActionTypes.FETCH,feedId:subscription.meta.data.feed.feed_ID});Dispatcher.handleServerAction({type:FeedStoreActionTypes.RECEIVE_FETCH,feedId:subscription.meta.data.feed.feed_ID,error:error,data:subscription.meta.data.feed})}})}};module.exports=FeedSubscriptionActions},931:function(module,exports,__webpack_require__){"use strict";var debug=__webpack_require__(1)("calyso:reader:post-time"),React=__webpack_require__(14),ticker=__webpack_require__(1313),humanDate=__webpack_require__(1277);var PostTime=React.createClass({displayName:"PostTime",mixins:[React.addons.PureRenderMixin],getDefaultProps:function getDefaultProps(){return{hideAgo:false}},componentWillMount:function componentWillMount(){this._update()},componentDidMount:function componentDidMount(){debug("listening for ticks");ticker.on("tick",this._update)},componentWillReceiveProps:function componentWillReceiveProps(nextProps){this._update(nextProps.date)},componentWillUnmount:function componentWillUnmount(){ticker.off("tick",this._update)},_update:function _update(date){date=date||this.props.date;this.setState({ago:humanDate(date)})},render:function render(){var date=this.props.date;return React.createElement("time",{className:this.props.className,dateTime:date,title:date},this.state.ago)}});module.exports=PostTime},948:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2),noop=__webpack_require__(35);var FollowButton=React.createClass({displayName:"FollowButton",propTypes:{following:React.PropTypes.bool.isRequired,onFollowToggle:React.PropTypes.func},getDefaultProps:function getDefaultProps(){return{following:false,onFollowToggle:noop,iconSize:20,tagName:"button"}},componentWillMount:function componentWillMount(){this.strings={FOLLOW:this.translate("Follow"),FOLLOWING:this.translate("Following")}},toggleFollow:function toggleFollow(event){if(event){event.preventDefault()}if(this.props.onFollowToggle){this.props.onFollowToggle(!this.props.following)}},render:function render(){var menuClasses=["follow-button","has-icon"],label=this.strings.FOLLOW,iconSize=this.props.iconSize;if(this.props.following){menuClasses.push("is-following");label=this.strings.FOLLOWING}menuClasses=menuClasses.join(" ");var followingIcon=React.createElement("svg",{key:"following",className:"gridicon gridicon__following",height:iconSize+"px",width:iconSize+"px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("path",{d:"M11.944 17.083L7 12.056l1.648-1.676 3.296 3.352 8.3-7.385C18.445 3.722 15.425 2 12 2 6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10c0-1.212-.227-2.37-.622-3.444l-9.434 8.527z"}))),followIcon=React.createElement("svg",{key:"follow",className:"gridicon gridicon__follow",height:iconSize+"px",width:iconSize+"px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("path",{d:"M12 4c4.41 0 8 3.59 8 8s-3.59 8-8 8-8-3.59-8-8 3.59-8 8-8m0-2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2z"}),React.createElement("path",{d:"M11 6h2v12.1h-2z"}),React.createElement("path",{d:"M6 11h11.83v2H6z"}))),followLabel=React.createElement("span",{key:"label",className:"follow-button__label"},label);return React.createElement(this.props.tagName,{onClick:this.toggleFollow,className:menuClasses},[followingIcon,followIcon,followLabel])}});module.exports=FollowButton},956:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2);var layoutFocus=__webpack_require__(75);var MobileBackToSidebar=React.createClass({displayName:"MobileBackToSidebar",toggleSidebar:function toggleSidebar(event){event.preventDefault();layoutFocus.set("sidebar")},render:function render(){return React.createElement("div",{className:"mobile-back-to-sidebar",onTouchTap:this.toggleSidebar},React.createElement("svg",{className:"gridicon gridicon-back-arrow mobile-back-to-sidebar__icon",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("path",{d:"M8.886 4L7 5.886 13.114 12 7 18.114 8.886 20l8-8"}))),React.createElement("span",{className:"mobile-back-to-sidebar__content"},this.props.children))}});module.exports=MobileBackToSidebar},960:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2),joinClasses=__webpack_require__(55);var PostExcerpt=React.createClass({displayName:"PostExcerpt",render:function render(){var text=this.props.text,textClass=["post-excerpt__text"];
if(!text){return null}if(text.length>80){textClass.push("is-long")}textClass=textClass.join(" ");return React.createElement("div",{className:joinClasses(this.props.className,"post-excerpt")},React.createElement("p",{className:textClass},text))}});module.exports=PostExcerpt},970:function(module,exports,__webpack_require__){"use strict";var assign=__webpack_require__(15);var Dispatcher=__webpack_require__(30),ACTION=__webpack_require__(866).action,PostBatcher=__webpack_require__(1273);var feedPostBatcher,blogPostBatcher,FeedPostActions;feedPostBatcher=new PostBatcher({BATCH_SIZE:7,apiVersion:"1.3",buildUrl:function buildUrl(postKey){return"/read/feed/"+encodeURIComponent(postKey.feedId)+"/posts/"+encodeURIComponent(postKey.postId)},resultKeyRegex:/\/read\/feed\/(\d+)\/posts\/(\d+)/,onFetch:function onFetch(postKey){Dispatcher.handleViewAction({type:ACTION.FETCH_FEED_POST,feedId:postKey.feedId,postId:postKey.postId})},onError:function onError(error,postKey){FeedPostActions.receivePost(error,null,{feedId:postKey.feedId,postId:postKey.postId})},onPostReceived:function onPostReceived(feedId,postId,post){FeedPostActions.receivePost(null,post,{feedId:feedId,postId:postId})}});blogPostBatcher=new PostBatcher({BATCH_SIZE:7,apiVersion:"1.1",buildUrl:function buildUrl(postKey){return"/read/sites/"+encodeURIComponent(postKey.blogId)+"/posts/"+encodeURIComponent(postKey.postId)},resultKeyRegex:/\/read\/sites\/(\d+)\/posts\/(\d+)/,onFetch:function onFetch(postKey){Dispatcher.handleViewAction({type:ACTION.FETCH_FEED_POST,blogId:postKey.blogId,postId:postKey.postId})},onError:function onError(error,postKey){FeedPostActions.receivePost(error,null,{blogId:postKey.blogId,postId:postKey.postId})},onPostReceived:function onPostReceived(blogId,postId,post){FeedPostActions.receivePost(null,post,{blogId:blogId,postId:postId})}});FeedPostActions={fetchPost:function fetchPost(postKey){var batcher=postKey.blogId?blogPostBatcher:feedPostBatcher;batcher.add(postKey)},receivePost:function receivePost(error,data,postKey){var batcher=postKey.blogId?blogPostBatcher:feedPostBatcher;if(data){batcher.remove(postKey)}Dispatcher.handleServerAction(assign({type:ACTION.RECEIVE_FEED_POST,data:data,error:error},postKey))}};module.exports=FeedPostActions},971:function(module,exports,__webpack_require__){"use strict";var Immutable=__webpack_require__(849),pick=__webpack_require__(153);var ActionType=__webpack_require__(808).action,State=__webpack_require__(808).state,Dispatcher=__webpack_require__(30),Emitter=__webpack_require__(10),decodeEntities=__webpack_require__(287).decodeEntities;var feeds={},FeedStore={get:function get(feedId){return feeds[feedId]}},FeedRecord=Immutable.Record({feed_ID:null,blog_ID:null,name:"",URL:"",feed_URL:"",subscribers_count:0,state:State.PENDING,error:undefined});function changeState(feedId,newState){var feed=feeds[feedId];if(!feed){feed=new FeedRecord({feed_ID:feedId})}feed=feed.set("state",newState);setFeed(feedId,feed)}function setFeed(feedId,feed){if(feed!==feeds[feedId]){feeds[feedId]=feed;FeedStore.emit("change")}}function receiveError(feedId,error){receiveFeed(feedId,{state:State.ERROR,error:error})}function receiveFeed(feedId,attributes){var feed=feeds[feedId];if(!feed){throw new Error("feed for "+feedId+" not found")}attributes=pick(attributes,["feed_ID","blog_ID","name","URL","feed_URL","subscribers_count","state","error"]);if(attributes.name){attributes.name=decodeEntities(attributes.name)}if(!attributes.state){attributes.state=State.COMPLETE}feed=feed.merge(attributes);setFeed(feedId,feed)}Emitter(FeedStore);FeedStore.dispatchToken=Dispatcher.register(function(payload){var action=payload&&payload.action;if(!action){return}switch(action.type){case ActionType.FETCH:changeState(action.feedId,State.PENDING);break;case ActionType.RECEIVE_FETCH:if(action.error){receiveError(action.feedId,action.error)}else{receiveFeed(action.feedId,action.data)}break}});module.exports=FeedStore},972:function(module,exports){"use strict";module.exports={action:{FETCH_NEXT_PAGE:"FETCH_NEXT_FEED_STREAM_PAGE",RECEIVE_PAGE:"RECEIVE_FEED_STREAM_PAGE",SHOW_UPDATES:"SHOW_FEED_STREAM_UPDATES",RECEIVE_UPDATES:"RECEIVE_FEED_STREAM_UPDATES",FILL_GAP:"FILL_FEED_STREAM_GAP",RECEIVE_GAP:"RECEIVE_FEED_STREAM_GAP"}}},984:function(module,exports,__webpack_require__){"use strict";var decodeEntities=__webpack_require__(287).decodeEntities,dispatcher=__webpack_require__(30),emitter=__webpack_require__(10),isEqual=__webpack_require__(96);var lists={},ListStore;function keyForList(owner,slug){return owner+"-"+slug}function getListURL(list){return"/read/list/"+encodeURIComponent(list.owner)+"/"+encodeURIComponent(list.slug)+"/"}ListStore={get:function get(owner,slug){return lists[keyForList(owner,slug)]}};emitter(ListStore);function receiveList(newList){var existing=ListStore.get(newList.owner,newList.slug);newList.URL=getListURL(newList);newList.title=decodeEntities(newList.title);if(!isEqual(existing,newList)){lists[keyForList(newList.owner,newList.slug)]=newList;ListStore.emit("change")}}function markPending(owner,slug){var key=keyForList(owner,slug),list=lists[key];if(!list){list={owner:owner,slug:slug,title:slug,ID:null,_state:"pending"};lists[key]=list;ListStore.emit("change")}}ListStore.dispatchToken=dispatcher.register(function(payload){var action=payload.action;if(!action||action.error){return}switch(action.type){case"RECEIVE_READER_LIST":if(action.data&&action.data.list){receiveList(action.data.list)}break;case"RECEIVE_READER_LISTS":if(action.data&&action.data.lists){action.data.lists.forEach(receiveList)}break;case"RECEIVE_CREATE_READER_LIST":receiveList(action.data);break;case"FOLLOW_LIST":markPending(action.data.owner,action.data.slug);break;case"RECEIVE_FOLLOW_LIST":receiveList(action.data);break}});module.exports=ListStore},985:function(module,exports,__webpack_require__){"use strict";var Dispatcher=__webpack_require__(30),wpcom=__webpack_require__(20).undocumented(),ActionTypes=__webpack_require__(873).action;var SiteBlockActions={block:function block(siteId){if(!siteId){return}Dispatcher.handleViewAction({type:ActionTypes.BLOCK_SITE,siteId:siteId,data:{siteId:siteId}});wpcom.me().blockSite(siteId,function(error,data){Dispatcher.handleServerAction({type:ActionTypes.RECEIVE_BLOCK_SITE,siteId:siteId,data:data,error:error})})},unblock:function unblock(siteId){if(!siteId){return}Dispatcher.handleViewAction({type:ActionTypes.UNBLOCK_SITE,siteId:siteId,data:{siteId:siteId}});wpcom.me().unblockSite(siteId,function(error,data){Dispatcher.handleServerAction({type:ActionTypes.RECEIVE_UNBLOCK_SITE,siteId:siteId,data:data,error:error})})},dismissError:function dismissError(error){if(!error){return}Dispatcher.handleViewAction({type:ActionTypes.DISMISS_BLOCK_ERROR,data:error})}};module.exports=SiteBlockActions},986:function(module,exports,__webpack_require__){"use strict";var keyMirror=__webpack_require__(48);module.exports.action=keyMirror({RECEIVE_TEAMS:null});module.exports.error=keyMirror({UNABLE_TO_RECEIVE_TEAMS:null})},988:function(module,exports,__webpack_require__){"use strict";var Dispatcher=__webpack_require__(30),ActionTypes=__webpack_require__(792).action,wpcom=__webpack_require__(20);var fetchingSites={};var SitesStoreActions={fetch:function fetch(siteId){if(fetchingSites[siteId]){return}fetchingSites[siteId]=true;wpcom.undocumented().readSite({site:siteId},function(error,data){delete fetchingSites[siteId];SitesStoreActions.receiveFetch(siteId,error,data)})},receiveFetch:function receiveFetch(siteId,error,data){Dispatcher.handleServerAction({type:ActionTypes.RECEIVE_FETCH,siteId:siteId,error:error,data:data})}};module.exports=SitesStoreActions},1025:function(module,exports,__webpack_require__){"use strict";var url=__webpack_require__(43);var i18n=__webpack_require__(16),SiteState=__webpack_require__(792).state;module.exports={siteNameFromSiteAndPost:function siteNameFromSiteAndPost(site,post){var siteName;if(site&&site.get("state")===SiteState.COMPLETE){siteName=site.get("title")||site.get("domain")}else if(post){if(post.site_name){siteName=post.site_name}else if(post.site_URL){siteName=url.parse(post.site_URL).hostname}}if(!siteName){siteName=i18n.translate("(no title)")}return siteName}}},1040:function(module,exports,__webpack_require__){var SYMBOL_ITERATOR=__webpack_require__(690)("iterator"),SAFE_CLOSING=false;try{var riter=[7][SYMBOL_ITERATOR]();riter["return"]=function(){SAFE_CLOSING=true};Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec){if(!SAFE_CLOSING)return false;var safe=false;try{var arr=[7],iter=arr[SYMBOL_ITERATOR]();iter.next=function(){safe=true};arr[SYMBOL_ITERATOR]=function(){return iter};exec(arr)}catch(e){}return safe}},1066:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2),noop=__webpack_require__(35);var CommentButton=React.createClass({displayName:"CommentButton",propTypes:{onClick:React.PropTypes.func,tagName:React.PropTypes.string,commentCount:React.PropTypes.number.isRequired},getDefaultProps:function getDefaultProps(){return{onClick:noop,tagName:"li"}},onClick:function onClick(event){event.preventDefault();this.props.onClick()},render:function render(){var containerClasses=["comment-button"],containerTag=this.props.tagName,commentCount=this.props.commentCount;containerClasses=containerClasses.join(" ");var labelElement=React.createElement("span",{className:"comment-button__label"},commentCount);return React.createElement(containerTag,{className:containerClasses,onTouchTap:this.onClick},React.createElement(CommentIcon,null),labelElement)}});var CommentIcon=React.createClass({displayName:"CommentIcon",propTypes:{size:React.PropTypes.number},getDefaultProps:function getDefaultProps(){return{size:24}},render:function render(){var size=this.props.size;return React.createElement("span",{className:"gridicon__wrapper"},React.createElement("svg",{className:"gridicon gridicon__comments",height:size,width:size,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("path",{d:"M3 6v9c0 1.105.895 2 2 2h9v5l5.325-3.804c1.05-.75 1.675-1.963 1.675-3.254V6c0-1.105-.895-2-2-2H5c-1.105 0-2 .895-2 2z"}))))}});module.exports=CommentButton},1067:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(14),classnames=__webpack_require__(11);var LikeIcons=__webpack_require__(1217);var LikeButton=React.createClass({displayName:"LikeButton",mixins:[React.addons.PureRenderMixin],propTypes:{liked:React.PropTypes.bool,showCount:React.PropTypes.bool,likeCount:React.PropTypes.number,tagName:React.PropTypes.string,onLikeToggle:React.PropTypes.func,likedLabel:React.PropTypes.string,isMini:React.PropTypes.bool},getDefaultProps:function getDefaultProps(){return{liked:false,showCount:false,likeCount:0,isMini:false}},toggleLiked:function toggleLiked(event){if(event){event.preventDefault()}if(this.props.onLikeToggle){this.props.onLikeToggle(!this.props.liked)}},render:function render(){var containerClasses={"like-button":true,"ignore-click":true,"is-mini":this.props.isMini},likeLabel=this.translate("Like",{comment:'Label for a button to "like" a post.'}),likeCount=this.props.likeCount,containerTag=this.props.tagName||"li",labelElement,iconSize=24;if(this.props.liked){containerClasses["is-liked"]=true;if(this.props.likedLabel){likeLabel=this.props.likedLabel}else{likeLabel=this.translate("Liked",{comment:'Displayed when a person "likes" a post.'})}}if(likeCount>0||this.props.showCount){likeLabel=this.translate("%d Like","%d Likes",{args:[likeCount],count:likeCount,comment:'Displayed when a person "likes" a post.'})}if(this.props.isMini){iconSize=18}containerClasses=classnames(containerClasses);labelElement=React.createElement("span",{className:"like-button__label"},likeLabel);return React.createElement(containerTag,{className:containerClasses,onTouchTap:this.toggleLiked},React.createElement(LikeIcons,{size:iconSize}),labelElement)}});module.exports=LikeButton},1072:function(module,exports,__webpack_require__){"use strict";var debug=__webpack_require__(1)("calypso:comment-store:actions");var Dispatcher=__webpack_require__(30),key=__webpack_require__(1073).key,wpcom=__webpack_require__(20),ActionTypes=__webpack_require__(865).action;var inflight={},commentPlaceholderCount=0;function requestInflight(requestKey){return requestKey in inflight}function requestTracker(requestKey,callback){inflight[requestKey]=true;return function(error,data){delete inflight[requestKey];callback(error,data)}}function generateCommentPlaceholderId(){var commentPlaceholderId="pending"+commentPlaceholderCount;commentPlaceholderCount++;return commentPlaceholderId}var CommentActions={add:function add(siteId,postId,commentText){if(!commentText){return}var commentPlaceholderId=generateCommentPlaceholderId();Dispatcher.handleViewAction({type:ActionTypes.ADD_COMMENT,args:{siteId:siteId,postId:postId,parentCommentId:0,commentText:commentText,commentPlaceholderId:commentPlaceholderId}});wpcom.site(siteId).post(postId).comment().add(commentText,function(error,data){Dispatcher.handleServerAction({type:ActionTypes.RECEIVE_ADD_COMMENT,args:{siteId:siteId,postId:postId,commentPlaceholderId:commentPlaceholderId},data:data,error:error})})},reply:function reply(siteId,postId,parentCommentId,commentText){if(!commentText){return}var commentPlaceholderId=generateCommentPlaceholderId();Dispatcher.handleViewAction({type:ActionTypes.REPLY_TO_COMMENT,args:{siteId:siteId,postId:postId,parentCommentId:parentCommentId,commentText:commentText,commentPlaceholderId:commentPlaceholderId}});wpcom.site(siteId).post(postId).comment(parentCommentId).reply(commentText,function(error,data){Dispatcher.handleServerAction({type:ActionTypes.RECEIVE_REPLY_TO_COMMENT,args:{siteId:siteId,postId:postId,parentCommentId:parentCommentId,commentPlaceholderId:commentPlaceholderId},data:data,error:error})})},fetch:function fetch(siteId,postId){if(requestInflight(key(siteId,postId))){return}var requestKey=key(siteId,postId),callback=requestTracker(requestKey,function(error,data){CommentActions.receivePostComments(error,siteId,postId,data)});var query={hierarchical:true,type:"comment"};wpcom.site(siteId).post(postId).comment().replies(query,callback)},receivePostComments:function receivePostComments(error,siteId,postId,data){Dispatcher.handleServerAction({type:ActionTypes.RECEIVE_POST_COMMENTS,error:error,siteId:siteId,postId:postId,data:data})}};module.exports=CommentActions},1073:function(module,exports){"use strict";module.exports={key:function key(siteId,postId){if(!siteId||!postId){throw new Error("siteId and postId must be non-empty")}return siteId+"-"+postId}}},1075:function(module,exports){"use strict";var feedStreams={};module.exports={get:function get(id){return feedStreams[id]},set:function set(id,store){feedStreams[id]=store}}},1077:function(module,exports,__webpack_require__){"use strict";var debug=__webpack_require__(1)("calypso:like-store:actions");var Dispatcher=__webpack_require__(30),key=__webpack_require__(1078).key,wpcom=__webpack_require__(20);var inflight={};function requestInflight(requestKey){return requestKey in inflight}function requestTracker(requestKey,callback){inflight[requestKey]=true;return function(error,data){delete inflight[requestKey];callback(error,data)}}function getQuery(){return{source:"reader"}}var LikeActions={fetchLikes:function fetchLikes(siteId,postId){if(requestInflight(key(siteId,postId))){return}var requestKey=key(siteId,postId),callback=requestTracker(requestKey,function(error,data){LikeActions.receivePostLikes(error,siteId,postId,data)});wpcom.site(siteId).post(postId).likesList(callback)},likePost:function likePost(siteId,postId){Dispatcher.handleViewAction({type:"LIKE_POST",siteId:siteId,postId:postId});wpcom.site(siteId).post(postId).like().add(getQuery(),function(error,data){LikeActions.receiveLikeResponse(error,siteId,postId,data)})},unlikePost:function unlikePost(siteId,postId){Dispatcher.handleViewAction({type:"UNLIKE_POST",siteId:siteId,postId:postId});wpcom.site(siteId).post(postId).like().del(getQuery(),function(error,data){LikeActions.receiveUnlikeResponse(error,siteId,postId,data)})},receivePostLikes:function receivePostLikes(error,siteId,postId,data){Dispatcher.handleServerAction({type:"RECEIVE_POST_LIKES",error:error,siteId:siteId,postId:postId,data:data})},receiveLikeResponse:function receiveLikeResponse(error,siteId,postId,data){Dispatcher.handleServerAction({type:"RECEIVE_LIKE_RESPONSE",error:error,siteId:siteId,postId:postId,data:data})},receiveUnlikeResponse:function receiveUnlikeResponse(error,siteId,postId,data){Dispatcher.handleServerAction({type:"RECEIVE_UNLIKE_RESPONSE",error:error,siteId:siteId,postId:postId,data:data})}};module.exports=LikeActions},1078:function(module,exports){"use strict";module.exports={key:function key(siteId,postId){if(!siteId||!postId){throw new Error("siteId and postId must be non-empty")}return siteId+"-"+postId}}},1082:function(module,exports,__webpack_require__){"use strict";var untrailingslashit=__webpack_require__(116);module.exports={prepareSiteUrl:function prepareSiteUrl(url){var preparedUrl=url&&untrailingslashit(url.replace("https://","http://"));return preparedUrl}}},1083:function(module,exports,__webpack_require__){"use strict";var Dispatcher=__webpack_require__(30),wpcom=__webpack_require__(20);var fetchingSubscriptions=false,fetchingLists={};var ReaderListActions={fetchSubscriptions:function fetchSubscriptions(){if(fetchingSubscriptions){return}fetchingSubscriptions=true;wpcom.undocumented().readLists(function(error,data){fetchingSubscriptions=false;Dispatcher.handleServerAction({type:"RECEIVE_READER_LISTS",data:data,error:error})})},follow:function follow(owner,slug){var query={owner:owner,slug:slug};Dispatcher.handleViewAction({type:"FOLLOW_LIST",data:query});wpcom.undocumented().followList(query,function(error,data){if(error||!(data&&data.following)){Dispatcher.handleServerAction({type:"RECEIVE_FOLLOW_LIST_ERROR",data:{owner:query.owner,slug:query.slug,error:error,following:data&&data.following}});return}Dispatcher.handleServerAction({type:"RECEIVE_FOLLOW_LIST",data:{owner:query.owner,slug:query.slug,title:data.title},error:error})})},unfollow:function unfollow(owner,slug){var query={owner:owner,slug:slug};Dispatcher.handleViewAction({type:"UNFOLLOW_LIST",data:query});wpcom.undocumented().unfollowList(query,function(error,data){if(error||data&&data.following){Dispatcher.handleServerAction({type:"RECEIVE_UNFOLLOW_LIST_ERROR",data:{owner:query.owner,slug:query.slug,error:error,following:data&&data.following}});return}Dispatcher.handleServerAction({type:"RECEIVE_UNFOLLOW_LIST",data:{owner:query.owner,slug:query.slug,title:data.title},error:error})})},fetchList:function fetchList(owner,slug){var key=owner+"-"+slug;if(fetchingLists[key]){return}fetchingLists[key]=true;wpcom.undocumented().readList({owner:owner,slug:slug},function(error,data){delete fetchingLists[key];Dispatcher.handleServerAction({type:"RECEIVE_READER_LIST",data:data,error:error})})},create:function create(title){if(!title){return}Dispatcher.handleViewAction({type:"CREATE_READER_LIST",data:{title:title}});wpcom.undocumented().readListsNew(title,function(error,data){Dispatcher.handleServerAction({type:"RECEIVE_CREATE_READER_LIST",data:data,error:error})})}};module.exports=ReaderListActions},1084:function(module,exports,__webpack_require__){"use strict";var Dispatcher=__webpack_require__(30),find=__webpack_require__(56),reject=__webpack_require__(158),isEqual=__webpack_require__(96);var emitter=__webpack_require__(10),ListStore=__webpack_require__(984);var lists=null,errors=[],ReaderListStore;function mapApiToId(list){return{owner:list.owner,slug:list.slug}}function sortList(){lists.sort(function(a,b){var aTitle=ListStore.get(a.owner,a.slug).title,bTitle=ListStore.get(b.owner,b.slug).title;return aTitle.localeCompare(bTitle)})}ReaderListStore={get:function get(){return lists&&lists.map(function(list){return ListStore.get(list.owner,list.slug)})},isSubscribed:function isSubscribed(owner,slug){return!!find(lists,{owner:owner,slug:slug})},receiveLists:function receiveLists(newLists){newLists=newLists.map(mapApiToId);if(!isEqual(newLists,lists)){lists=newLists;ReaderListStore.emit("change")}},followList:function followList(newList){newList=mapApiToId(newList);if(find(lists,newList)){return newList}lists.push(newList);sortList();ReaderListStore.emit("change");return newList},unfollowList:function unfollowList(data){var key=mapApiToId(data),newList=reject(lists,key);if(newList.length!==lists.length){lists=newList;sortList();ReaderListStore.emit("change")}},receiveCreateReaderList:function receiveCreateReaderList(newList){newList=ReaderListStore.followList(newList);ReaderListStore.emit("create",newList)}};emitter(ReaderListStore);ReaderListStore.dispatchToken=Dispatcher.register(function(payload){var action=payload.action;if(!action){return}Dispatcher.waitFor([ListStore.dispatchToken]);if(action.error){errors.push(action.error);return}switch(action.type){case"RECEIVE_READER_LISTS":ReaderListStore.receiveLists(action.data.lists);break;case"FOLLOW_LIST":case"RECEIVE_FOLLOW_LIST":ReaderListStore.followList(action.data);break;case"RECEIVE_FOLLOW_LIST_ERROR":ReaderListStore.unfollowList(action.data);break;case"UNFOLLOW_LIST":case"RECEIVE_UNFOLLOW_LIST":ReaderListStore.unfollowList(action.data);break;case"RECEIVE_UNFOLLOW_LIST_ERROR":ReaderListStore.followList(action.data);break;case"RECEIVE_CREATE_READER_LIST":ReaderListStore.receiveCreateReaderList(action.data);break}});module.exports=ReaderListStore},1085:function(module,exports,__webpack_require__){"use strict";var Dispatcher=__webpack_require__(30),reject=__webpack_require__(158),find=__webpack_require__(56),findLast=__webpack_require__(1175);var emitter=__webpack_require__(10),ActionTypes=__webpack_require__(873).action,ErrorTypes=__webpack_require__(873).error;var blockedSites=[],errors=[];var SiteBlockStore={getIsBlocked:function getIsBlocked(siteId){var isBlocked=false;if(find(blockedSites,{siteId:siteId})){isBlocked=true}return isBlocked},receiveBlock:function receiveBlock(action){SiteBlockStore.addBlockedSite(action.data.siteId)},receiveUnblock:function receiveUnblock(action){SiteBlockStore.removeBlockedSite(action.data.siteId)},receiveBlockResponse:function receiveBlockResponse(action){if(!action.error&&action.data&&action.data.success){SiteBlockStore.removeErrorsForSite(action.siteId);return}errors.push({siteId:action.siteId,errorType:ErrorTypes.UNABLE_TO_BLOCK,timestamp:Date.now()});SiteBlockStore.removeBlockedSite(action.siteId)},receiveUnblockResponse:function receiveUnblockResponse(action){if(!action.error&&action.data&&action.data.success){SiteBlockStore.removeErrorsForSite(action.siteId);return}errors.push({siteId:action.siteId,errorType:ErrorTypes.UNABLE_TO_UNBLOCK,timestamp:Date.now()});SiteBlockStore.addBlockedSite(action.siteId)},addBlockedSite:function addBlockedSite(siteId){blockedSites.push({siteId:siteId});SiteBlockStore.emit("change");SiteBlockStore.emit("block",siteId);return true},removeBlockedSite:function removeBlockedSite(siteId){var newBlockedSites=reject(blockedSites,{siteId:siteId});if(newBlockedSites.length===blockedSites.length){return false}blockedSites=newBlockedSites;SiteBlockStore.emit("change");return true},removeErrorsForSite:function removeErrorsForSite(siteId){var newErrors=reject(errors,{siteId:siteId});if(newErrors.length===errors.length){return false}errors=newErrors;return true},getLastErrorBySite:function getLastErrorBySite(siteId){var lastError=findLast(errors,{siteId:siteId});if(!lastError){return null}return lastError},dismissError:function dismissError(error){this.removeErrorsForSite(error.data.siteId);SiteBlockStore.emit("change")}};emitter(SiteBlockStore);SiteBlockStore.setMaxListeners(100);SiteBlockStore.dispatchToken=Dispatcher.register(function(payload){var action=payload.action;if(!action){return}switch(action.type){case ActionTypes.BLOCK_SITE:SiteBlockStore.receiveBlock(action);break;case ActionTypes.UNBLOCK_SITE:SiteBlockStore.receiveUnblock(action);break;case ActionTypes.RECEIVE_BLOCK_SITE:SiteBlockStore.receiveBlockResponse(action);break;case ActionTypes.RECEIVE_UNBLOCK_SITE:SiteBlockStore.receiveUnblockResponse(action);break;case ActionTypes.DISMISS_BLOCK_ERROR:SiteBlockStore.dismissError(action);break}});module.exports=SiteBlockStore},1086:function(module,exports,__webpack_require__){"use strict";var trim=__webpack_require__(323);var Dispatcher=__webpack_require__(30),wpcom=__webpack_require__(20);var tagsLoading={},subscriptionsLoading=false;var ReaderTagActions={fetchSubscriptions:function fetchSubscriptions(){if(subscriptionsLoading){return}subscriptionsLoading=true;wpcom.undocumented().readTags(function(error,data){subscriptionsLoading=false;Dispatcher.handleServerAction({type:"RECEIVE_READER_TAG_SUBSCRIPTIONS",data:data,error:error})})},fetchTag:function fetchTag(slug){if(tagsLoading[slug]){return}tagsLoading[slug]=true;wpcom.undocumented().readTag({slug:slug},function(error,data){delete tagsLoading[slug];Dispatcher.handleServerAction({type:"RECEIVE_READER_TAG",data:data,error:error})})},slugify:function slugify(tag){return encodeURIComponent(trim(tag).toLowerCase().replace(/\s+/g,"-").replace(/-{2,}/g,"-"))},follow:function follow(newTag){var newTagTitle,newTagSlug;if(newTag&&newTag.slug){newTagTitle=newTag.title;newTagSlug=newTag.slug}else{newTagTitle=newTag;newTagSlug=ReaderTagActions.slugify(newTag)}if(!newTagSlug){return}Dispatcher.handleViewAction({type:"FOLLOW_READER_TAG",data:{title:newTagTitle,slug:newTagSlug}});wpcom.undocumented().followReaderTag(newTagSlug,function(error,data){Dispatcher.handleServerAction({type:"RECEIVE_FOLLOW_READER_TAG",data:data,error:error,newSlug:newTagSlug})})},unfollow:function unfollow(tag){Dispatcher.handleViewAction({type:"UNFOLLOW_READER_TAG",data:{slug:tag.slug}});wpcom.undocumented().unfollowReaderTag(tag.slug,function(error,data){Dispatcher.handleServerAction({type:"RECEIVE_UNFOLLOW_READER_TAG",data:data,error:error})})}};module.exports=ReaderTagActions},1087:function(module,exports,__webpack_require__){"use strict";var Dispatcher=__webpack_require__(30),isEqual=__webpack_require__(96),map=__webpack_require__(282),reject=__webpack_require__(158),find=__webpack_require__(56);var emitter=__webpack_require__(10),TagStore=__webpack_require__(1088),TagSubscriptionStore;var subscriptions=null;function sortSubscriptions(a,b){if(a.slug>b.slug){return 1}if(a.slug<b.slug){return-1}return 0}TagSubscriptionStore={get:function get(){return subscriptions&&subscriptions.map(function(sub){return TagStore.get(sub.slug)||sub})},isSubscribed:function isSubscribed(slug){return!!find(subscriptions,{slug:slug})},getSubscription:function getSubscription(slug){return find(subscriptions,{slug:slug})},receiveSubscriptions:function receiveSubscriptions(newSubscriptions){newSubscriptions=map(newSubscriptions,function(sub){return{ID:sub.ID,slug:sub.slug.toLowerCase()}});newSubscriptions.sort(sortSubscriptions);if(!isEqual(newSubscriptions,subscriptions)){subscriptions=newSubscriptions;TagSubscriptionStore.emit("change")}},receiveFollowComplete:function receiveFollowComplete(tagId){var tag=find(subscriptions,{ID:tagId});if(tag){TagSubscriptionStore.emit("add",tag)}},receiveFollowTag:function receiveFollowTag(newTag){if(subscriptions===null){subscriptions=[]}subscriptions.push({ID:"pending",slug:newTag.slug.toLowerCase()});subscriptions.sort(sortSubscriptions);TagSubscriptionStore.emit("change")},receiveUnfollowTag:function receiveUnfollowTag(slug){var newSubscriptions=reject(subscriptions,{slug:slug});if(newSubscriptions.length!==subscriptions.length){subscriptions=newSubscriptions;TagSubscriptionStore.emit("change")}}};emitter(TagSubscriptionStore);TagSubscriptionStore.dispatchToken=Dispatcher.register(function(payload){var action=payload.action;if(!action){return}Dispatcher.waitFor([TagStore.dispatchToken]);switch(action.type){case"FOLLOW_READER_TAG":TagSubscriptionStore.receiveFollowTag(action.data);break;case"UNFOLLOW_READER_TAG":TagSubscriptionStore.receiveUnfollowTag(action.data.slug);break;case"RECEIVE_READER_TAG_SUBSCRIPTIONS":case"RECEIVE_UNFOLLOW_READER_TAG":if(action.error){return}TagSubscriptionStore.receiveSubscriptions(action.data.tags);break;case"RECEIVE_FOLLOW_READER_TAG":if(action.error){TagSubscriptionStore.receiveUnfollowTag(action.newSlug);return}TagSubscriptionStore.receiveSubscriptions(action.data.tags);TagSubscriptionStore.receiveFollowComplete(action.data.added_tag);break}});module.exports=TagSubscriptionStore},1088:function(module,exports,__webpack_require__){"use strict";var forOwn=__webpack_require__(704);var decodeEntities=__webpack_require__(287).decodeEntities,dispatcher=__webpack_require__(30),emitter=__webpack_require__(10);var tags={};var TagStore={get:function get(slug){return tags[slug]}};emitter(TagStore);function receiveTags(newTags){forOwn(newTags,function(sub){sub.URL="/tag/"+sub.slug+"/";sub.title=decodeEntities(sub.title);sub.slug=sub.slug.toLowerCase();tags[sub.slug]=sub});TagStore.emit("change")}function markPending(slug){var tag=tags[slug];if(!tag){tag={slug:slug,title:slug,ID:null,_state:"pending"};tags[slug]=tag;TagStore.emit("change")}}TagStore.dispatchToken=dispatcher.register(function(payload){var action=payload.action;if(!action||action.error){return}switch(action.type){case"FOLLOW_READER_TAG":markPending(action.slug);break;case"RECEIVE_READER_TAG":if(action.data&&action.data.tag){receiveTags([action.data.tag])}break;case"RECEIVE_READER_TAG_SUBSCRIPTIONS":case"RECEIVE_UNFOLLOW_READER_TAG":case"RECEIVE_FOLLOW_READER_TAG":if(action.data&&action.data.tags){receiveTags(action.data.tags)}break}});module.exports=TagStore},1150:function(module,exports,__webpack_require__){"use strict";var DiscoverHelper=__webpack_require__(819);module.exports={shouldShowComments:function shouldShowComments(post){var showComments=false,isDiscoverPost=DiscoverHelper.isDiscoverPost(post);if(isDiscoverPost){if(DiscoverHelper.isInternalDiscoverPost(post)&&!DiscoverHelper.isDiscoverSitePick(post)){showComments=true}}else if(!post.is_jetpack&&post.discussion&&(post.discussion.comments_open||post.discussion.comment_count>0)){showComments=true}return showComments}}},1151:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2);var Main=__webpack_require__(679),MobileBackToSidebar=__webpack_require__(956),EmptyContent=__webpack_require__(100);var FeedError=React.createClass({displayName:"FeedError",render:function render(){return React.createElement(Main,null,React.createElement(MobileBackToSidebar,null,React.createElement("h1",null,this.props.listName)),React.createElement(EmptyContent,{title:this.translate("Sorry. We can't find that stream."),illustration:"/calypso/images/drake/drake-404.svg",illustrationWidth:500}))}});module.exports=FeedError},1152:function(module,exports,__webpack_require__){"use strict";var classnames=__webpack_require__(11),React=__webpack_require__(2),url=__webpack_require__(43);var Card=__webpack_require__(95),ReaderFollowButton=__webpack_require__(1153),resizeImageUrl=__webpack_require__(837),safeImageUrl=__webpack_require__(312),Site=__webpack_require__(177);var FeedHeader=React.createClass({displayName:"FeedHeader",getFollowerCount:function getFollowerCount(feed,site){if(feed&&feed.subscribers_count>0){return feed.subscribers_count}if(site&&site.get("subscribers_count")){return site.get("subscribers_count")}return null},render:function render(){var site=this.props.site,feed=this.props.feed,headerImage=site&&site.getIn(["options","header_image"]),headerColor=site&&site.getIn(["options","background_color"]),followerCount=this.getFollowerCount(feed,site),headerImageUrl,siteish,classes;if(headerImage&&headerImage.get("width")>300){headerImageUrl=resizeImageUrl(safeImageUrl(headerImage.get("url")),{w:600})}siteish=site&&site.toJS();if(!siteish&&feed){siteish={title:feed.name||feed.URL&&url.parse(feed.URL).hostname||feed.feed_URL&&url.parse(feed.feed_URL).hostname,
domain:feed.URL&&url.parse(feed.URL).hostname||feed.feed_URL&&url.parse(feed.feed_URL).hostname,URL:feed.feed_URL||feed.URL}}classes=classnames({"feed-header":true,"is-placeholder":!siteish});return React.createElement("div",{className:classes},React.createElement(Card,{className:"feed-header__site"},React.createElement("div",{className:"feed-header__image",style:headerColor?{backgroundColor:"#"+headerColor}:null},headerImageUrl?React.createElement("img",{src:headerImageUrl}):null),siteish?React.createElement(Site,{site:siteish,href:siteish.URL,indicator:false}):null,siteish?React.createElement("div",{className:"feed-header__follow"},React.createElement(ReaderFollowButton,{siteUrl:siteish.URL,iconSize:24,location:"blog_page"})):null),React.createElement("div",{className:"feed-header__details"},React.createElement("p",{className:"feed-header__description"},site&&site.get("description")||""),followerCount?React.createElement("small",{className:"feed-header__follow-count"}," ",this.translate("%s follower","%s followers",{count:followerCount,args:[this.numberFormat(followerCount)]})):null))}});module.exports=FeedHeader},1153:function(module,exports,__webpack_require__){"use strict";var _extends=__webpack_require__(94)["default"];var React=__webpack_require__(2);var FollowButtonContainer=__webpack_require__(1209),stats=__webpack_require__(701);var ReaderFollowButton=React.createClass({displayName:"ReaderFollowButton",recordFollowToggle:function recordFollowToggle(isFollowing){stats.recordAction(isFollowing?"followed_blog":"unfollowed_blog");stats.recordGaEvent(isFollowing?"Clicked Follow Blog":"Clicked Unfollow Blog",this.props.location);stats[isFollowing?"recordFollow":"recordUnfollow"]()},render:function render(){return React.createElement(FollowButtonContainer,_extends({},this.props,{onFollowToggle:this.recordFollowToggle}))}});module.exports=ReaderFollowButton},1154:function(module,exports,__webpack_require__){(function(process){"use strict";var _extends=__webpack_require__(94)["default"];var React=__webpack_require__(14),assign=__webpack_require__(15),classes=__webpack_require__(52),debug=__webpack_require__(1)("calypso:reader-full-post"),moment=__webpack_require__(294),omit=__webpack_require__(81),twemoji=__webpack_require__(1181);var analytics=__webpack_require__(12),CommentButton=__webpack_require__(1066),CommentStore=__webpack_require__(902),Dialog=__webpack_require__(103),DISPLAY_TYPES=__webpack_require__(905),LikeButton=__webpack_require__(1155),PostByline=__webpack_require__(1698),PostCommentHelper=__webpack_require__(1150),PostCommentList=__webpack_require__(1674),PostOptions=__webpack_require__(1159),PostErrors=__webpack_require__(1157),PostStore=__webpack_require__(867),PostStoreActions=__webpack_require__(970),PostTeaser=__webpack_require__(1692),SiteIcon=__webpack_require__(102),SiteLink=__webpack_require__(1161),SiteState=__webpack_require__(792).state,SiteStore=__webpack_require__(838),SiteStoreActions=__webpack_require__(988),utils=__webpack_require__(1025),LikeHelper=__webpack_require__(1156),CommentStore=__webpack_require__(902),stats=__webpack_require__(701),PostExcerptLink=__webpack_require__(1158),ShareButton=__webpack_require__(1160),DiscoverHelper=__webpack_require__(819),DiscoverVisitLink=__webpack_require__(1678);var loadingPost={URL:"",title:"hi there",author:{name:"",URL:""},content:"<p>Loading...</p>",comment_count:0,date:moment().toISOString(),site_name:""},postNotFound={URL:"",title:"404: No Post Found",content:"<p>No post could be found.</p>"},errorPost={URL:"",title:"Error",content:"<p>Error Loading Post</p>"},FullPostView,FullPostDialog,FullPostContainer;function readerPageView(blogId,blogUrl,postId,isPrivate){debug("reader page view: %s (%d): %d [private:%s]",blogUrl,blogId,postId,isPrivate);var params={ref:"http://wordpress.com/",reader:1,host:blogUrl.replace(/.*?:\/\//g,""),blog:blogId,post:postId};if(isPrivate){params.priv=1}analytics.mc.bumpStatWithPageView(params)}FullPostView=React.createClass({displayName:"FullPostView",mixins:[React.addons.PureRenderMixin],componentDidMount:function componentDidMount(){this._parseEmoji()},componentDidUpdate:function componentDidUpdate(){this._parseEmoji()},scrollToComments:function scrollToComments(){if(!this.isMounted()){return}var commentListNode=React.findDOMNode(this.refs.commentList);if(commentListNode){commentListNode.scrollIntoView({behavior:"smooth"})}},handlePermalinkClick:function handlePermalinkClick(){stats.recordPermalinkClick("full_post_title")},render:function render(){var post=this.props.post,site=this.props.site,hasFeaturedImage=post&&!(post.display_type&DISPLAY_TYPES.CANONICAL_IN_CONTENT)&&post.canonical_image&&this.props.post.canonical_image.width>620,articleClasses=["reader__full-post"],postContent,shouldShowExcerptOnly=post.use_excerpt?post.use_excerpt:false,siteName=utils.siteNameFromSiteAndPost(site,post),isDiscoverPost=DiscoverHelper.isDiscoverPost(post),discoverSiteUrl,discoverSiteName;if(isDiscoverPost){discoverSiteUrl=DiscoverHelper.getSiteUrl(post);discoverSiteName=post.discover_metadata.attribution.blog_name}if(!post||post._state==="minimal"||post._state==="pending"){post=loadingPost;articleClasses.push("is-placeholder")}else if(post._state==="error"){if(post.statusCode===404){post=postNotFound}else{post=errorPost}}if(hasFeaturedImage){articleClasses.push("has-featured-image")}articleClasses=articleClasses.join(" ");if(post.use_excerpt){postContent=post.excerpt}else{postContent=post.content}return React.createElement("div",null,React.createElement("article",{className:articleClasses,id:"modal-full-post",ref:"article"},React.createElement(PostErrors,{post:post}),hasFeaturedImage?React.createElement("div",{className:"full-post__featured-image test"},React.createElement("img",{src:this.props.post.canonical_image.uri,height:this.props.post.canonical_image.height,width:this.props.post.canonical_image.width})):null,post.title?React.createElement("h1",{className:"reader__post-title",onClick:this.handlePermalinkClick},React.createElement("a",{className:"reader__post-title-link",href:post.URL,target:"_blank"},post.title)):null,React.createElement(PostByline,{post:post,site:site}),React.createElement("div",{className:"reader__full-post-content",dangerouslySetInnerHTML:{__html:postContent}}),shouldShowExcerptOnly&&!isDiscoverPost?React.createElement(PostExcerptLink,{siteName:siteName,postUrl:post.URL}):null,isDiscoverPost?React.createElement(DiscoverVisitLink,{siteName:discoverSiteName,siteUrl:discoverSiteUrl}):null,this.props.shouldShowComments?React.createElement(PostCommentList,{ref:"commentList",post:post}):null),React.createElement(PostTeaser,null))},_generateButtonClickHandler:function _generateButtonClickHandler(clickHandler){return function(event){event.preventDefault();clickHandler()}},_parseEmoji:function _parseEmoji(){twemoji.parse(React.findDOMNode(this.refs.article))}});FullPostDialog=React.createClass({displayName:"FullPostDialog",mixins:[React.addons.PureRenderMixin],componentWillMount:function componentWillMount(){classes(document.documentElement).add("detail-page-active")},componentWillUnmount:function componentWillUnmount(){classes(document.documentElement).remove("detail-page-active")},componentWillUpdate:function componentWillUpdate(nextProps){var action=nextProps.isVisible?"add":"remove";classes(document.documentElement)[action]("detail-page-open")},handleCommentButtonClick:function handleCommentButtonClick(){this.refs.fullPost.scrollToComments();stats.recordAction("click_comments");stats.recordGaEvent("Clicked Post Comment Button")},handleClose:function handleClose(action){stats.recordAction("modal_close");stats.recordGaEvent("Closed Full Post Dialog",action||"backdrop");this.props.onClose(action)},render:function render(){var post=this.props.post,site=this.props.site,shouldShowComments=false,shouldShowLikes=false,buttons=[{label:this.translate("Back",{context:"Go back in browser history"}),action:"close",isPrimary:true}],siteName,siteLink;siteName=utils.siteNameFromSiteAndPost(site,post);siteLink=this.props.suppressSiteNameLink?siteName:React.createElement(SiteLink,{post:post},siteName);if(post&&!post._state){shouldShowComments=PostCommentHelper.shouldShowComments(post);shouldShowLikes=LikeHelper.shouldShowLikes(post);buttons.push(React.createElement("div",{className:"full-post__site",key:"site-name"},React.createElement(SiteIcon,{site:site&&site.toJS(),size:24}),React.createElement("span",{className:"full-post__site-name"},siteLink)));buttons.push(React.createElement(PostOptions,{key:"post-options",post:post,site:site,onBlock:this.props.onClose}));if(shouldShowLikes){buttons.push(React.createElement(LikeButton,{key:"like-button",siteId:post.site_ID,postId:post.ID,tagName:"div",forceCounter:true}))}if(shouldShowComments){buttons.push(React.createElement(CommentButton,{key:"comment-button",commentCount:this.props.commentCount,onClick:this.handleCommentButtonClick,tagName:"div"}))}buttons.push(React.createElement(ShareButton,{post:post,position:"bottom left",tagName:"div"}))}buttons=buttons.map(function(button){if(button.action){button.additionalClassNames="action-button detail-page-"+button.action}return button});return React.createElement(Dialog,{isVisible:this.props.isVisible,buttons:buttons,baseClassName:"detail-page",onClose:this.handleClose,onClosed:this.props.onClosed},React.createElement(FullPostView,{ref:"fullPost",post:this.props.post,site:this.props.site,shouldShowComments:shouldShowComments}))}});function getPost(postKey){var post=PostStore.get(postKey);if(!post||post._state==="minimal"){PostStoreActions.fetchPost(postKey)}return post}function getSite(siteId){var site=SiteStore.get(siteId);if(!site){SiteStoreActions.fetch(siteId)}return site}FullPostContainer=React.createClass({displayName:"FullPostContainer",mixins:[React.addons.PureRenderMixin],getInitialState:function getInitialState(){return assign({isVisible:false},this.getStateFromStores())},getStateFromStores:function getStateFromStores(props){var post,site,title,commentCount;props=props||this.props;if(props.blogId){post=getPost({blogId:props.blogId,postId:props.postId})}else{post=getPost({feedId:props.feedId,postId:props.postId})}if(post&&post.title){title=post.title}else{title=this.translate("Post")}if(post&&post.site_ID&&post.ID){commentCount=CommentStore.getCommentCountForPost(post.site_ID,post.ID)}if(post&&post.site_ID&&!post.is_external){site=getSite(post.site_ID)}return{post:post,site:site,title:title,commentCount:commentCount}},attemptToSendPageView:function attemptToSendPageView(){var post=this.state.post,site=this.state.site,isNotAdmin=!(site&&site.getIn(["capabilities","manage_options"],false));if(!this.hasSentPageView&&post&&site&&site.get("state")===SiteState.COMPLETE&&(site.get("is_private")||isNotAdmin)){readerPageView(site.get("ID"),site.get("URL"),post.ID,site.get("is_private"));this.hasSentPageView=true}},componentDidMount:function componentDidMount(){PostStore.on("change",this._onChange);CommentStore.on("change",this._onChange);SiteStore.on("change",this._onChange);this.hasSentPageView=false;this.attemptToSendPageView();process.nextTick(function(){this.setState({isVisible:true})}.bind(this))},componentWillReceiveProps:function componentWillReceiveProps(nextProps){this.setState(this.getStateFromStores(nextProps))},componentDidUpdate:function componentDidUpdate(prevProps){if(prevProps.postId!==this.props.postId||prevProps.feedId!==this.props.feedId||prevProps.blogId!==this.props.blogId){this.hasSentPageView=false;this.attemptToSendPageView()}},componentWillUnmount:function componentWillUnmount(){PostStore.off("change",this._onChange);CommentStore.off("change",this._onChange);SiteStore.off("change",this._onChange)},_onChange:function _onChange(){var newState=this.getStateFromStores();if(newState.post!==this.state.post||newState.site!==this.state.site||newState.title!==this.state.title){this.setState(newState);this.attemptToSendPageView()}},render:function render(){var passedProps=omit(this.props,["postId","feedId"]);if(this.props.setPageTitle&&this.state.isVisible){this.props.setPageTitle(this.state.title)}return React.createElement(FullPostDialog,_extends({},passedProps,{isVisible:this.state.isVisible,post:this.state.post,commentCount:this.state.commentCount,site:this.state.site}))}});module.exports=FullPostContainer}).call(exports,__webpack_require__(284))},1155:function(module,exports,__webpack_require__){"use strict";var _extends=__webpack_require__(94)["default"];var React=__webpack_require__(2);var LikeButtonContainer=__webpack_require__(1218),stats=__webpack_require__(701);var ReaderLikeButton=React.createClass({displayName:"ReaderLikeButton",recordLikeToggle:function recordLikeToggle(liked){stats.recordAction(liked?"liked_post":"unliked_post");stats.recordGaEvent(liked?"Clicked Like Post":"Clicked Unlike Post")},render:function render(){return React.createElement(LikeButtonContainer,_extends({},this.props,{onLikeToggle:this.recordLikeToggle}))}});module.exports=ReaderLikeButton},1156:function(module,exports,__webpack_require__){"use strict";var DiscoverHelper=__webpack_require__(819);module.exports={shouldShowLikes:function shouldShowLikes(post){var showLikes=false,isDiscoverPost=DiscoverHelper.isDiscoverPost(post);if(isDiscoverPost){if(DiscoverHelper.isInternalDiscoverPost(post)&&!DiscoverHelper.isDiscoverSitePick(post)){showLikes=true}}else if(post&&post.site_ID&&!post.is_external){showLikes=true}return showLikes}}},1157:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2),shallowEqual=__webpack_require__(185),debug=__webpack_require__(1)("calypso:reader:post-options-error");var FeedSubscriptionStore=__webpack_require__(872),FeedSubscriptionActions=__webpack_require__(913),FeedSubscriptionStoreErrorTypes=__webpack_require__(836).error,Notice=__webpack_require__(156),SiteBlockStore=__webpack_require__(1085),SiteBlockActions=__webpack_require__(985),SiteBlockStoreErrorTypes=__webpack_require__(873).error,stats=__webpack_require__(701);var PostErrors=React.createClass({displayName:"PostErrors",propTypes:{post:React.PropTypes.object.isRequired},getInitialState:function getInitialState(){return this.getStateFromStores()},componentDidMount:function componentDidMount(){SiteBlockStore.on("change",this.updateState);FeedSubscriptionStore.on("change",this.updateState)},componentWillUnmount:function componentWillUnmount(){SiteBlockStore.off("change",this.updateState);FeedSubscriptionStore.off("change",this.updateState)},getStateFromStores:function getStateFromStores(){return{blockError:SiteBlockStore.getLastErrorBySite(this.props.post.site_ID),followError:FeedSubscriptionStore.getLastErrorBySiteUrl(this.props.post.site_URL)}},updateState:function updateState(){var newState=this.getStateFromStores();if(!shallowEqual(newState,this.state)){this.setState(this.getStateFromStores())}},render:function render(){var post=this.props.post,errors=[];if(this.state.followError){errors.push(React.createElement(PostError,{key:"followError"+post.ID,error:this.state.followError}))}if(this.state.blockError){errors.push(React.createElement(PostError,{key:"blockError"+post.ID,error:this.state.blockError}))}if(errors.length<1){return null}return React.createElement("div",{className:"reader-post-errors"},errors)}});var PostError=React.createClass({displayName:"PostError",propTypes:{error:React.PropTypes.object.isRequired},getMessage:function getMessage(errorType){var message;debug(errorType);debug(SiteBlockStoreErrorTypes);switch(errorType){case SiteBlockStoreErrorTypes.UNABLE_TO_BLOCK:message=this.translate("Sorry, we couldn't block this site. Please try again in a while.");break;case FeedSubscriptionStoreErrorTypes.UNABLE_TO_FOLLOW:message=this.translate("Sorry, we couldn't follow this site. Please try again in a while.");break;case FeedSubscriptionStoreErrorTypes.UNABLE_TO_UNFOLLOW:message=this.translate("Sorry, we couldn't unfollow this site. Please try again in a while.");break}return message},dismissError:function dismissError(event){var error=this.props.error;event.preventDefault();if(error.errorType===FeedSubscriptionStoreErrorTypes.UNABLE_TO_FOLLOW||error.errorType===FeedSubscriptionStoreErrorTypes.UNABLE_TO_UNFOLLOW){FeedSubscriptionActions.dismissError(error);stats.recordAction("dismiss_follow_error");stats.recordGaEvent("Clicked Dismiss Follow Error")}else if(error.errorType===SiteBlockStoreErrorTypes.UNABLE_TO_BLOCK){SiteBlockActions.dismissError(error);stats.recordAction("dismiss_block_error");stats.recordGaEvent("Clicked Dismiss Block Error")}},render:function render(){var error=this.props.error,message=this.getMessage(error.errorType);if(!message){return null}return React.createElement(Notice,{text:message,className:"reader-post-errors__notice",raw:{onRemoveCallback:this.dismissError},status:"is-error"})}});module.exports=PostErrors},1158:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2),classnames=__webpack_require__(11);var stats=__webpack_require__(701);var PostExcerptOnly=React.createClass({displayName:"PostExcerptOnly",propTypes:{siteName:React.PropTypes.string,postUrl:React.PropTypes.string},getInitialState:function getInitialState(){return{isShowingNotice:false}},toggleNotice:function toggleNotice(event){event.preventDefault();this.setState({isShowingNotice:!this.state.isShowingNotice})},recordClick:function recordClick(){stats.recordPermalinkClick("summary_card_site_name");stats.recordGaEvent("Clicked Excerpt Notice Permalink")},render:function render(){var siteName=React.createElement("a",{onClick:this.recordClick,href:this.props.postUrl,rel:"external",target:"_blank"},React.createElement("span",{className:"post-excerpt-only-site-name"},this.props.siteName||"(untitled)")),classes=classnames({"post-excerpt-link":true,"is-showing-notice":this.state.isShowingNotice});if(!this.props.siteName||!this.props.postUrl){return null}return React.createElement("div",{className:classes},this.translate("Visit {{siteName/}} for the full post",{components:{siteName:siteName}}),React.createElement("svg",{onClick:this.toggleNotice,className:"gridicon gridicon__help ignore-click",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","enable-background":"new 0 0 24 24"},React.createElement("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm1 15h-2v-2h2v2zm2.003-6.41c-.23.36-.6.704-1.108 1.028-.43.28-.7.482-.808.61-.108.13-.163.283-.163.46V13H11.04v-.528c0-.4.08-.74.245-1.017.163-.276.454-.546.872-.808.332-.21.57-.397.716-.565.145-.168.217-.36.217-.577 0-.172-.077-.308-.233-.41-.156-.1-.358-.15-.608-.15-.62 0-1.342.22-2.17.658l-.854-1.67c1.02-.58 2.084-.872 3.194-.872.913 0 1.63.202 2.15.603.52.4.78.948.78 1.64 0 .495-.116.924-.347 1.286z"})),React.createElement("p",{className:"post-excerpt-link__helper"},this.translate("The owner of this site only allows us to show a brief summary of their content. To view the full post, you'll have to visit their site.")))}});module.exports=PostExcerptOnly},1159:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(14),noop=__webpack_require__(35),page=__webpack_require__(13);var PopoverMenu=__webpack_require__(734),PopoverMenuItem=__webpack_require__(724),FeedSubscriptionStore=__webpack_require__(872),SiteStore=__webpack_require__(838),SiteBlockStore=__webpack_require__(1085),SiteBlockActions=__webpack_require__(985),postUtils=__webpack_require__(689),FollowButton=__webpack_require__(1153),stats=__webpack_require__(701);var PostOptions=React.createClass({displayName:"PostOptions",propTypes:{post:React.PropTypes.object.isRequired,onBlock:React.PropTypes.func},getDefaultProps:function getDefaultProps(){return{onBlock:noop}},getInitialState:function getInitialState(){var state=this.getStateFromStores();state.popoverPosition="bottom left";state.showPopoverMenu=false;return state},componentDidMount:function componentDidMount(){SiteBlockStore.on("change",this.updateState);FeedSubscriptionStore.on("change",this.updateState)},componentWillUnmount:function componentWillUnmount(){SiteBlockStore.off("change",this.updateState);FeedSubscriptionStore.off("change",this.updateState)},getStateFromStores:function getStateFromStores(){var siteId=this.props.post.site_ID;return{isBlocked:SiteBlockStore.getIsBlocked(siteId),blockError:SiteBlockStore.getLastErrorBySite(siteId),followError:FeedSubscriptionStore.getLastErrorBySiteUrl(this.props.post.site_URL)}},updateState:function updateState(){this.setState(this.getStateFromStores());if(this.state.blockError||this.state.followError){this.state.showPopoverMenu=false}},blockSite:function blockSite(){stats.recordAction("blocked_blog");stats.recordGaEvent("Clicked Block Site");SiteBlockActions.block(this.props.post.site_ID);this.props.onBlock()},visitSite:function visitSite(){if(!this.props.post||!this.props.post.URL){return}stats.recordPermalinkClick("post_options_menu");stats.recordGaEvent("Clicked Visit Site","post_options");window.open(this.props.post.URL,"_blank")},reportPost:function reportPost(){if(!this.props.post||!this.props.post.URL){return}stats.recordAction("report_post");stats.recordGaEvent("Clicked Report Post","post_options");window.open("https://wordpress.com/abuse/?report_url="+encodeURIComponent(this.props.post.URL),"_blank")},_showPopoverMenu:function _showPopoverMenu(){var newState=!this.state.showPopoverMenu;this.setState({showPopover:false,showPopoverMenu:newState});stats.recordAction(newState?"open_post_options_menu":"close_post_options_menu");stats.recordGaEvent(newState?"Open Post Options Menu":"Close Post Options Menu")},_closePopoverMenu:function _closePopoverMenu(){if(this.isMounted()){this.setState({showPopoverMenu:false})}},editPost:function editPost(closeMenu){var post=this.props.post,editUrl="//wordpress.com/post/"+post.site_ID+"/"+post.ID+"/",site=SiteStore.get(this.props.post.site_ID);closeMenu();if(site&&site.get("slug")){editUrl=postUtils.getEditURL(post,site.toJS())}stats.recordAction("edit_post");stats.recordGaEvent("Clicked Edit Post","post_options");setTimeout(function(){if(editUrl.indexOf("//")===0){window.location.href=editUrl}else{page(editUrl)}},100)},render:function render(){var post=this.props.post,triggerClasses=["post-options__trigger","ignore-click"],isBlockPossible=false,isEditPossible=postUtils.userCan("edit_post",post);if(this.state.showPopoverMenu){triggerClasses.push("is-triggered")}triggerClasses=triggerClasses.join(" ");if(post.site_ID&&!post.is_external&&!post.is_jetpack&&!isEditPossible){isBlockPossible=true}return React.createElement("span",{className:"post-options"},React.createElement("span",{className:triggerClasses,ref:"popoverMenuButton",onClick:this._showPopoverMenu},React.createElement("svg",{className:"gridicon gridicon__ellipsis",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("circle",{cx:"5",cy:"12",r:"2"}),React.createElement("circle",{cx:"19",cy:"12",r:"2"}),React.createElement("circle",{cx:"12",cy:"12",r:"2"}))),React.createElement("span",{className:"post-options__label"},this.translate("More"))),React.createElement(PopoverMenu,{isVisible:this.state.showPopoverMenu,onClose:this._closePopoverMenu,position:this.state.popoverPosition,context:this.refs&&this.refs.popoverMenuButton},React.createElement(FollowButton,{tagName:PopoverMenuItem,siteUrl:post.site_URL}),isEditPossible?React.createElement(PopoverMenuItem,{onClick:this.editPost,className:"post-options__edit has-icon"},React.createElement("svg",{className:"gridicon gridicon__edit",height:"20",width:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("path",{d:"M4 15v5h5l9-9-5-5-9 9zM16 3l-2 2 5 5 2-2-5-5z"}))),this.translate("Edit Post")):null,post.URL?React.createElement(PopoverMenuItem,{onClick:this.visitSite,className:"post-options__view has-icon"},React.createElement("svg",{className:"gridicon gridicon__link",height:"20",width:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("path",{d:"M6 12c0 .553.447 1 1 1h10c.553 0 1-.447 1-1s-.447-1-1-1H7c-.553 0-1 .447-1 1zm11-5h-2c-.553 0-1 .447-1 1 0 .553.447 1 1 1h2c1.657 0 3 1.343 3 3s-1.343 3-3 3h-2c-.553 0-1 .447-1 1s.447 1 1 1h2c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-8 8H7c-1.657 0-3-1.343-3-3s1.343-3 3-3h2c.553 0 1-.447 1-1 0-.553-.447-1-1-1H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h2c.553 0 1-.447 1-1s-.447-1-1-1z"}))),this.translate("Visit Site")):null,isBlockPossible?React.createElement("hr",{className:"post-options__hr"}):null,isBlockPossible?React.createElement(PopoverMenuItem,{onClick:this.blockSite},this.translate("Block Site")):null,isBlockPossible?React.createElement(PopoverMenuItem,{onClick:this.reportPost},this.translate("Report this Post")):null))}});module.exports=PostOptions},1160:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2),url=__webpack_require__(43),config=__webpack_require__(4),classnames=__webpack_require__(11);var PopoverMenu=__webpack_require__(734),PopoverMenuItem=__webpack_require__(724),Gridicon=__webpack_require__(281),sitesList=__webpack_require__(23)(),stats=__webpack_require__(701);var actionMap={twitter:function twitter(post){var twitterUrl={scheme:"https",hostname:"twitter.com",pathname:"/intent/tweet",query:{text:post.title,url:post.URL,via:"wordpressdotcom"}};twitterUrl=url.format(twitterUrl);window.open(twitterUrl,"twitter","width=550,height=420,resizeable,scrollbars")},facebook:function facebook(post){var fackbookUrl={scheme:"https",hostname:"www.facebook.com",pathname:"/sharer.php",query:{u:post.URL,app_id:config("facebook_api_key")}};fackbookUrl=url.format(fackbookUrl);window.open(fackbookUrl,"facebook","width=626,height=436,resizeable,scrollbars")},pressThis:function pressThis(post){var primarySite=sitesList.getPrimary(),wordpressUrl;if(!primarySite){return}if(primarySite.wpcom_url&&!primarySite.jetpack){wordpressUrl=url.parse("https://"+primarySite.wpcom_url+"/wp-admin/press-this.php")}else{wordpressUrl=url.parse(url.resolve(primarySite.URL,"wp-admin/press-this.php"))}delete wordpressUrl.search;wordpressUrl.query={u:post.URL,t:post.title};wordpressUrl=url.format(wordpressUrl);window.open(wordpressUrl,"pressThis","width=626,height=436,resizeable,scrollbars")}};var twitterIcon=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"171.5054",height:"139.37839",viewBox:"0 0 171.5054 139.37839",version:"1.1",className:"gridicon gridicons-twitter"},React.createElement("g",{transform:"translate(-282.32053,-396.30734)"},React.createElement("path",{d:"m 453.82593,412.80619 c -6.3097,2.79897 -13.09189,4.68982 -20.20852,5.54049 7.26413,-4.35454 12.84406,-11.24992 15.47067,-19.46675 -6.79934,4.03295 -14.3293,6.96055 -22.34461,8.53841 -6.41775,-6.83879 -15.56243,-11.111 -25.68298,-11.111 -19.43159,0 -35.18696,15.75365 -35.18696,35.18525 0,2.75781 0.31128,5.44359 0.91155,8.01875 -29.24344,-1.46723 -55.16995,-15.47582 -72.52461,-36.76396 -3.02879,5.19662 -4.76443,11.24048 -4.76443,17.6891 0,12.20777 6.21194,22.97747 15.65332,29.28716 -5.76773,-0.18265 -11.19331,-1.76565 -15.93716,-4.40083 -0.004,0.14663 -0.004,0.29412 -0.004,0.44248 0,17.04767 12.12889,31.26806 28.22555,34.50266 -2.95247,0.80436 -6.06101,1.23398 -9.26989,1.23398 -2.2673,0 -4.47114,-0.22124 -6.62011,-0.63114 4.47801,13.97857 17.47214,24.15143 32.86992,24.43441 -12.04227,9.43796 -27.21366,15.06335 -43.69965,15.06335 -2.84014,0 -5.64082,-0.16722 -8.39349,-0.49223 15.57186,9.98421 34.06703,15.8094 53.93768,15.8094 64.72024,0 100.11301,-53.61524 100.11301,-100.11387 0,-1.52554 -0.0343,-3.04251 -0.10204,-4.55261 6.87394,-4.95995 12.83891,-11.15646 17.55618,-18.21305 z"}))),facebookIcon=React.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"266.893px",height:"266.895px",viewBox:"0 0 266.893 266.895","enable-background":"new 0 0 266.893 266.895",className:"gridicon gridicons-facebook"},React.createElement("path",{className:"facebook-background",fill:"#3C5A99",d:"M248.082,262.307c7.854,0,14.223-6.369,14.223-14.225V18.812 c0-7.857-6.368-14.224-14.223-14.224H18.812c-7.857,0-14.224,6.367-14.224,14.224v229.27c0,7.855,6.366,14.225,14.224,14.225 H248.082z"}),React.createElement("path",{className:"facebook-f",fill:"#FFFFFF",d:"M182.409,262.307v-99.803h33.499l5.016-38.895h-38.515V98.777c0-11.261,3.127-18.935,19.275-18.935 l20.596-0.009V45.045c-3.562-0.474-15.788-1.533-30.012-1.533c-29.695,0-50.025,18.126-50.025,51.413v28.684h-33.585v38.895h33.585 v99.803H182.409z"}));var ReaderShare=React.createClass({displayName:"ReaderShare",getInitialState:function getInitialState(){return{showingMenu:false}},getDefaultProps:function getDefaultProps(){return{position:"top right",tagName:"li"}},toggle:function toggle(){this.setState({showingMenu:!this.state.showingMenu})},closeMenu:function closeMenu(action){var actionFunc=actionMap[action];if(actionFunc){stats.recordAction("share_"+action);stats.recordGaEvent("Clicked on Share to "+action);actionFunc(this.props.post)}this.setState({showingMenu:false})},render:function render(){var canShareToWordpress=!!sitesList.getPrimary(),buttonClasses=classnames({"reader-share_button":true,"ignore-click":true,"is-active":this.state.showingMenu});if(!config.isEnabled("reader/share")){return null}return React.createElement(this.props.tagName,{className:"reader-share"},[React.createElement("span",{key:"button",ref:"shareButton",className:buttonClasses,onTouchTap:this.toggle},this.translate("Share",{comment:"Share the post"})),React.createElement(PopoverMenu,{key:"menu",context:this.refs&&this.refs.shareButton,isVisible:this.state.showingMenu,onClose:this.closeMenu,position:this.props.position},canShareToWordpress?React.createElement(PopoverMenuItem,{action:"pressThis",className:"reader-share__popover-item"},React.createElement(Gridicon,{icon:"my-sites",size:24})," WordPress"):null,React.createElement(PopoverMenuItem,{action:"twitter",className:"reader-share__popover-item"},twitterIcon," Twitter"),React.createElement(PopoverMenuItem,{action:"facebook",className:"reader-share__popover-item"},facebookIcon," Facebook"))])}});module.exports=ReaderShare},1161:function(module,exports,__webpack_require__){"use strict";var _extends=__webpack_require__(94)["default"];var React=__webpack_require__(2);var stats=__webpack_require__(701);var SiteLink=React.createClass({displayName:"SiteLink",recordClick:function recordClick(){stats.recordAction("visit_blog_feed");stats.recordGaEvent("Clicked Feed Link")},render:function render(){var post=this.props.post,link;if(post.feed_ID){link="/read/blog/feed/"+post.feed_ID}else if(post.site_ID&&!post.is_external){link="/read/blog/id/"+post.site_ID}return React.createElement("a",_extends({},this.props,{href:link,onClick:this.recordClick}),this.props.children)}});module.exports=SiteLink},1162:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2),classnames=__webpack_require__(11);var Card=__webpack_require__(95),FollowButton=__webpack_require__(948),editIcon=React.createElement("svg",{key:"edit-icon",className:"gridicon gridicon-cog stream-header__action-icon",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("path",{d:"M21 14.978l-2.396-2.13v-.798c0-.266 0-.532-.133-.8l2.397-2.128-.532-1.464-3.195.266c-.266-.4-.665-.8-1.065-1.065l.266-3.195L14.88 3l-2.13 2.53c-.265-.134-.53-.134-.798-.134-.266 0-.532 0-.8.133L9.023 3l-1.33.665.265 3.195c-.532.266-.93.665-1.197 1.064L3.565 7.79 2.9 9.123l2.396 2.13v.798c0 .266 0 .532.133.8l-2.397 2.128.665 1.464 3.194-.266c.266.4.665.8 1.065 1.065l-.266 3.195 1.465.665 2.13-2.396h.664c.265 0 .53 0 .798-.133l2.13 2.397 1.463-.532-.265-3.194c.4-.265.8-.664 1.065-1.064l3.194.266.666-1.464zm-6.388-2.928c0 1.464-1.198 2.662-2.662 2.662s-2.662-1.198-2.662-2.662 1.198-2.662 2.662-2.662 2.662 1.198 2.662 2.662z"
})));var StreamHeader=React.createClass({displayName:"StreamHeader",propTypes:{isPlaceholder:React.PropTypes.bool,title:React.PropTypes.string,description:React.PropTypes.string,showFollow:React.PropTypes.bool,showEdit:React.PropTypes.bool,editUrl:React.PropTypes.string,following:React.PropTypes.bool,onFollowToggle:React.PropTypes.func},render:function render(){var classes=classnames({"stream-header":true,"is-placeholder":this.props.isPlaceholder,"has-icon":this.props.icon,"has-description":this.props.description});return React.createElement(Card,{className:classes},this.props.icon?React.createElement("span",{className:"stream-header__icon"},this.props.icon):null,React.createElement("h1",{className:"stream-header__title"},this.props.title),this.props.description?React.createElement("p",{className:"stream-header__description"},this.props.description):null,this.props.showFollow?React.createElement("div",{className:"stream-header__follow"},React.createElement(FollowButton,{iconSize:24,following:this.props.following,onFollowToggle:this.props.onFollowToggle})):null,this.props.showEdit&&this.props.editUrl?React.createElement("div",{className:"stream-header__edit"},React.createElement("a",{href:this.props.editUrl,rel:"external"},editIcon,React.createElement("span",{className:"stream-header__action-label"},this.translate("Edit")))):null)}});module.exports=StreamHeader},1175:function(module,exports,__webpack_require__){var baseEachRight=__webpack_require__(1830),createFind=__webpack_require__(346);var findLast=createFind(baseEachRight,true);module.exports=findLast},1181:function(module,exports){(function(global){var location=global.location||{};var twemoji=function(){"use strict";var twemoji={base:(location.protocol==="https:"?"https:":"http:")+"//twemoji.maxcdn.com/",ext:".png",size:"36x36",className:"emoji",convert:{fromCodePoint:fromCodePoint,toCodePoint:toCodePoint},onerror:function onerror(){if(this.parentNode){this.parentNode.replaceChild(createText(this.alt),this)}},parse:parse,replace:replace,test:test},re=/((?:\ud83c\udde8\ud83c\uddf3|\ud83c\uddfa\ud83c\uddf8|\ud83c\uddf7\ud83c\uddfa|\ud83c\uddf0\ud83c\uddf7|\ud83c\uddef\ud83c\uddf5|\ud83c\uddee\ud83c\uddf9|\ud83c\uddec\ud83c\udde7|\ud83c\uddeb\ud83c\uddf7|\ud83c\uddea\ud83c\uddf8|\ud83c\udde9\ud83c\uddea|\u0039\ufe0f?\u20e3|\u0038\ufe0f?\u20e3|\u0037\ufe0f?\u20e3|\u0036\ufe0f?\u20e3|\u0035\ufe0f?\u20e3|\u0034\ufe0f?\u20e3|\u0033\ufe0f?\u20e3|\u0032\ufe0f?\u20e3|\u0031\ufe0f?\u20e3|\u0030\ufe0f?\u20e3|\u0023\ufe0f?\u20e3|\ud83d\udeb3|\ud83d\udeb1|\ud83d\udeb0|\ud83d\udeaf|\ud83d\udeae|\ud83d\udea6|\ud83d\udea3|\ud83d\udea1|\ud83d\udea0|\ud83d\ude9f|\ud83d\ude9e|\ud83d\ude9d|\ud83d\ude9c|\ud83d\ude9b|\ud83d\ude98|\ud83d\ude96|\ud83d\ude94|\ud83d\ude90|\ud83d\ude8e|\ud83d\ude8d|\ud83d\ude8b|\ud83d\ude8a|\ud83d\ude88|\ud83d\ude86|\ud83d\ude82|\ud83d\ude81|\ud83d\ude36|\ud83d\ude34|\ud83d\ude2f|\ud83d\ude2e|\ud83d\ude2c|\ud83d\ude27|\ud83d\ude26|\ud83d\ude1f|\ud83d\ude1b|\ud83d\ude19|\ud83d\ude17|\ud83d\ude15|\ud83d\ude11|\ud83d\ude10|\ud83d\ude0e|\ud83d\ude08|\ud83d\ude07|\ud83d\ude00|\ud83d\udd67|\ud83d\udd66|\ud83d\udd65|\ud83d\udd64|\ud83d\udd63|\ud83d\udd62|\ud83d\udd61|\ud83d\udd60|\ud83d\udd5f|\ud83d\udd5e|\ud83d\udd5d|\ud83d\udd5c|\ud83d\udd2d|\ud83d\udd2c|\ud83d\udd15|\ud83d\udd09|\ud83d\udd08|\ud83d\udd07|\ud83d\udd06|\ud83d\udd05|\ud83d\udd04|\ud83d\udd02|\ud83d\udd01|\ud83d\udd00|\ud83d\udcf5|\ud83d\udcef|\ud83d\udced|\ud83d\udcec|\ud83d\udcb7|\ud83d\udcb6|\ud83d\udcad|\ud83d\udc6d|\ud83d\udc6c|\ud83d\udc65|\ud83d\udc2a|\ud83d\udc16|\ud83d\udc15|\ud83d\udc13|\ud83d\udc10|\ud83d\udc0f|\ud83d\udc0b|\ud83d\udc0a|\ud83d\udc09|\ud83d\udc08|\ud83d\udc07|\ud83d\udc06|\ud83d\udc05|\ud83d\udc04|\ud83d\udc03|\ud83d\udc02|\ud83d\udc01|\ud83d\udc00|\ud83c\udfe4|\ud83c\udfc9|\ud83c\udfc7|\ud83c\udf7c|\ud83c\udf50|\ud83c\udf4b|\ud83c\udf33|\ud83c\udf32|\ud83c\udf1e|\ud83c\udf1d|\ud83c\udf1c|\ud83c\udf1a|\ud83c\udf18|\ud83c\udccf|\ud83c\udd70|\ud83c\udd71|\ud83c\udd7e|\ud83c\udd8e|\ud83c\udd91|\ud83c\udd92|\ud83c\udd93|\ud83c\udd94|\ud83c\udd95|\ud83c\udd96|\ud83c\udd97|\ud83c\udd98|\ud83c\udd99|\ud83c\udd9a|\ud83d\udc77|\ud83d\udec5|\ud83d\udec4|\ud83d\udec3|\ud83d\udec2|\ud83d\udec1|\ud83d\udebf|\ud83d\udeb8|\ud83d\udeb7|\ud83d\udeb5|\ud83c\ude01|\ud83c\ude02|\ud83c\ude32|\ud83c\ude33|\ud83c\ude34|\ud83c\ude35|\ud83c\ude36|\ud83c\ude37|\ud83c\ude38|\ud83c\ude39|\ud83c\ude3a|\ud83c\ude50|\ud83c\ude51|\ud83c\udf00|\ud83c\udf01|\ud83c\udf02|\ud83c\udf03|\ud83c\udf04|\ud83c\udf05|\ud83c\udf06|\ud83c\udf07|\ud83c\udf08|\ud83c\udf09|\ud83c\udf0a|\ud83c\udf0b|\ud83c\udf0c|\ud83c\udf0f|\ud83c\udf11|\ud83c\udf13|\ud83c\udf14|\ud83c\udf15|\ud83c\udf19|\ud83c\udf1b|\ud83c\udf1f|\ud83c\udf20|\ud83c\udf30|\ud83c\udf31|\ud83c\udf34|\ud83c\udf35|\ud83c\udf37|\ud83c\udf38|\ud83c\udf39|\ud83c\udf3a|\ud83c\udf3b|\ud83c\udf3c|\ud83c\udf3d|\ud83c\udf3e|\ud83c\udf3f|\ud83c\udf40|\ud83c\udf41|\ud83c\udf42|\ud83c\udf43|\ud83c\udf44|\ud83c\udf45|\ud83c\udf46|\ud83c\udf47|\ud83c\udf48|\ud83c\udf49|\ud83c\udf4a|\ud83c\udf4c|\ud83c\udf4d|\ud83c\udf4e|\ud83c\udf4f|\ud83c\udf51|\ud83c\udf52|\ud83c\udf53|\ud83c\udf54|\ud83c\udf55|\ud83c\udf56|\ud83c\udf57|\ud83c\udf58|\ud83c\udf59|\ud83c\udf5a|\ud83c\udf5b|\ud83c\udf5c|\ud83c\udf5d|\ud83c\udf5e|\ud83c\udf5f|\ud83c\udf60|\ud83c\udf61|\ud83c\udf62|\ud83c\udf63|\ud83c\udf64|\ud83c\udf65|\ud83c\udf66|\ud83c\udf67|\ud83c\udf68|\ud83c\udf69|\ud83c\udf6a|\ud83c\udf6b|\ud83c\udf6c|\ud83c\udf6d|\ud83c\udf6e|\ud83c\udf6f|\ud83c\udf70|\ud83c\udf71|\ud83c\udf72|\ud83c\udf73|\ud83c\udf74|\ud83c\udf75|\ud83c\udf76|\ud83c\udf77|\ud83c\udf78|\ud83c\udf79|\ud83c\udf7a|\ud83c\udf7b|\ud83c\udf80|\ud83c\udf81|\ud83c\udf82|\ud83c\udf83|\ud83c\udf84|\ud83c\udf85|\ud83c\udf86|\ud83c\udf87|\ud83c\udf88|\ud83c\udf89|\ud83c\udf8a|\ud83c\udf8b|\ud83c\udf8c|\ud83c\udf8d|\ud83c\udf8e|\ud83c\udf8f|\ud83c\udf90|\ud83c\udf91|\ud83c\udf92|\ud83c\udf93|\ud83c\udfa0|\ud83c\udfa1|\ud83c\udfa2|\ud83c\udfa3|\ud83c\udfa4|\ud83c\udfa5|\ud83c\udfa6|\ud83c\udfa7|\ud83c\udfa8|\ud83c\udfa9|\ud83c\udfaa|\ud83c\udfab|\ud83c\udfac|\ud83c\udfad|\ud83c\udfae|\ud83c\udfaf|\ud83c\udfb0|\ud83c\udfb1|\ud83c\udfb2|\ud83c\udfb3|\ud83c\udfb4|\ud83c\udfb5|\ud83c\udfb6|\ud83c\udfb7|\ud83c\udfb8|\ud83c\udfb9|\ud83c\udfba|\ud83c\udfbb|\ud83c\udfbc|\ud83c\udfbd|\ud83c\udfbe|\ud83c\udfbf|\ud83c\udfc0|\ud83c\udfc1|\ud83c\udfc2|\ud83c\udfc3|\ud83c\udfc4|\ud83c\udfc6|\ud83c\udfc8|\ud83c\udfca|\ud83c\udfe0|\ud83c\udfe1|\ud83c\udfe2|\ud83c\udfe3|\ud83c\udfe5|\ud83c\udfe6|\ud83c\udfe7|\ud83c\udfe8|\ud83c\udfe9|\ud83c\udfea|\ud83c\udfeb|\ud83c\udfec|\ud83c\udfed|\ud83c\udfee|\ud83c\udfef|\ud83c\udff0|\ud83d\udc0c|\ud83d\udc0d|\ud83d\udc0e|\ud83d\udc11|\ud83d\udc12|\ud83d\udc14|\ud83d\udc17|\ud83d\udc18|\ud83d\udc19|\ud83d\udc1a|\ud83d\udc1b|\ud83d\udc1c|\ud83d\udc1d|\ud83d\udc1e|\ud83d\udc1f|\ud83d\udc20|\ud83d\udc21|\ud83d\udc22|\ud83d\udc23|\ud83d\udc24|\ud83d\udc25|\ud83d\udc26|\ud83d\udc27|\ud83d\udc28|\ud83d\udc29|\ud83d\udc2b|\ud83d\udc2c|\ud83d\udc2d|\ud83d\udc2e|\ud83d\udc2f|\ud83d\udc30|\ud83d\udc31|\ud83d\udc32|\ud83d\udc33|\ud83d\udc34|\ud83d\udc35|\ud83d\udc36|\ud83d\udc37|\ud83d\udc38|\ud83d\udc39|\ud83d\udc3a|\ud83d\udc3b|\ud83d\udc3c|\ud83d\udc3d|\ud83d\udc3e|\ud83d\udc40|\ud83d\udc42|\ud83d\udc43|\ud83d\udc44|\ud83d\udc45|\ud83d\udc46|\ud83d\udc47|\ud83d\udc48|\ud83d\udc49|\ud83d\udc4a|\ud83d\udc4b|\ud83d\udc4c|\ud83d\udc4d|\ud83d\udc4e|\ud83d\udc4f|\ud83d\udc50|\ud83d\udc51|\ud83d\udc52|\ud83d\udc53|\ud83d\udc54|\ud83d\udc55|\ud83d\udc56|\ud83d\udc57|\ud83d\udc58|\ud83d\udc59|\ud83d\udc5a|\ud83d\udc5b|\ud83d\udc5c|\ud83d\udc5d|\ud83d\udc5e|\ud83d\udc5f|\ud83d\udc60|\ud83d\udc61|\ud83d\udc62|\ud83d\udc63|\ud83d\udc64|\ud83d\udc66|\ud83d\udc67|\ud83d\udc68|\ud83d\udc69|\ud83d\udc6a|\ud83d\udc6b|\ud83d\udc6e|\ud83d\udc6f|\ud83d\udc70|\ud83d\udc71|\ud83d\udc72|\ud83d\udc73|\ud83d\udc74|\ud83d\udc75|\ud83d\udc76|\ud83d\udeb4|\ud83d\udc78|\ud83d\udc79|\ud83d\udc7a|\ud83d\udc7b|\ud83d\udc7c|\ud83d\udc7d|\ud83d\udc7e|\ud83d\udc7f|\ud83d\udc80|\ud83d\udc81|\ud83d\udc82|\ud83d\udc83|\ud83d\udc84|\ud83d\udc85|\ud83d\udc86|\ud83d\udc87|\ud83d\udc88|\ud83d\udc89|\ud83d\udc8a|\ud83d\udc8b|\ud83d\udc8c|\ud83d\udc8d|\ud83d\udc8e|\ud83d\udc8f|\ud83d\udc90|\ud83d\udc91|\ud83d\udc92|\ud83d\udc93|\ud83d\udc94|\ud83d\udc95|\ud83d\udc96|\ud83d\udc97|\ud83d\udc98|\ud83d\udc99|\ud83d\udc9a|\ud83d\udc9b|\ud83d\udc9c|\ud83d\udc9d|\ud83d\udc9e|\ud83d\udc9f|\ud83d\udca0|\ud83d\udca1|\ud83d\udca2|\ud83d\udca3|\ud83d\udca4|\ud83d\udca5|\ud83d\udca6|\ud83d\udca7|\ud83d\udca8|\ud83d\udca9|\ud83d\udcaa|\ud83d\udcab|\ud83d\udcac|\ud83d\udcae|\ud83d\udcaf|\ud83d\udcb0|\ud83d\udcb1|\ud83d\udcb2|\ud83d\udcb3|\ud83d\udcb4|\ud83d\udcb5|\ud83d\udcb8|\ud83d\udcb9|\ud83d\udcba|\ud83d\udcbb|\ud83d\udcbc|\ud83d\udcbd|\ud83d\udcbe|\ud83d\udcbf|\ud83d\udcc0|\ud83d\udcc1|\ud83d\udcc2|\ud83d\udcc3|\ud83d\udcc4|\ud83d\udcc5|\ud83d\udcc6|\ud83d\udcc7|\ud83d\udcc8|\ud83d\udcc9|\ud83d\udcca|\ud83d\udccb|\ud83d\udccc|\ud83d\udccd|\ud83d\udcce|\ud83d\udccf|\ud83d\udcd0|\ud83d\udcd1|\ud83d\udcd2|\ud83d\udcd3|\ud83d\udcd4|\ud83d\udcd5|\ud83d\udcd6|\ud83d\udcd7|\ud83d\udcd8|\ud83d\udcd9|\ud83d\udcda|\ud83d\udcdb|\ud83d\udcdc|\ud83d\udcdd|\ud83d\udcde|\ud83d\udcdf|\ud83d\udce0|\ud83d\udce1|\ud83d\udce2|\ud83d\udce3|\ud83d\udce4|\ud83d\udce5|\ud83d\udce6|\ud83d\udce7|\ud83d\udce8|\ud83d\udce9|\ud83d\udcea|\ud83d\udceb|\ud83d\udcee|\ud83d\udcf0|\ud83d\udcf1|\ud83d\udcf2|\ud83d\udcf3|\ud83d\udcf4|\ud83d\udcf6|\ud83d\udcf7|\ud83d\udcf9|\ud83d\udcfa|\ud83d\udcfb|\ud83d\udcfc|\ud83d\udd03|\ud83d\udd0a|\ud83d\udd0b|\ud83d\udd0c|\ud83d\udd0d|\ud83d\udd0e|\ud83d\udd0f|\ud83d\udd10|\ud83d\udd11|\ud83d\udd12|\ud83d\udd13|\ud83d\udd14|\ud83d\udd16|\ud83d\udd17|\ud83d\udd18|\ud83d\udd19|\ud83d\udd1a|\ud83d\udd1b|\ud83d\udd1c|\ud83d\udd1d|\ud83d\udd1e|\ud83d\udd1f|\ud83d\udd20|\ud83d\udd21|\ud83d\udd22|\ud83d\udd23|\ud83d\udd24|\ud83d\udd25|\ud83d\udd26|\ud83d\udd27|\ud83d\udd28|\ud83d\udd29|\ud83d\udd2a|\ud83d\udd2b|\ud83d\udd2e|\ud83d\udd2f|\ud83d\udd30|\ud83d\udd31|\ud83d\udd32|\ud83d\udd33|\ud83d\udd34|\ud83d\udd35|\ud83d\udd36|\ud83d\udd37|\ud83d\udd38|\ud83d\udd39|\ud83d\udd3a|\ud83d\udd3b|\ud83d\udd3c|\ud83d\udd3d|\ud83d\udd50|\ud83d\udd51|\ud83d\udd52|\ud83d\udd53|\ud83d\udd54|\ud83d\udd55|\ud83d\udd56|\ud83d\udd57|\ud83d\udd58|\ud83d\udd59|\ud83d\udd5a|\ud83d\udd5b|\ud83d\uddfb|\ud83d\uddfc|\ud83d\uddfd|\ud83d\uddfe|\ud83d\uddff|\ud83d\ude01|\ud83d\ude02|\ud83d\ude03|\ud83d\ude04|\ud83d\ude05|\ud83d\ude06|\ud83d\ude09|\ud83d\ude0a|\ud83d\ude0b|\ud83d\ude0c|\ud83d\ude0d|\ud83d\ude0f|\ud83d\ude12|\ud83d\ude13|\ud83d\ude14|\ud83d\ude16|\ud83d\ude18|\ud83d\ude1a|\ud83d\ude1c|\ud83d\ude1d|\ud83d\ude1e|\ud83d\ude20|\ud83d\ude21|\ud83d\ude22|\ud83d\ude23|\ud83d\ude24|\ud83d\ude25|\ud83d\ude28|\ud83d\ude29|\ud83d\ude2a|\ud83d\ude2b|\ud83d\ude2d|\ud83d\ude30|\ud83d\ude31|\ud83d\ude32|\ud83d\ude33|\ud83d\ude35|\ud83d\ude37|\ud83d\ude38|\ud83d\ude39|\ud83d\ude3a|\ud83d\ude3b|\ud83d\ude3c|\ud83d\ude3d|\ud83d\ude3e|\ud83d\ude3f|\ud83d\ude40|\ud83d\ude45|\ud83d\ude46|\ud83d\ude47|\ud83d\ude48|\ud83d\ude49|\ud83d\ude4a|\ud83d\ude4b|\ud83d\ude4c|\ud83d\ude4d|\ud83d\ude4e|\ud83d\ude4f|\ud83d\ude80|\ud83d\ude83|\ud83d\ude84|\ud83d\ude85|\ud83d\ude87|\ud83d\ude89|\ud83d\ude8c|\ud83d\ude8f|\ud83d\ude91|\ud83d\ude92|\ud83d\ude93|\ud83d\ude95|\ud83d\ude97|\ud83d\ude99|\ud83d\ude9a|\ud83d\udea2|\ud83d\udea4|\ud83d\udea5|\ud83d\udea7|\ud83d\udea8|\ud83d\udea9|\ud83d\udeaa|\ud83d\udeab|\ud83d\udeac|\ud83d\udead|\ud83d\udeb2|\ud83d\udeb6|\ud83d\udeb9|\ud83d\udeba|\ud83d\udebb|\ud83d\udebc|\ud83d\udebd|\ud83d\udebe|\ud83d\udec0|\ud83c\udde6|\ud83c\udde7|\ud83c\udde8|\ud83c\udde9|\ud83c\uddea|\ud83c\uddeb|\ud83c\uddec|\ud83c\udded|\ud83c\uddee|\ud83c\uddef|\ud83c\uddf0|\ud83c\uddf1|\ud83c\uddf2|\ud83c\uddf3|\ud83c\uddf4|\ud83c\uddf5|\ud83c\uddf6|\ud83c\uddf7|\ud83c\uddf8|\ud83c\uddf9|\ud83c\uddfa|\ud83c\uddfb|\ud83c\uddfc|\ud83c\uddfd|\ud83c\uddfe|\ud83c\uddff|\ud83c\udf0d|\ud83c\udf0e|\ud83c\udf10|\ud83c\udf12|\ud83c\udf16|\ud83c\udf17|\ue50a|\u3030|\u27b0|\u2797|\u2796|\u2795|\u2755|\u2754|\u2753|\u274e|\u274c|\u2728|\u270b|\u270a|\u2705|\u26ce|\u23f3|\u23f0|\u23ec|\u23eb|\u23ea|\u23e9|\u2122|\u27bf|\u00a9|\u00ae)|(?:(?:\ud83c\udc04|\ud83c\udd7f|\ud83c\ude1a|\ud83c\ude2f|\u3299|\u303d|\u2b55|\u2b50|\u2b1c|\u2b1b|\u2b07|\u2b06|\u2b05|\u2935|\u2934|\u27a1|\u2764|\u2757|\u2747|\u2744|\u2734|\u2733|\u2716|\u2714|\u2712|\u270f|\u270c|\u2709|\u2708|\u2702|\u26fd|\u26fa|\u26f5|\u26f3|\u26f2|\u26ea|\u26d4|\u26c5|\u26c4|\u26be|\u26bd|\u26ab|\u26aa|\u26a1|\u26a0|\u2693|\u267f|\u267b|\u3297|\u2666|\u2665|\u2663|\u2660|\u2653|\u2652|\u2651|\u2650|\u264f|\u264e|\u264d|\u264c|\u264b|\u264a|\u2649|\u2648|\u263a|\u261d|\u2615|\u2614|\u2611|\u260e|\u2601|\u2600|\u25fe|\u25fd|\u25fc|\u25fb|\u25c0|\u25b6|\u25ab|\u25aa|\u24c2|\u231b|\u231a|\u21aa|\u21a9|\u2199|\u2198|\u2197|\u2196|\u2195|\u2194|\u2139|\u2049|\u203c|\u2668)([\uFE0E\uFE0F]?)))/g,shouldntBeParsed=/IFRAME|NOFRAMES|NOSCRIPT|SCRIPT|SELECT|STYLE|TEXTAREA/,fromCharCode=String.fromCharCode;return twemoji;function createText(text){return document.createTextNode(text)}function defaultImageSrcGenerator(icon,options){return"".concat(options.base,options.size,"/",icon,options.ext)}function grabAllTextNodes(node,allText){var childNodes=node.childNodes,length=childNodes.length,subnode,nodeType;while(length--){subnode=childNodes[length];nodeType=subnode.nodeType;if(nodeType===3){allText.push(subnode)}else if(nodeType===1&&!shouldntBeParsed.test(subnode.nodeName)){grabAllTextNodes(subnode,allText)}}return allText}function grabTheRightIcon(icon,variant){return toCodePoint(variant===""?icon.slice(0,-1):icon.length===3&&icon.charAt(1)===""?icon.charAt(0)+icon.charAt(2):icon)}function parseNode(node,options){var allText=grabAllTextNodes(node,[]),length=allText.length,modified,fragment,subnode,text,match,i,index,img,alt,icon,variant,src;while(length--){modified=false;fragment=document.createDocumentFragment();subnode=allText[length];text=subnode.nodeValue;i=0;while(match=re.exec(text)){index=match.index;if(index!==i){fragment.appendChild(createText(text.slice(i,index)))}alt=match[0];icon=match[1];variant=match[2];i=index+alt.length;if(variant!==""){src=options.callback(grabTheRightIcon(icon,variant),options,variant);if(src){img=new Image;img.onerror=twemoji.onerror;img.className=options.className;img.setAttribute("draggable","false");img.alt=alt;img.src=src;modified=true;fragment.appendChild(img)}}if(!img)fragment.appendChild(createText(alt));img=null}if(modified){if(i<text.length){fragment.appendChild(createText(text.slice(i)))}subnode.parentNode.replaceChild(fragment,subnode)}}return node}function parseString(str,options){return replace(str,function(match,icon,variant){var src;if(variant!==""){src=options.callback(grabTheRightIcon(icon,variant),options,variant);if(src){match="<img ".concat('class="',options.className,'" ','draggable="false" ','alt="',match,'" ','src="',src,'"',">")}}return match})}function toSizeSquaredAsset(value){return typeof value==="number"?value+"x"+value:value}function fromCodePoint(codepoint){var code=typeof codepoint==="string"?parseInt(codepoint,16):codepoint;if(code<65536){return fromCharCode(code)}code-=65536;return fromCharCode(55296+(code>>10),56320+(code&1023))}function parse(what,how){if(!how||typeof how==="function"){how={callback:how}}return(typeof what==="string"?parseString:parseNode)(what,{callback:how.callback||defaultImageSrcGenerator,base:typeof how.base==="string"?how.base:twemoji.base,ext:how.ext||twemoji.ext,size:how.folder||toSizeSquaredAsset(how.size||twemoji.size),className:how.className||twemoji.className})}function replace(text,callback){return String(text).replace(re,callback)}function test(text){re.lastIndex=0;var result=re.test(text);re.lastIndex=0;return result}function toCodePoint(unicodeSurrogates,sep){var r=[],c=0,p=0,i=0;while(i<unicodeSurrogates.length){c=unicodeSurrogates.charCodeAt(i++);if(p){r.push((65536+(p-55296<<10)+(c-56320)).toString(16));p=0}else if(55296<=c&&c<=56319){p=c}else{r.push(c.toString(16))}}return r.join(sep||"-")}}();if(!location.protocol){twemoji.base=twemoji.base.replace(/^http:/,"")}module.exports=twemoji}).call(exports,function(){return this}())},1209:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2),noop=__webpack_require__(35);var FollowButton=__webpack_require__(948),FeedSubscriptionActions=__webpack_require__(913),FeedSubscriptionStore=__webpack_require__(872);var FollowButtonContainer=React.createClass({displayName:"FollowButtonContainer",propTypes:{siteUrl:React.PropTypes.string.isRequired,iconSize:React.PropTypes.number,onFollowToggle:React.PropTypes.func},getDefaultProps:function getDefaultProps(){return{onFollowToggle:noop}},getInitialState:function getInitialState(){return this.getStateFromStores()},getStateFromStores:function getStateFromStores(){return{following:FeedSubscriptionStore.getIsFollowingBySiteUrl(this.props.siteUrl)}},componentDidMount:function componentDidMount(){FeedSubscriptionStore.on("change",this.onStoreChange)},componentWillUnmount:function componentWillUnmount(){FeedSubscriptionStore.off("change",this.onStoreChange)},onStoreChange:function onStoreChange(){var newState=this.getStateFromStores();if(newState.following!==this.state.following){this.setState(newState)}},handleFollowToggle:function handleFollowToggle(following){FeedSubscriptionActions[following?"follow":"unfollow"](this.props.siteUrl);this.props.onFollowToggle(following)},render:function render(){return React.createElement(FollowButton,{following:this.state.following,onFollowToggle:this.handleFollowToggle,iconSize:this.props.iconSize,tagName:this.props.tagName})}});module.exports=FollowButtonContainer},1217:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2);var LikeIcons=React.createClass({displayName:"LikeIcons",propTypes:{size:React.PropTypes.number},getDefaultProps:function getDefaultProps(){return{size:24}},render:function render(){var size=this.props.size;return React.createElement("span",{className:"gridicon__wrapper"},React.createElement("svg",{className:"gridicon gridicon__liked",height:size,width:size,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("path",{d:"M11.875 2l2.582 6.953 7.418.304-5.822 4.602L18.055 21l-6.18-4.11L5.695 21l2.002-7.14-5.822-4.603 7.418-.304"}))),React.createElement("svg",{className:"gridicon gridicon__like-empty",height:size,width:size,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("path",{d:"M12 4.872l1.645 4.43.232.623.665.027 4.722.194-3.705 2.93-.524.412.18.64 1.275 4.547-3.935-2.617L12 15.69l-.554.368-3.936 2.617 1.275-4.546.18-.642-.523-.413-3.705-2.93 4.722-.193.664-.027.232-.624L12 4.873M12 2L9.418 8.953 2 9.257l5.822 4.602L5.82 21 12 16.89 18.18 21l-2.002-7.14L22 9.256l-7.418-.305L12 2z"}))))}});module.exports=LikeIcons},1218:function(module,exports,__webpack_require__){"use strict";var _extends=__webpack_require__(94)["default"];var React=__webpack_require__(2),omit=__webpack_require__(81),noop=__webpack_require__(35);var LikeActions=__webpack_require__(1077),LikeButton=__webpack_require__(1067),LikeStore=__webpack_require__(1280);var LikeButtonContainer=React.createClass({displayName:"LikeButtonContainer",propTypes:{siteId:React.PropTypes.number.isRequired,postId:React.PropTypes.number.isRequired,showCount:React.PropTypes.bool,tagName:React.PropTypes.string,onLikeToggle:React.PropTypes.func},getDefaultProps:function getDefaultProps(){return{onLikeToggle:noop}},getInitialState:function getInitialState(){return this.getStateFromStores()},getStateFromStores:function getStateFromStores(){return{likeCount:LikeStore.getLikeCountForPost(this.props.siteId,this.props.postId),iLike:LikeStore.isPostLikedByCurrentUser(this.props.siteId,this.props.postId)}},componentDidMount:function componentDidMount(){LikeStore.on("change",this.onStoreChange)},componentWillUnmount:function componentWillUnmount(){LikeStore.off("change",this.onStoreChange)},onStoreChange:function onStoreChange(){var newState=this.getStateFromStores();if(newState.likeCount!==this.state.likeCount||newState.iLike!==this.state.iLike){this.setState(newState)}},handleLikeToggle:function handleLikeToggle(liked){LikeActions[liked?"likePost":"unlikePost"](this.props.siteId,this.props.postId);this.props.onLikeToggle(liked)},render:function render(){var props=omit(this.props,["siteId","postId"]);return React.createElement(LikeButton,_extends({},props,{likeCount:this.state.likeCount,liked:this.state.iLike,onLikeToggle:this.handleLikeToggle}))}});module.exports=LikeButtonContainer},1256:function(module,exports,__webpack_require__){"use strict";var debug=__webpack_require__(1)("calypso:comment-like-store:actions");var Dispatcher=__webpack_require__(30),wpcom=__webpack_require__(20);function getQuery(){return{source:"reader"}}var CommentLikeActions={likeComment:function likeComment(siteId,commentId){Dispatcher.handleViewAction({type:"LIKE_COMMENT",siteId:siteId,commentId:commentId});wpcom.site(siteId).comment(commentId).like().add(getQuery(),function(error,data){CommentLikeActions.receiveLikeResponse(error,siteId,commentId,data)})},unlikeComment:function unlikeComment(siteId,commentId){Dispatcher.handleViewAction({type:"UNLIKE_COMMENT",siteId:siteId,commentId:commentId});wpcom.site(siteId).comment(commentId).like().del(getQuery(),function(error,data){CommentLikeActions.receiveUnlikeResponse(error,siteId,commentId,data)})},receiveLikeResponse:function receiveLikeResponse(error,siteId,commentId,data){Dispatcher.handleServerAction({type:"RECEIVE_COMMENT_LIKE_RESPONSE",error:error,siteId:siteId,commentId:commentId,data:data})},receiveUnlikeResponse:function receiveUnlikeResponse(error,siteId,commentId,data){Dispatcher.handleServerAction({type:"RECEIVE_COMMENT_UNLIKE_RESPONSE",error:error,siteId:siteId,commentId:commentId,data:data})}};module.exports=CommentLikeActions},1257:function(module,exports,__webpack_require__){"use strict";var assign=__webpack_require__(15),clone=__webpack_require__(154),config=__webpack_require__(4),forEach=__webpack_require__(292);var Dispatcher=__webpack_require__(30),Emitter=__webpack_require__(10),key=__webpack_require__(1259).key,CommentStoreActionTypes=__webpack_require__(865).action,ActionTypes=__webpack_require__(1258).action;var CommentLikeStore,_likesForComment={},_receivedErrors={};function getLikes(siteId,commentId){return _likesForComment[key(siteId,commentId)]}function setLikes(siteId,commentId,likes){_likesForComment[key(siteId,commentId)]=likes}function recordError(siteId,error){_receivedErrors[siteId]=error}CommentLikeStore={getLikeCountForComment:function getLikeCountForComment(siteId,commentId){var likes=getLikes(siteId,commentId);if(likes&&likes.count!=null){return likes.count}return null},isCommentLikedByCurrentUser:function isCommentLikedByCurrentUser(siteId,commentId){var likes=getLikes(siteId,commentId);if(likes&&likes.i_like!=null){return likes.i_like}return null},receiveLike:function receiveLike(siteId,commentId){var current=getLikes(siteId,commentId),newLikes=clone(current);if(!newLikes){newLikes={count:0,i_like:false}}newLikes.count+=1;newLikes.i_like=true;setLikes(siteId,commentId,newLikes);CommentLikeStore.emit("change")},receiveUnlike:function receiveUnlike(siteId,commentId){var current=getLikes(siteId,commentId),newLikes=clone(current);if(!newLikes){newLikes={count:0,i_like:false}}else{newLikes.count-=1;newLikes.i_like=false}setLikes(siteId,commentId,newLikes);CommentLikeStore.emit("change")},receiveLikeResponse:function receiveLikeResponse(action){if(action&&!action.error&&action.data.success){return}recordError(action.siteId,action);this.receiveUnlike(action.siteId,action.commentId)},receiveUnlikeResponse:function receiveUnlikeResponse(action){if(action&&!action.error&&action.data.success){return}recordError(action.siteId,action);this.receiveLike(action.siteId,action.commentId)},receivePostComments:function receivePostComments(action){if(!action||action.error){if(action.error){recordError(action.siteId,action)}return}if(!action.siteId||!action.data.comments){return}forEach(action.data.comments,function(comment){var current=getLikes(action.siteId,comment.ID),newLikes=clone(current);newLikes={count:comment.like_count,i_like:comment.i_like};setLikes(action.siteId,comment.ID,newLikes)});CommentLikeStore.emit("change")}};if(config("env")==="development"){assign(CommentLikeStore,{_reset:function _reset(){_likesForComment={}}})}Emitter(CommentLikeStore);CommentLikeStore.setMaxListeners(100);CommentLikeStore.dispatchToken=Dispatcher.register(function(payload){var action=payload.action;switch(action.type){case ActionTypes.LIKE_COMMENT:CommentLikeStore.receiveLike(action.siteId,action.commentId);break;case ActionTypes.UNLIKE_COMMENT:CommentLikeStore.receiveUnlike(action.siteId,action.commentId);break;case CommentStoreActionTypes.RECEIVE_POST_COMMENTS:CommentLikeStore.receivePostComments(action);break;case ActionTypes.RECEIVE_COMMENT_LIKE_RESPONSE:CommentLikeStore.receiveLikeResponse(action);break;case ActionTypes.RECEIVE_COMMENT_UNLIKE_RESPONSE:CommentLikeStore.receiveUnlikeResponse(action);break}});module.exports=CommentLikeStore},1258:function(module,exports,__webpack_require__){"use strict";var keyMirror=__webpack_require__(48);module.exports.action=keyMirror({LIKE_COMMENT:null,UNLIKE_COMMENT:null,RECEIVE_COMMENT_LIKE_RESPONSE:null,RECEIVE_COMMENT_UNLIKE_RESPONSE:null})},1259:function(module,exports){"use strict";module.exports={key:function key(siteId,commentId){if(!siteId||!commentId){throw new Error("siteId and commentId must be non-empty")}return siteId+"-"+commentId}}},1272:function(module,exports,__webpack_require__){"use strict";var find=__webpack_require__(56);var postNormalizer=__webpack_require__(755),DISPLAY_TYPES=__webpack_require__(905);var READER_CONTENT_WIDTH=653,PHOTO_ONLY_MIN_WIDTH=READER_CONTENT_WIDTH*.8,ONE_LINER_THRESHOLD=20*10;var fastPostNormalizationRules=[postNormalizer.decodeEntities,postNormalizer.stripHTML,postNormalizer.preventWidows,postNormalizer.makeSiteIDSafeForAPI,postNormalizer.pickPrimaryTag,postNormalizer.firstPassCanonicalImage,postNormalizer.safeImageProperties(READER_CONTENT_WIDTH),postNormalizer.withContentDOM([postNormalizer.content.removeStyles,postNormalizer.content.safeContentImages(READER_CONTENT_WIDTH),postNormalizer.content.makeEmbedsSecure,postNormalizer.content.disableAutoPlayOnEmbeds,postNormalizer.content.detectEmbeds,postNormalizer.content.wordCountAndReadingTime]),classifyPost],slowPostNormalizationRules=[postNormalizer.waitForImagesToLoad,postNormalizer.keepValidImages(144,72),postNormalizer.pickCanonicalImage,classifyPost];function classifyPost(post,callback){var displayType=DISPLAY_TYPES.UNCLASSIFIED,canonicalImage=post.canonical_image,canonicalAspect;if(post.images&&post.images.length===1&&post.images[0].naturalWidth>=PHOTO_ONLY_MIN_WIDTH&&post.word_count<100){displayType^=DISPLAY_TYPES.PHOTO_ONLY}if(canonicalImage){if(canonicalImage.width>=600){displayType^=DISPLAY_TYPES.LARGE_BANNER}if(canonicalImage.height&&canonicalImage.width){canonicalAspect=canonicalImage.width/canonicalImage.height;if(canonicalAspect>=2&&canonicalImage.width>=600){displayType^=DISPLAY_TYPES.LANDSCAPE_BANNER}else if(canonicalAspect<1&&canonicalImage.height>160){displayType^=DISPLAY_TYPES.PORTRAIT_BANNER}else if(canonicalAspect>.7&&canonicalAspect<1.3&&canonicalImage.width<200){displayType^=DISPLAY_TYPES.THUMBNAIL}}if(find(post.content_images,{src:canonicalImage.uri})){displayType^=DISPLAY_TYPES.CANONICAL_IN_CONTENT}}if(post.content_embeds&&post.content_embeds.length>=1){if(!canonicalImage||post.content_embeds.length===1){displayType^=DISPLAY_TYPES.FEATURED_VIDEO}}if(post.word_count<=ONE_LINER_THRESHOLD&&(!post.content_images||post.content_images.length===0)&&(!post.content_embeds||post.content_embeds.length===0)){displayType^=DISPLAY_TYPES.ONE_LINER}if(post.content_images&&post.content_images.length>2){displayType^=DISPLAY_TYPES.GALLERY}if(post.tags&&post.tags["p2-xpost"]){displayType^=DISPLAY_TYPES.X_POST}post.display_type=displayType;callback()}module.exports={fastRules:fastPostNormalizationRules,slowRules:slowPostNormalizationRules}},1273:function(module,exports,__webpack_require__){"use strict";var assign=__webpack_require__(15),forOwn=__webpack_require__(704),Immutable=__webpack_require__(849),noop=__webpack_require__(35);var FeedPostStore=__webpack_require__(867),wpcom=__webpack_require__(20);function PostBatchFetcher(options){assign(this,{BATCH_SIZE:7,onFetch:noop,onPostReceived:noop,onError:noop,apiVersion:"1.1"},options);this.postsToFetch=Immutable.OrderedSet();this.batchQueued=false}assign(PostBatchFetcher.prototype,{add:function add(postKey){this.postsToFetch=this.postsToFetch.add(Immutable.fromJS(postKey));if(!this.batchQueued){this.batchQueued=setTimeout(this.run.bind(this),0)}},remove:function remove(postKey){this.postsToFetch=this.postsToFetch["delete"](Immutable.fromJS(postKey))},run:function run(){var toFetch=this.postsToFetch,batch,batchSet,index=0;this.batchQueued=false;if(toFetch.size===0){return}toFetch.forEach(function(postKey){var post;postKey=postKey.toJS();post=FeedPostStore.get(postKey);if(post&&post._state!=="minimal"){throw new Error(post._state)}this.onFetch(postKey)},this);function addToBatch(postKey){batch.add(this.buildUrl(postKey.toJS()))}while(index<toFetch.size&&(batchSet=toFetch.slice(index,index+this.BATCH_SIZE)).size>0){batch=wpcom.batch();batchSet.forEach(addToBatch,this);batch.run({apiVersion:this.apiVersion},this.receiveBatch.bind(this,batchSet));index+=this.BATCH_SIZE}this.postsToFetch=Immutable.OrderedSet()},receiveBatch:function receiveBatch(batchSet,error,data){if(error){batchSet.forEach(function(val){this.onError(error,val)},this);return}if(data){forOwn(data,function(post,key){var match=this.resultKeyRegex.exec(key),containerId,postId;if(!match){return}containerId=+match[1];postId=+match[2];if(!(containerId&&postId)){return}this.onPostReceived(containerId,postId,post)},this)}}});module.exports=PostBatchFetcher},1274:function(module,exports,__webpack_require__){"use strict";var ActionType=__webpack_require__(808).action,Dispatcher=__webpack_require__(30),FeedStore=__webpack_require__(971),FeedState=__webpack_require__(808).state,wpcom=__webpack_require__(20);var FeedStoreActions={fetch:function fetch(feedId){var feed=FeedStore.get(feedId);if(feed&&feed.state===FeedState.PENDING){return}Dispatcher.handleViewAction({type:ActionType.FETCH,feedId:feedId});wpcom.undocumented().readFeed({ID:feedId,meta:"site"},FeedStoreActions.receiveFeedFetch.bind(FeedStoreActions,feedId))},receiveFeedFetch:function receiveFeedFetch(feedId,error,data){Dispatcher.handleServerAction({type:ActionType.RECEIVE_FETCH,feedId:feedId,error:error,data:data})}};module.exports=FeedStoreActions},1275:function(module,exports,__webpack_require__){"use strict";var assign=__webpack_require__(15),debug=__webpack_require__(1)("calypso:feed-store:post-list-store"),filter=__webpack_require__(97),forEach=__webpack_require__(292),map=__webpack_require__(282),moment=__webpack_require__(294),noop=__webpack_require__(35),Emitter=__webpack_require__(10);var Dispatcher=__webpack_require__(30),Emitter=__webpack_require__(10),FeedPostStore=__webpack_require__(867),FeedStreamActions=__webpack_require__(906),ActionTypes=__webpack_require__(972).action,PollerPool=__webpack_require__(83);var FeedStream=function FeedStream(spec){if(!spec){throw new Error("must supply a feed stream spec")}if(!spec.id){throw new Error("missing id")}if(!spec.fetcher){throw new Error("missing fetcher")}if(!spec.keyMaker){throw new Error("must supply keyMaker")}this.id=spec.id;assign(this,{postKeys:[],pendingPostKeys:[],postById:{},errors:[],fetcher:spec.fetcher,page:1,perPage:7,maxUpdates:40,gapFillCount:21,orderBy:"date",_isLastPage:false,_isFetchingNextPage:false,keyMaker:spec.keyMaker,onNextPageFetch:spec.onNextPageFetch||noop,
onGapFetch:spec.onGapFetch||noop,onUpdateFetch:spec.onUpdateFetch||noop,dateProperty:spec.dateProperty||"date",poller:PollerPool.add(this,"pollForUpdates",{interval:60*1e3,leading:false,pauseWhenHidden:false})})};assign(FeedStream.prototype,{destroy:function destroy(){PollerPool.remove(this.poller)},handlePayload:function handlePayload(payload){var action=payload&&payload.action;if(!action){return}if(action.id!==this.id){return}Dispatcher.waitFor([FeedPostStore.dispatchToken]);switch(action.type){case ActionTypes.RECEIVE_PAGE:this.receivePage(action.id,action.error,action.data);break;case ActionTypes.RECEIVE_UPDATES:this.receiveUpdates(action.id,action.error,action.data);break;case ActionTypes.SHOW_UPDATES:this.acceptUpdates();break;case ActionTypes.RECEIVE_GAP:this.receiveFeedGap(action.gap,action.error,action.data);break;case ActionTypes.FETCH_NEXT_PAGE:this.setIsFetchingNextPage(true);break}},get:function get(){return this.postKeys},getID:function getID(){return this.id},getAll:function getAll(){return map(this.postKeys,function(key){return key.isGap?key:FeedPostStore.get(key)})},getPage:function getPage(){return this.page},getPerPage:function getPerPage(){return this.perPage},getUpdateCount:function getUpdateCount(){return this.pendingPostKeys.length},isLastPage:function isLastPage(){return this._isLastPage},isFetchingNextPage:function isFetchingNextPage(){return this._isFetchingNextPage},getLastItemWithDate:function getLastItemWithDate(){var i,key,date;i=this.postKeys.length-1;if(i===-1){return}do{key=this.postKeys[i];if(!key.isGap){date=FeedPostStore.get(key)[this.dateProperty]}--i}while(!date&&i!==-1);return date},getFirstItemWithDate:function getFirstItemWithDate(){var i,key,date;if(this.postKeys.length===0){return}i=0;do{key=this.postKeys[i];if(!key.isGap){date=FeedPostStore.get(key)[this.dateProperty]}++i}while(!date&&i<this.postKeys.length);return date},hasRecentError:function hasRecentError(){var aMinuteAgo=Date.now()-60*1e3;return this.errors.some(function(error){return error.timestamp&&error.timestamp>aMinuteAgo})},setIsFetchingNextPage:function setIsFetchingNextPage(val){this._isFetchingNextPage=val;this.emit("change")},pollForUpdates:function pollForUpdates(){if(this.isFetchingUpdates){debug("already fetching, skip");return}if(!this.postKeys.length){debug("skipping poll because we have no posts");return}var mostRecentDate=this.getFirstItemWithDate(),params=undefined;if(!mostRecentDate){return}this.isFetchingUpdates=true;params={orderBy:this.orderBy,number:this.maxUpdates,before:moment().toISOString(),after:mostRecentDate};this.onUpdateFetch(params);debug("polling for updates");this.fetcher(params,function(error,data){debug("poll response received",error,data);this.isFetchingUpdates=false;FeedStreamActions.receiveUpdates(this.id,error,data)}.bind(this))},filterNewPosts:function filterNewPosts(posts){var postKeys=map(posts,this.keyMaker);postKeys=filter(postKeys,function(postKey){return!(postKey.postId in this.postById)},this);return postKeys},receivePage:function receivePage(id,error,data){var posts,postKeys;if(id!==this.id){return}debug("receiving page in %s",this.id);this._isFetchingNextPage=false;if(error){debug("Error fetching posts from API:",error);error.timestamp=Date.now();this.errors.push(error);this.emit("change");return}posts=data&&data.posts;if(!posts){return}if(!posts.length){this._isLastPage=true;this.emit("change");return}postKeys=this.filterNewPosts(posts);if(postKeys.length){forEach(postKeys,function(postKey){this.postById[postKey.postId]=true},this);this.postKeys=this.postKeys.concat(postKeys);this.page++;this.emit("change")}},receiveUpdates:function receiveUpdates(id,error,data){var postKeys;if(id!==this.id){return}if(error){return}if(data&&data.posts){postKeys=this.filterNewPosts(data.posts);if(postKeys.length>0){this.pendingPostKeys=postKeys;this.pendingDateAfter=moment(data.date_range.after);this.emit("change")}}},acceptUpdates:function acceptUpdates(){if(this.pendingPostKeys.length===0){return}forEach(this.pendingPostKeys,function(postKey){this.postById[postKey.postId]=true},this);var mostRecentPostDate=moment(FeedPostStore.get(this.postKeys[0])[this.dateProperty]);if(this.pendingDateAfter>mostRecentPostDate){this.pendingPostKeys.push({isGap:true,from:mostRecentPostDate,to:this.pendingDateAfter})}this.postKeys=this.pendingPostKeys.concat(this.postKeys);this.pendingPostKeys=[];this.pendingDateAfter=null;this.emit("change")},receiveFeedGap:function receiveFeedGap(gap,error,data){if(error){this.errors.push(error);this.emit("change");return}var posts=data&&data.posts;if(!posts){return}var indexOfGap=this.postKeys.indexOf(gap);if(indexOfGap===-1){debug("gap %o not found",gap);return}var beforeGap=this.postKeys.slice(0,indexOfGap),afterGap=this.postKeys.slice(indexOfGap+1),gapItems=this.filterNewPosts(posts),afterGapDate=moment(FeedPostStore.get(afterGap[0])[this.dateProperty]);if(posts.length===this.gapFillCount){if(moment(posts[posts.length-1][this.dateProperty])>afterGapDate){gapItems.push({isGap:true,from:afterGapDate,to:moment(posts[posts.length-1][this.dateProperty])})}}this.postKeys=beforeGap.concat(gapItems,afterGap);this.emit("change")}});Emitter(FeedStream.prototype);module.exports=FeedStream},1276:function(module,exports,__webpack_require__){"use strict";var _toArray=__webpack_require__(1736)["default"];var Dispatcher=__webpack_require__(30),FeedStream=__webpack_require__(1275),FeedStreamCache=__webpack_require__(1075),wpcomUndoc=__webpack_require__(20).undocumented();function feedKeyMaker(post){return{feedId:post.feed_ID,postId:post.ID}}function siteKeyMaker(post){return{blogId:post.site_ID,postId:post.ID}}function mixedKeyMaker(post){if(post.feed_ID){return{feedId:post.feed_ID,postId:post.ID}}return siteKeyMaker(post)}function addMetaToNextPageFetch(params){params.meta="post,discover_original_post"}function limitSiteParams(params){params.fields="ID,site_ID,date"}function limitSiteParamsForLikes(params){limitSiteParams(params);params.fields+=",date_liked"}function getStoreForFeed(storeId){var feedId=storeId.split(":")[1],fetcher=function fetchFeedById(query,callback){query.ID=feedId;wpcomUndoc.readFeedPosts(query,callback)};return new FeedStream({id:storeId,fetcher:fetcher,keyMaker:feedKeyMaker,onNextPageFetch:addMetaToNextPageFetch})}function getStoreForTag(storeId){var tagSlug=storeId.split(":")[1],fetcher=function fetcher(query,callback){query.tag=tagSlug;wpcomUndoc.readTagPosts(query,callback)};return new FeedStream({id:storeId,fetcher:fetcher,keyMaker:siteKeyMaker,onGapFetch:limitSiteParams,onUpdateFetch:limitSiteParams})}function getStoreForList(storeId){var listKey=storeId.split(":")[1];var _listKey$split=listKey.split("-");var _listKey$split2=_toArray(_listKey$split);var listOwner=_listKey$split2[0];var listSlug=_listKey$split2.slice(1);var fetcher=function fetcher(query,callback){query.owner=listOwner;query.slug=listSlug.join("-");wpcomUndoc.readListPosts(query,callback)};return new FeedStream({id:storeId,fetcher:fetcher,keyMaker:mixedKeyMaker,onGapFetch:limitSiteParams,onUpdateFetch:limitSiteParams})}function getStoreForSite(storeId){var siteId=storeId.split(":")[1],fetcher=function fetcher(query,callback){query.site=siteId;wpcomUndoc.readSitePosts(query,callback)};return new FeedStream({id:storeId,fetcher:fetcher,keyMaker:siteKeyMaker,onGapFetch:limitSiteParams,onUpdateFetch:limitSiteParams})}function feedStoreFactory(storeId){var store=FeedStreamCache.get(storeId);if(store){return store}if(storeId==="following"){store=new FeedStream({id:storeId,fetcher:wpcomUndoc.readFollowing.bind(wpcomUndoc),keyMaker:feedKeyMaker,onNextPageFetch:addMetaToNextPageFetch})}else if(storeId==="a8c"){store=new FeedStream({id:storeId,fetcher:wpcomUndoc.readA8C.bind(wpcomUndoc),keyMaker:feedKeyMaker,onNextPageFetch:addMetaToNextPageFetch})}else if(storeId==="likes"){store=new FeedStream({id:storeId,fetcher:wpcomUndoc.readLiked.bind(wpcomUndoc),keyMaker:siteKeyMaker,onGapFetch:limitSiteParamsForLikes,onUpdateFetch:limitSiteParamsForLikes,dateProperty:"date_liked"})}else if(storeId.indexOf("feed:")===0){store=getStoreForFeed(storeId)}else if(storeId.indexOf("tag:")===0){store=getStoreForTag(storeId)}else if(storeId.indexOf("list:")===0){store=getStoreForList(storeId)}else if(storeId.indexOf("site:")===0){store=getStoreForSite(storeId)}else{throw new Error("Unknown feed store ID")}store.dispatchToken=Dispatcher.register(store.handlePayload.bind(store));FeedStreamCache.set(storeId,store);return store}module.exports=feedStoreFactory},1277:function(module,exports,__webpack_require__){"use strict";var i18n=__webpack_require__(16);var MILLIS_IN_MINUTE=60*1e3;module.exports=function humanDate(dateOrMoment){var now=i18n.moment();dateOrMoment=i18n.moment(dateOrMoment);var millisAgo=now.diff(dateOrMoment);if(millisAgo<0){millisAgo=0}if(millisAgo<MILLIS_IN_MINUTE){var seconds=Math.ceil(millisAgo/1e3);return i18n.translate("%(seconds)ds ago",{args:{seconds:seconds},comment:"example for a resulting string: 3s ago"})}if(millisAgo<MILLIS_IN_MINUTE*60){var minutes=Math.ceil(millisAgo/MILLIS_IN_MINUTE);return i18n.translate("%(minutes)dm ago",{args:{minutes:minutes},comment:"example for a resulting string: 2m ago"})}if(millisAgo<MILLIS_IN_MINUTE*60*24){var hours=now.diff(dateOrMoment,"hours");return i18n.translate("%(hours)dh ago",{args:{hours:hours},comment:"example for a resulting string: 5h ago"})}if(millisAgo<MILLIS_IN_MINUTE*60*24*7){var days=now.diff(dateOrMoment,"days");return i18n.translate("%(days)dd ago",{args:{days:days},comment:"example for a resulting string: 4d ago"})}return dateOrMoment.format("ll")}},1279:function(module,exports){"use strict";var inflight={};module.exports={requestInflight:function requestInflight(requestKey){return requestKey in inflight},requestTracker:function requestTracker(requestKey,callback){inflight[requestKey]=true;return function(error,data){delete inflight[requestKey];callback(error,data)}}}},1280:function(module,exports,__webpack_require__){"use strict";var assign=__webpack_require__(15),clone=__webpack_require__(154),config=__webpack_require__(4),isEqual=__webpack_require__(96);var Dispatcher=__webpack_require__(30),Emitter=__webpack_require__(10),FeedPostStoreActionType=__webpack_require__(866).action,LikeActions=__webpack_require__(1077),key=__webpack_require__(1078).key;var _likesForPost={},LikeStore,receivedErrors=[];function getLikes(siteId,postId){return _likesForPost[key(siteId,postId)]}function setLikes(siteId,postId,likes){_likesForPost[key(siteId,postId)]=likes}LikeStore={getLikersForPost:function getLikersForPost(siteId,postId){var likes=getLikes(siteId,postId);if(likes&&likes.likes){return likes.likes}LikeActions.fetchLikes(siteId,postId);return null},getLikeCountForPost:function getLikeCountForPost(siteId,postId){var likes=getLikes(siteId,postId);if(likes&&likes.count!=null){return likes.count}LikeActions.fetchLikes(siteId,postId);return null},isPostLikedByCurrentUser:function isPostLikedByCurrentUser(siteId,postId){var likes=getLikes(siteId,postId);if(likes&&likes.i_like!=null){return likes.i_like}LikeActions.fetchLikes(siteId,postId);return null},receivePostLikes:function receivePostLikes(action){if(!action||action.error){if(action.error){receivedErrors.push(action)}return}if(!action.siteId||!action.postId){return}var currentLike=getLikes(action.siteId,action.postId);var receivedLike={count:action.data.found,likes:action.data.likes,i_like:action.data.i_like};if(!isEqual(receivedLike,currentLike)){setLikes(action.siteId,action.postId,receivedLike);LikeStore.emit("change")}},receiveUserLikeChange:function receiveUserLikeChange(action){if(!action||action.error){if(action.error){receivedErrors.push(action)}return}this.receivePost(action.siteId,action.postId,action.data)},receivePost:function receivePost(siteId,postId,post){if(!siteId||!postId||!post||post.is_external){return}var currentLike=getLikes(siteId,postId)||{};if(currentLike.count!==post.like_count||currentLike.i_like!==post.i_like){setLikes(siteId,postId,{count:post.like_count,likes:currentLike.likes,i_like:!!post.i_like});LikeStore.emit("change")}},receiveLike:function receiveLike(action){var current=getLikes(action.siteId,action.postId),newLikes=clone(current);newLikes.count+=1;newLikes.i_like=true;setLikes(action.siteId,action.postId,newLikes);LikeStore.emit("change")},receiveUnlike:function receiveUnlike(action){var current=getLikes(action.siteId,action.postId),newLikes=clone(current);newLikes.count-=1;newLikes.i_like=false;setLikes(action.siteId,action.postId,newLikes);LikeStore.emit("change")}};if(config("env")==="development"){assign(LikeStore,{_all:function _all(){return _likesForPost},_reset:function _reset(){_likesForPost={}}})}Emitter(LikeStore);LikeStore.setMaxListeners(100);LikeStore.dispatchToken=Dispatcher.register(function(payload){var action=payload.action;switch(action.type){case"LIKE_POST":LikeStore.receiveLike(action);break;case"UNLIKE_POST":LikeStore.receiveUnlike(action);break;case"RECEIVE_POST_LIKES":LikeStore.receivePostLikes(action);break;case"RECEIVE_LIKE_RESPONSE":case"RECEIVE_UNLIKE_RESPONSE":LikeStore.receiveUserLikeChange(action);break;case FeedPostStoreActionType.RECEIVE_FEED_POST:if(!action.data){return}LikeStore.receivePost(action.data.site_ID,action.data.ID,action.data);break}});module.exports=LikeStore},1294:function(module,exports,__webpack_require__){"use strict";var throttle=__webpack_require__(308);var ObserveWindowSizeMixin={componentWillMount:function componentWillMount(){this._handleWindowResize=throttle(this.onWindowResize,100);window.addEventListener("resize",this._handleWindowResize)},componentWillUnmount:function componentWillUnmount(){window.removeEventListener("resize",this._handleWindowResize)}};module.exports=ObserveWindowSizeMixin},1303:function(module,exports,__webpack_require__){"use strict";var Dispatcher=__webpack_require__(30),wpcom=__webpack_require__(20),RECEIVE_TEAMS=__webpack_require__(986).action.RECEIVE_TEAMS;var isFetching=false;module.exports={fetch:function fetch(){if(isFetching){return}var batch=wpcom.batch();batch.add("/read/tags");batch.add("/read/lists");batch.add("/read/teams");batch.run({apiVersion:"1.2"},function(error,data){isFetching=false;if(error){Dispatcher.handleServerAction({type:"RECEIVE_READER_TAG_SUBSCRIPTIONS",data:null,error:error});Dispatcher.handleServerAction({type:"RECEIVE_READER_LISTS",data:null,error:error});Dispatcher.handleServerAction({type:RECEIVE_TEAMS,data:null,error:error});return}Dispatcher.handleServerAction({type:"RECEIVE_READER_TAG_SUBSCRIPTIONS",data:data["/read/tags"],error:error});Dispatcher.handleServerAction({type:"RECEIVE_READER_LISTS",data:data["/read/lists"],error:error});Dispatcher.handleServerAction({type:RECEIVE_TEAMS,data:data["/read/teams"],error:error})})}}},1304:function(module,exports,__webpack_require__){"use strict";var Dispatcher=__webpack_require__(30),some=__webpack_require__(57),assign=__webpack_require__(15),config=__webpack_require__(4);var emitter=__webpack_require__(10),ActionTypes=__webpack_require__(986).action,ErrorTypes=__webpack_require__(986).error;var teams=null,errors=[];var TeamStore={get:function get(){return teams},hasRecentError:function hasRecentError(){var recentTimeIntervalSeconds=120,dateNow=Date.now();return some(errors,function(error){return dateNow-error.timestamp<recentTimeIntervalSeconds*1e3})}};function receiveTeamsResponse(action){if(action.error){errors.push({error:action.error,errorType:ErrorTypes.UNABLE_TO_RECEIVE_TEAMS,timestamp:Date.now()});return}if(!action.data||!action.data.teams){errors.push({error:"invalid format",errorType:ErrorTypes.UNABLE_TO_RECEIVE_TEAMS,timestamp:Date.now()});return}teams=action.data.teams;TeamStore.emit("change")}if(config("env")==="development"){assign(TeamStore,{_reset:function _reset(){teams=null;errors=[]}})}emitter(TeamStore);TeamStore.dispatchToken=Dispatcher.register(function(payload){var action=payload.action;if(!action){return}switch(action.type){case ActionTypes.RECEIVE_TEAMS:receiveTeamsResponse(action);break}});module.exports=TeamStore},1313:function(module,exports,__webpack_require__){"use strict";var Emitter=__webpack_require__(10),wrap=__webpack_require__(1828),debug=__webpack_require__(1)("calypso:ticker");var ticker={};Emitter(ticker);ticker.on=wrap(ticker.on,function(func,type,callback){func.call(this,type,callback);ticker._start();if(!ticker._listening){if(document){debug("listening for vis change");document.addEventListener("visibilitychange",ticker.handleVisibilityChange,false)}ticker._listening=true}});ticker._start=function(){if(ticker.listeners("tick").length===0){debug("no listeners, abort start");return}if(!ticker.interval){debug("starting interval");ticker.interval=setInterval(ticker.tick,6e4)}};ticker._stop=function(){if(ticker.interval){debug("killing interval");clearInterval(ticker.interval);ticker.interval=null}};ticker.tick=function(){debug("tick");ticker.emit("tick")};ticker.off=wrap(ticker.off,function(func,type,callback){func.call(this,type,callback);if(this.listeners("tick").length===0&&this.interval){ticker._stop();if(ticker._listening){if(document){debug("killing vis listener");document.removeEventListener("visibilitychange",ticker.handleVisibilityChange,false)}ticker._listening=false}}});ticker.handleVisibilityChange=function(){debug("viz change");if(document.hidden){debug("stopping");ticker._stop()}else{debug("restarting");ticker._start()}};ticker.setMaxListeners(100);module.exports=ticker},1672:function(module,exports,__webpack_require__){"use strict";var _extends=__webpack_require__(94)["default"];var React=__webpack_require__(2),omit=__webpack_require__(81);var CommentLikeActions=__webpack_require__(1256),LikeButton=__webpack_require__(1067),CommentLikeStore=__webpack_require__(1257),stats=__webpack_require__(701);var CommentLikeButtonContainer=React.createClass({displayName:"CommentLikeButtonContainer",propTypes:{siteId:React.PropTypes.number.isRequired,commentId:React.PropTypes.number.isRequired,showCount:React.PropTypes.bool,tagName:React.PropTypes.string},getInitialState:function getInitialState(){return this.getStateFromStores()},getStateFromStores:function getStateFromStores(){return{likeCount:CommentLikeStore.getLikeCountForComment(this.props.siteId,this.props.commentId),iLike:CommentLikeStore.isCommentLikedByCurrentUser(this.props.siteId,this.props.commentId)}},componentDidMount:function componentDidMount(){CommentLikeStore.on("change",this.onStoreChange)},componentWillUnmount:function componentWillUnmount(){CommentLikeStore.off("change",this.onStoreChange)},onStoreChange:function onStoreChange(){var newState=this.getStateFromStores();if(newState.likeCount!==this.state.likeCount||newState.iLike!==this.state.iLike){this.setState(newState)}},handleLikeToggle:function handleLikeToggle(liked){CommentLikeActions[liked?"likeComment":"unlikeComment"](this.props.siteId,this.props.commentId);stats.recordAction(liked?"liked_comment":"unliked_comment");stats.recordGaEvent(liked?"Clicked Comment Like":"Clicked Comment Unlike")},render:function render(){var props=omit(this.props,["siteId","commentId"]),likeCount=this.state.likeCount,likedLabel=this.translate("Liked");return React.createElement(LikeButton,_extends({},props,{likeCount:likeCount,liked:this.state.iLike,onLikeToggle:this.handleLikeToggle,likedLabel:likedLabel,isMini:true}))}});module.exports=CommentLikeButtonContainer},1673:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2),classNames=__webpack_require__(11);var Gravatar=__webpack_require__(301),User=__webpack_require__(26)().get(),CommentActions=__webpack_require__(1072),Notice=__webpack_require__(156),stats=__webpack_require__(701);var PostCommentForm=React.createClass({displayName:"PostCommentForm",propTypes:{post:React.PropTypes.object.isRequired,parentCommentID:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.number]),commentText:React.PropTypes.string,onUpdateCommentText:React.PropTypes.func},getInitialState:function getInitialState(){return{isButtonActive:false,isButtonVisible:false}},componentDidMount:function componentDidMount(){if(this.props.parentCommentID>0){this.refs.commentText.getDOMNode().focus()}},handleSubmit:function handleSubmit(event){event.preventDefault();this.submit()},handleKeyDown:function handleKeyDown(event){if(event.keyCode===13&&(event.ctrlKey||event.metaKey)){event.preventDefault();this.submit()}},handleKeyUp:function handleKeyUp(){this.updateCommentText()},handleFocus:function handleFocus(){this.toggleButtonVisibility(true)},handleBlur:function handleBlur(){if(!this.hasCommentText()){this.toggleButtonVisibility(false)}},toggleButtonVisibility:function toggleButtonVisibility(isVisible){this.setState({isButtonVisible:isVisible})},updateCommentText:function updateCommentText(){var commentText=this.getCommentText(),isButtonActive;this.props.onUpdateCommentText(commentText);isButtonActive=false;if(this.hasCommentText()){isButtonActive=true}this.setState({isButtonActive:isButtonActive})},resetCommentText:function resetCommentText(){var commentTextNode=this.refs.commentText.getDOMNode();commentTextNode.value="";this.setState({isButtonActive:false});this.toggleButtonVisibility(false)},hasCommentText:function hasCommentText(){var commentText=this.getCommentText();return commentText&&commentText.length>0},getCommentText:function getCommentText(){if(!this.refs.commentText){return}return this.refs.commentText.getDOMNode().value.trim()},submit:function submit(){var post=this.props.post,commentTextNode=this.refs.commentText.getDOMNode(),commentText=commentTextNode.value.trim();if(!commentText){this.resetCommentText();return false}if(this.props.parentCommentID>0){CommentActions.reply(post.site_ID,post.ID,this.props.parentCommentID,commentText)}else{CommentActions.add(post.site_ID,post.ID,commentText)}stats.recordAction("posted_comment");stats.recordGaEvent("Clicked Post Comment Button");this.resetCommentText();return true},renderError:function renderError(){var error=this.props.error,message;if(!error){return null}switch(error.error){case"comment_duplicate":message=this.translate("Duplicate comment detected. It looks like you've already said that!");break;default:message=this.translate("Sorry - there was a problem posting your comment.");break}return React.createElement(Notice,{text:message,className:"reader-comments__notice",showDismiss:false,status:"is-error"})},render:function render(){var post=this.props.post,buttonDisabled=true,buttonClasses;if(post&&post.discussion&&post.discussion.comments_open===false){if(post.discussion.comment_count&&post.discussion.comment_count>0){return React.createElement("p",{className:"comments__form-closed"},this.translate("Comments are closed."))}return null}if(this.state.isButtonActive){buttonDisabled=false}buttonClasses=classNames({"is-active":this.state.isButtonActive,"is-visible":this.state.isButtonVisible});return React.createElement("form",{className:"comments__form",ref:"commentForm"},React.createElement("fieldset",null,React.createElement(Gravatar,{user:User}),React.createElement("label",null,React.createElement("textarea",{defaultValue:this.props.commentText,rows:"1",placeholder:this.translate("Enter your comment here"),ref:"commentText",onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur}),React.createElement("button",{ref:"commentButton",className:buttonClasses,disabled:buttonDisabled,onClick:this.handleSubmit},this.translate("Send")),this.renderError())))}});module.exports=PostCommentForm},1674:function(module,exports,__webpack_require__){"use strict";var _extends=__webpack_require__(94)["default"];var React=__webpack_require__(2),map=__webpack_require__(282),noop=__webpack_require__(35),find=__webpack_require__(56);var Gravatar=__webpack_require__(301),User=__webpack_require__(26)().get(),CommentStore=__webpack_require__(902),CommentStates=__webpack_require__(865).state,PostTime=__webpack_require__(931),PostCommentForm=__webpack_require__(1673),CommentLikeButtonContainer=__webpack_require__(1672),stats=__webpack_require__(701);var PostComment=React.createClass({displayName:"PostComment",propTypes:{comments:React.PropTypes.object.isRequired,comment:React.PropTypes.object.isRequired,onReplyClick:React.PropTypes.func,errors:React.PropTypes.array,depth:React.PropTypes.number,post:React.PropTypes.object},getInitialState:function getInitialState(){return{}},getDefaultProps:function getDefaultProps(){return{onReplyClick:noop,errors:[],depth:0}},componentWillMount:function componentWillMount(){this.setState({depth:parseInt(this.props.depth,10)+1})},renderRepliesList:function renderRepliesList(){var comments=this.props.comments,comment=this.props.comment,replies=null,props=this.props,depth=this.state.depth,replyListItems;if(comments&&comments[comment.ID]){replies=comments[comment.ID]}if(!replies){return null}replyListItems=map(replies,function(reply){return React.createElement(PostComment,_extends({},props,{depth:depth,key:reply.ID,comment:reply}))});return React.createElement("ol",{className:"comments__list"},replyListItems)},handleReply:function handleReply(){var comment=this.props.comment;this.props.onReplyClick(comment.ID)},renderCommentForm:function renderCommentForm(){var post=this.props.post,comment=this.props.comment,commentText=this.props.commentText,onUpdateCommentText=this.props.onUpdateCommentText;if(this.props.activeReplyCommentID!==comment.ID){return null}return React.createElement(PostCommentForm,{ref:"postCommentForm",post:post,parentCommentID:comment.ID,commentText:commentText,onUpdateCommentText:onUpdateCommentText})},renderCommentActions:function renderCommentActions(comment){var showCancelReplyButton=false,onReplyCancel=this.props.onReplyCancel,post=this.props.post,showReplyButton=true;if(comment.state!==CommentStates.CONFIRMED){return null}if(this.props.activeReplyCommentID===comment.ID){showCancelReplyButton=true}if(post&&post.discussion&&post.discussion.comments_open===false){showReplyButton=false}return React.createElement("div",{className:"comment__actions"},showReplyButton?React.createElement("button",{className:"comment__actions-reply",onClick:this.handleReply},"Reply"):null,showCancelReplyButton?React.createElement("button",{className:"comment__actions-cancel-reply",onClick:onReplyCancel},"Cancel reply"):null,React.createElement(CommentLikeButtonContainer,{className:"comment__actions-like",tagName:"button",siteId:this.props.post.site_ID,commentId:comment.ID}),React.createElement("span",{className:"comment__actions-like-count"},comment.like_count?comment.like_count:null," likes"))},render:function render(){var comment=this.props.comment,error=find(this.props.errors,{ID:comment.ID});if(comment.state&&comment.state===CommentStates.PENDING){comment.author=User;comment.author.name=User.display_name}if(error&&comment.state&&comment.state===CommentStates.ERROR){return React.createElement(PostCommentWithError,_extends({},this.props,{repliesList:this.renderRepliesList()}))}return React.createElement("li",{className:"comment depth-"+this.props.depth},React.createElement("div",{className:"comment__author"},React.createElement(Gravatar,{user:comment.author}),React.createElement("strong",{className:"comment__username"},comment.author.name),React.createElement("small",{className:"comment__timestamp"},React.createElement("a",{href:comment.URL},React.createElement(PostTime,{date:comment.date})))),comment.status&&comment.status==="unapproved"?React.createElement("p",{className:"comment__moderation"},this.translate("Your comment is awaiting moderation.")):null,React.createElement("div",{className:"comment__content",dangerouslySetInnerHTML:{__html:comment.content}}),this.renderCommentActions(comment),this.renderCommentForm(),this.renderRepliesList())}});var PostCommentWithError=React.createClass({displayName:"PostCommentWithError",propTypes:{comments:React.PropTypes.object.isRequired,comment:React.PropTypes.object.isRequired,errors:React.PropTypes.array},getDefaultProps:function getDefaultProps(){return{errors:[]}},renderCommentForm:function renderCommentForm(){var post=this.props.post,comment=this.props.comment,commentText=comment.content,onUpdateCommentText=this.props.onUpdateCommentText,error=find(this.props.errors,{ID:comment.ID});return React.createElement(PostCommentForm,{ref:"postCommentForm",post:post,parentCommentID:comment.parent.ID,commentText:commentText,onUpdateCommentText:onUpdateCommentText,error:error})},render:function render(){return React.createElement("li",{className:"comment is-error"},this.renderCommentForm(),this.props.repliesList)}});var PostCommentList=React.createClass({displayName:"PostCommentList",getInitialState:function getInitialState(){var state=this.getStateFromStores();state.activeReplyCommentID=0;return state},getStateFromStores:function getStateFromStores(){var post=this.props.post;return{comments:CommentStore.getCommentsForPost(post.site_ID,post.ID),errors:CommentStore.getErrorsForPost(post.site_ID,post.ID)}},componentDidMount:function componentDidMount(){CommentStore.on("change",this._onChange);CommentStore.on("add",this._onAdd)},componentWillUnmount:function componentWillUnmount(){CommentStore.off("change",this._onChange);CommentStore.off("add",this._onAdd)},renderCommentsList:function renderCommentsList(){var post=this.props.post,comments=this.state.comments,commentListItems=[],errors=this.state.errors,activeReplyCommentID=this.state.activeReplyCommentID,onReplyClick=this.onReplyClick,onReplyCancel=this.onReplyCancel,commentText=this.state.commentText,onUpdateCommentText=this.onUpdateCommentText;if(!comments||!comments[0]){return null}comments[0].forEach(function(comment){commentListItems.push(React.createElement(PostComment,{post:post,comments:comments,comment:comment,errors:errors,key:comment.ID,activeReplyCommentID:activeReplyCommentID,onReplyClick:onReplyClick,onReplyCancel:onReplyCancel,commentText:commentText,onUpdateCommentText:onUpdateCommentText,depth:0}))});return React.createElement("ol",{className:"comments__list is-root"},commentListItems)},renderCommentForm:function renderCommentForm(){var post=this.props.post,commentText=this.state.commentText,onUpdateCommentText=this.onUpdateCommentText;if(this.state.activeReplyCommentID!==0&&!this.state.errors){return null}return React.createElement(PostCommentForm,{ref:"postCommentForm",post:post,parentCommentID:"0",commentText:commentText,onUpdateCommentText:onUpdateCommentText})},onReplyClick:function onReplyClick(commentID){this.setState({activeReplyCommentID:commentID});stats.recordGaEvent("Clicked Reply to Comment")},onReplyCancel:function onReplyCancel(){this.setState({activeReplyCommentID:0});stats.recordGaEvent("Clicked Cancel Reply to Comment")},onUpdateCommentText:function onUpdateCommentText(commentText){this.setState({commentText:commentText})},_onChange:function _onChange(){this.setState(this.getStateFromStores())},_onAdd:function _onAdd(){this.setState(this.getStateFromStores());this.setState({commentText:"",activeReplyCommentID:0})},render:function render(){var post=this.props.post;var commentCount=post.comment_count;if(this.state.comments===null){return null}return React.createElement("div",{className:"comments"},React.createElement("h3",{className:"comments__count"},commentCount," comments"),this.renderCommentsList(),this.renderCommentForm())}});module.exports=PostCommentList},1675:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2),page=__webpack_require__(13),debug=__webpack_require__(1)("calypso:reader:controller");var i18n=__webpack_require__(16),route=__webpack_require__(74),analytics=__webpack_require__(12),feedStreamFactory=__webpack_require__(1276),FeedStreamStoreActions=__webpack_require__(906),analyticsPageTitle="Reader",i18n=__webpack_require__(16);var __fullPostInstance=null,__lastTitle=null;function trackPageLoad(path,title,readerView){analytics.pageView.record(path,title);analytics.mc.bumpStat("reader_views",readerView==="full_post"?readerView:readerView+"_load");
}function trackUpdatesLoaded(key){analytics.mc.bumpStat("reader_views",key+"_load_new");analytics.ga.recordEvent("Reader","Clicked Load New Posts",key)}function trackScrollPage(path,title,category,readerView,pageNum){debug("scroll [%s], [%s], [%s], [%d]",path,title,category,pageNum);analytics.ga.recordEvent(category,"Loaded Next Page","page",pageNum);analytics.pageView.record(path,title);analytics.mc.bumpStat({newdash_pageviews:"scroll",reader_views:readerView+"_scroll"})}function removeFullPostDialog(){React.unmountComponentAtNode(document.getElementById("tertiary"));__fullPostInstance=null}function ensureStoreLoading(store){if(store.getPage()===1){FeedStreamStoreActions.fetchNextPage(store.id)}return store}function pageTitleSetter(context){return function(title){context.layout.title.set(i18n.translate("%s  Reader",{args:title}))}}module.exports={sidebar:function sidebar(context,next){var ReaderSidebarComponent=__webpack_require__(1702);context.layout.setState({section:"reader"});React.render(React.createElement(ReaderSidebarComponent,{path:context.path}),document.getElementById("secondary"));next()},following:function following(context){var FollowingComponent=__webpack_require__(820),basePath=route.sectionify(context.path),fullAnalyticsPageTitle=analyticsPageTitle+" > Following",followingStore=feedStreamFactory("following"),mcKey="following";ensureStoreLoading(followingStore);trackPageLoad(basePath,fullAnalyticsPageTitle,mcKey);pageTitleSetter(context)(i18n.translate("Following"));React.render(React.createElement(FollowingComponent,{key:"following",listName:i18n.translate("Following"),store:followingStore,trackScrollPage:trackScrollPage.bind(null,basePath,fullAnalyticsPageTitle,analyticsPageTitle,mcKey),onUpdatesShown:trackUpdatesLoaded.bind(null,mcKey)}),document.getElementById("primary"))},feedListing:function feedListing(context){var FeedStream=__webpack_require__(1680),basePath=route.sectionify(context.path),fullAnalyticsPageTitle=analyticsPageTitle+" > Feed > "+context.params.feed_id,feedStore=feedStreamFactory("feed:"+context.params.feed_id),setPageTitle=pageTitleSetter(context),mcKey="blog";ensureStoreLoading(feedStore);trackPageLoad(basePath,fullAnalyticsPageTitle,mcKey);React.render(React.createElement(FeedStream,{key:"feed-"+context.params.feed_id,store:feedStore,feedId:context.params.feed_id,setPageTitle:setPageTitle,trackScrollPage:trackScrollPage.bind(null,basePath,fullAnalyticsPageTitle,analyticsPageTitle,mcKey),onUpdatesShown:trackUpdatesLoaded.bind(null,mcKey),suppressSiteNameLink:true}),document.getElementById("primary"))},blogListing:function blogListing(context){var SiteStream=__webpack_require__(1704),basePath=route.sectionify(context.path),fullAnalyticsPageTitle=analyticsPageTitle+" > Site > "+context.params.blog_id,feedStore=feedStreamFactory("site:"+context.params.blog_id),setPageTitle=pageTitleSetter(context),mcKey="blog";ensureStoreLoading(feedStore);trackPageLoad(basePath,fullAnalyticsPageTitle,mcKey);React.render(React.createElement(SiteStream,{key:"site-"+context.params.blog_id,store:feedStore,siteId:context.params.blog_id,setPageTitle:setPageTitle,trackScrollPage:trackScrollPage.bind(null,basePath,fullAnalyticsPageTitle,analyticsPageTitle,mcKey),onUpdatesShown:trackUpdatesLoaded.bind(null,mcKey),suppressSiteNameLink:true}),document.getElementById("primary"))},feedPost:function feedPost(context){var FullPostDialog=__webpack_require__(1154),feedId=context.params.feed,postId=context.params.post,basePath=route.sectionify(context.path),fullPageTitle=analyticsPageTitle+" > Feed Post > "+feedId+" > "+postId,setPageTitle=pageTitleSetter(context);__lastTitle=context.layout.title.get();trackPageLoad(basePath,fullPageTitle,"full_post");__fullPostInstance=React.render(React.createElement(FullPostDialog,{feedId:feedId,postId:postId,setPageTitle:setPageTitle,onClose:function onClose(){page.back(context.lastRoute||"/")},onClosed:removeFullPostDialog}),document.getElementById("tertiary"))},resetTitle:function resetTitle(context,next){if(__lastTitle){context.layout.title.set(__lastTitle);__lastTitle=null}next()},blogPost:function blogPost(context){var FullPostDialog=__webpack_require__(1154),blogId=context.params.blog,postId=context.params.post,basePath=route.sectionify(context.path),fullPageTitle=analyticsPageTitle+" > Blog Post > "+blogId+" > "+postId,setPageTitle=pageTitleSetter(context);__lastTitle=context.layout.title.get();trackPageLoad(basePath,fullPageTitle,"full_post");__fullPostInstance=React.render(React.createElement(FullPostDialog,{blogId:blogId,postId:postId,context:context,setPageTitle:setPageTitle,onClose:function onClose(){page.back(context.lastRoute||"/")},onClosed:removeFullPostDialog}),document.getElementById("tertiary"))},removePost:function removePost(context,next){if(__fullPostInstance){__fullPostInstance.setState({isVisible:false});__fullPostInstance=false}next()},tagListing:function tagListing(context){var TagStream=__webpack_require__(1706),basePath=route.sectionify(context.path),fullAnalyticsPageTitle=analyticsPageTitle+" > Tag > "+context.params.tag,encodedTag=encodeURIComponent(context.params.tag).toLowerCase(),tagStore=feedStreamFactory("tag:"+context.params.tag),setPageTitle=pageTitleSetter(context),mcKey="topic";ensureStoreLoading(tagStore);trackPageLoad(basePath,fullAnalyticsPageTitle,mcKey);React.render(React.createElement(TagStream,{key:"tag-"+encodedTag,store:tagStore,tag:encodedTag,setPageTitle:setPageTitle,trackScrollPage:trackScrollPage.bind(null,basePath,fullAnalyticsPageTitle,analyticsPageTitle,mcKey),onUpdatesShown:trackUpdatesLoaded.bind(null,mcKey)}),document.getElementById("primary"))},listListing:function listListing(context){var ListStream=__webpack_require__(1697),basePath=route.sectionify(context.path),fullAnalyticsPageTitle=analyticsPageTitle+" > List > "+context.params.user+" - "+context.params.list,listStore=feedStreamFactory("list:"+context.params.user+"-"+context.params.list),setPageTitle=pageTitleSetter(context),mcKey="list";ensureStoreLoading(listStore);trackPageLoad(basePath,fullAnalyticsPageTitle,mcKey);React.render(React.createElement(ListStream,{key:"tag-"+context.params.user+"-"+context.params.list,store:listStore,list:{owner:context.params.user,slug:context.params.list},setPageTitle:setPageTitle,trackScrollPage:trackScrollPage.bind(null,basePath,fullAnalyticsPageTitle,analyticsPageTitle,mcKey),onUpdatesShown:trackUpdatesLoaded.bind(null,mcKey)}),document.getElementById("primary"))},readA8C:function readA8C(context){var FollowingComponent=__webpack_require__(820),basePath=route.sectionify(context.path),fullAnalyticsPageTitle=analyticsPageTitle+" > A8C",feedStore=feedStreamFactory("a8c"),mcKey="a8c";ensureStoreLoading(feedStore);trackPageLoad(basePath,fullAnalyticsPageTitle,mcKey);pageTitleSetter(context)("Automattic");React.render(React.createElement(FollowingComponent,{key:"read-a8c",listName:"Automattic",store:feedStore,trackScrollPage:trackScrollPage.bind(null,basePath,fullAnalyticsPageTitle,analyticsPageTitle,mcKey),onUpdatesShown:trackUpdatesLoaded.bind(null,mcKey)}),document.getElementById("primary"))},likes:function likes(context){var LikedPostsStream=__webpack_require__(1694),basePath=route.sectionify(context.path),fullAnalyticsPageTitle=analyticsPageTitle+" > My Likes",likedPostsStore=feedStreamFactory("likes"),setPageTitle=pageTitleSetter(context),mcKey="postlike";ensureStoreLoading(likedPostsStore);trackPageLoad(basePath,fullAnalyticsPageTitle,mcKey);React.render(React.createElement(LikedPostsStream,{key:"liked",store:likedPostsStore,setPageTitle:setPageTitle,trackScrollPage:trackScrollPage.bind(null,basePath,fullAnalyticsPageTitle,analyticsPageTitle,mcKey),onUpdatesShown:trackUpdatesLoaded.bind(null,mcKey)}),document.getElementById("primary"))},followingEdit:function followingEdit(context){var FollowingEdit=__webpack_require__(1682),setPageTitle=pageTitleSetter(context);React.render(React.createElement(FollowingEdit,{key:"following-edit",setPageTitle:setPageTitle}),document.getElementById("primary"))}}},1676:function(module,exports,__webpack_require__){"use strict";var _extends=__webpack_require__(94)["default"];var React=__webpack_require__(14),classNames=__webpack_require__(11);var DiscoverHelper=__webpack_require__(819);var arrowGridicon=React.createElement("svg",{className:"gridicon gridicon-arrow",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("path",{d:"M20 11H6.414l6.293-6.293-1.414-1.414L2.586 12l8.707 8.707 1.414-1.414L6.414 13H20"}));var DiscoverPostAttribution=React.createClass({displayName:"DiscoverPostAttribution",propTypes:{attribution:React.PropTypes.shape({author_name:React.PropTypes.string.isRequired,author_url:React.PropTypes.string.isRequired,blog_name:React.PropTypes.string.isRequired,blog_url:React.PropTypes.string.isRequired,avatar_url:React.PropTypes.string}).isRequired,siteUrl:React.PropTypes.string.isRequired},render:function render(){var attribution=this.props.attribution;var classes=classNames("discover-attribution is-post",{"is-missing-avatar":!attribution.avatar_url});var siteLinkProps=DiscoverHelper.getLinkProps(this.props.siteUrl);var siteClasses=classNames("discover-attribution__blog ignore-click");return React.createElement("div",{className:classes},attribution.avatar_url?React.createElement("img",{className:"gravatar",src:encodeURI(attribution.avatar_url),alt:"Avatar",width:"20",height:"20"}):arrowGridicon,React.createElement("span",{className:"discover-attribution__text"},this.translate("Originally posted by"),React.createElement("a",{className:"discover-attribution__author",rel:"external",target:"_blank",href:encodeURI(attribution.author_url)},attribution.author_name),this.translate("on"),React.createElement("a",_extends({},siteLinkProps,{className:siteClasses,href:encodeURI(this.props.siteUrl)}),attribution.blog_name)))}});module.exports=DiscoverPostAttribution},1677:function(module,exports,__webpack_require__){"use strict";var _extends=__webpack_require__(94)["default"];var React=__webpack_require__(14),classNames=__webpack_require__(11);var DiscoverHelper=__webpack_require__(819);var DiscoverSiteAttribution=React.createClass({displayName:"DiscoverSiteAttribution",propTypes:{attribution:React.PropTypes.shape({blog_name:React.PropTypes.string.isRequired,blog_url:React.PropTypes.string.isRequired,avatar_url:React.PropTypes.string}).isRequired,siteUrl:React.PropTypes.string.isRequired},render:function render(){var attribution=this.props.attribution;var classes=classNames("discover-attribution is-site",{"is-missing-avatar":!attribution.avatar_url});var siteLinkProps=DiscoverHelper.getLinkProps(this.props.siteUrl);var siteClasses=classNames("discover-attribution__blog ignore-click");return React.createElement("div",{className:classes},attribution.avatar_url?React.createElement("img",{className:"gravatar",src:encodeURI(attribution.avatar_url),alt:"Avatar",width:"20",height:"20"}):React.createElement("span",{className:"noticon noticon-website"}),React.createElement("span",null,React.createElement("a",_extends({},siteLinkProps,{className:siteClasses,href:encodeURI(this.props.siteUrl)}),this.translate("visit")," ",React.createElement("em",null,attribution.blog_name))))}});module.exports=DiscoverSiteAttribution},1678:function(module,exports,__webpack_require__){"use strict";var _extends=__webpack_require__(94)["default"];var React=__webpack_require__(2),classnames=__webpack_require__(11);var stats=__webpack_require__(701),DiscoverHelper=__webpack_require__(819);var DiscoverVisitLink=React.createClass({displayName:"DiscoverVisitLink",propTypes:{siteName:React.PropTypes.string,siteUrl:React.PropTypes.string},recordClick:function recordClick(){stats.recordPermalinkClick("summary_card_site_name");stats.recordGaEvent("Clicked Discover Permalink")},render:function render(){var siteLinkProps=DiscoverHelper.getLinkProps(this.props.siteUrl),siteName=React.createElement("a",_extends({},siteLinkProps,{onClick:this.recordClick,href:this.props.siteUrl}),React.createElement("span",null,this.props.siteName||"(untitled)")),classes=classnames("discover-visit-link");if(!this.props.siteName||!this.props.siteUrl){return null}return React.createElement("div",{className:classes},this.translate("Visit {{siteName/}} for more",{components:{siteName:siteName}}))}});module.exports=DiscoverVisitLink},1679:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2);var EmptyContent=__webpack_require__(100),ExternalLink=__webpack_require__(831),stats=__webpack_require__(701);var FeedEmptyContent=React.createClass({displayName:"FeedEmptyContent",shouldComponentUpdate:function shouldComponentUpdate(){return false},recordAction:function recordAction(){stats.recordAction("clicked_freshly_pressed_on_empty");stats.recordGaEvent("Clicked Freshly Pressed on EmptyContent")},recordSecondaryAction:function recordSecondaryAction(){stats.recordAction("clicked_recommendations_on_empty");stats.recordGaEvent("Clicked Recommendations on EmptyContent")},render:function render(){var action=React.createElement(ExternalLink,{className:"empty-content__action button is-primary",onClick:this.recordAction,href:"https://wordpress.com/fresh/"},this.translate("Explore our Editors' Picks")),secondaryAction=React.createElement(ExternalLink,{className:"empty-content__action button",onClick:this.recordSecondaryAction,href:"https://wordpress.com/recommendations/"},this.translate("Get recommendations on who to follow"));return React.createElement(EmptyContent,{title:this.translate("No recent posts..."),line:this.translate("This site has not posted anything recently."),action:action,secondaryAction:secondaryAction,illustration:"/calypso/images/drake/drake-empty-results.svg",illustrationWidth:500})}});module.exports=FeedEmptyContent},1680:function(module,exports,__webpack_require__){"use strict";var _extends=__webpack_require__(94)["default"];var _Object$keys=__webpack_require__(73)["default"];var React=__webpack_require__(2),url=__webpack_require__(43);var EmptyContent=__webpack_require__(1679),FollowingStream=__webpack_require__(820),FeedHeader=__webpack_require__(1152),FeedStore=__webpack_require__(971),FeedStoreActions=__webpack_require__(1274),FeedStoreState=__webpack_require__(808).state,FeedError=__webpack_require__(1151),SiteStore=__webpack_require__(838),SiteState=__webpack_require__(792).state;var FeedStream=React.createClass({displayName:"FeedStream",getInitialState:function getInitialState(){var feed=this.getFeed(),site=this.getSite(feed),title=this.getTitle(feed,site);return{title:title,feed:feed,site:site}},componentDidMount:function componentDidMount(){FeedStore.on("change",this.updateState);SiteStore.on("change",this.updateState)},componentWillUnmount:function componentWillUnmount(){FeedStore.off("change",this.updateState);SiteStore.off("change",this.updateState)},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(nextProps.feedId!==this.props.feedId){this.updateState()}},getTitle:function getTitle(feed,site){var title;if(!feed&&!site){return this.translate("Loading Feed")}if(feed.state===FeedStoreState.ERROR){title=this.translate("Error fetching feed")}else if(feed.state===FeedStoreState.COMPLETE){title=feed.name}if(!title&&site){title=site.get("name")}if(!title&&feed){title=feed.URL||feed.feed_URL;if(title){title=url.parse(title).hostname}}if(!title&&site){title=site.get("URL");if(title){title=url.parse(title).hostname}}if(!title){title=this.translate("Loading Feed")}return title},getFeed:function getFeed(){var feed=FeedStore.get(this.props.feedId);if(!feed){FeedStoreActions.fetch(this.props.feedId)}return feed},getSite:function getSite(){var feed=FeedStore.get(this.props.feedId),site;if(feed&&feed.blog_ID){site=SiteStore.get(feed.blog_ID);if(site&&site.get("state")!==SiteState.COMPLETE){site=null}}return site},updateState:function updateState(){var feed=this.getFeed(),site=this.getSite(),title=this.getTitle(feed,site),newState={};if(feed!==this.state.feed){newState.feed=feed}if(title!==this.state.title){newState.title=title}if(site&&site!==this.state.site){newState.site=site}if(_Object$keys(newState).length>0){this.setState(newState)}},render:function render(){var feed=FeedStore.get(this.props.feedId),emptyContent=React.createElement(EmptyContent,null);if(this.props.setPageTitle){this.props.setPageTitle(this.state.title)}if(feed&&feed.state===FeedStoreState.ERROR){return React.createElement(FeedError,{listName:this.state.title})}return React.createElement(FollowingStream,_extends({},this.props,{listName:this.state.title,emptyContent:emptyContent}),React.createElement(FeedHeader,{feed:feed,site:this.state.site}))}});module.exports=FeedStream},1681:function(module,exports){"use strict";module.exports={formatUrlForDisplay:function formatUrlForDisplay(url){if(!url){return}return url.replace(/^https?:\/\//,"")},getFeedTitle:function getFeedTitle(siteData,feedData,displayUrl){var feedTitle;if(siteData&&siteData.get("name")){feedTitle=siteData.get("name")}else if(feedData&&feedData.name){feedTitle=feedData.name}else{feedTitle=displayUrl}return feedTitle},getFeedStreamUrl:function getFeedStreamUrl(siteData,feedData){if(!siteData&&!feedData){return null}if(siteData){return"/read/blog/id/"+siteData.get("ID")}return"/read/blog/feed/"+feedData.feed_ID}}},1682:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2),filter=__webpack_require__(97),times=__webpack_require__(716);var Main=__webpack_require__(679),FeedSubscriptionStore=__webpack_require__(872),SiteStore=__webpack_require__(838),FeedStore=__webpack_require__(971),FeedSubscriptionActions=__webpack_require__(913),EmptyContent=__webpack_require__(100),InfiniteList=__webpack_require__(731),SubscriptionPlaceholder=__webpack_require__(1685),SubscriptionListItem=__webpack_require__(1683),SimpleNotice=__webpack_require__(162),stats=__webpack_require__(701),FollowingEditNavigation=__webpack_require__(1684);var initialLoadFeedCount=20;var FollowingEdit=React.createClass({displayName:"FollowingEdit",getInitialState:function getInitialState(){return this.getStateFromStores()},getStateFromStores:function getStateFromStores(){var sites={},feeds={},subscriptions=FeedSubscriptionStore.getSubscriptions(),updatedSubscriptions={list:[]};if(subscriptions){subscriptions.list.forEach(function(subscription){if(subscription.blog_ID&&!subscription.site){subscription.site=SiteStore.get(subscription.blog_ID)}if(subscription.feed_ID&&!subscription.feed){subscription.feed=FeedStore.get(subscription.feed_ID)}updatedSubscriptions.list.push(subscription)})}return{subscriptions:updatedSubscriptions,sites:sites,feeds:feeds,currentPage:FeedSubscriptionStore.getCurrentPage(),isLastPage:FeedSubscriptionStore.isLastPage(),isLoading:false,lastError:FeedSubscriptionStore.getLastError(),totalSubscriptions:FeedSubscriptionStore.getTotalSubscriptions()}},componentDidMount:function componentDidMount(){FeedSubscriptionStore.on("change",this._onChange);FeedSubscriptionStore.on("remove",this._onRemove);SiteStore.on("change",this._onChange);FeedStore.on("change",this._onChange)},componentWillUnmount:function componentWillUnmount(){FeedSubscriptionStore.clearErrors();FeedSubscriptionStore.off("change",this._onChange);SiteStore.off("change",this._onChange);FeedStore.off("change",this._onChange)},_onChange:function _onChange(){this.setState(this.getStateFromStores())},_onRemove:function _onRemove(url){this.setState({lastUnfollow:url})},fetchNextPage:function fetchNextPage(){if(this.state.isLastPage){return}this.setState({isLoading:true});FeedSubscriptionActions.fetchNextPage()},getSubscriptionRef:function getSubscriptionRef(subscription){return"subscription-"+subscription.ID},renderSubscription:function renderSubscription(subscription){var subscriptionKey=this.getSubscriptionRef(subscription);return React.createElement(SubscriptionListItem,{ref:subscriptionKey,key:subscriptionKey,subscription:subscription,siteData:subscription.site,feedData:subscription.feed,onUnfollow:this.onUnfollow})},renderLoadingPlaceholders:function renderLoadingPlaceholders(){var count=this.state.subscriptions.list.length?10:initialLoadFeedCount,placeholders=[];times(count,function(i){placeholders.push(React.createElement(SubscriptionPlaceholder,{key:"placeholder-"+i}))});return placeholders},renderErrorMessage:function renderErrorMessage(url){return React.createElement(SimpleNotice,{status:"is-error",isCompact:false,showDismiss:true,onClick:this.dismissError},this.translate("Sorry - there was a problem unfollowing {{strong}}%(url)s{{/strong}}.",{components:{strong:React.createElement("strong",null)},args:{url:url}}))},dismissError:function dismissError(event){event.preventDefault();FeedSubscriptionActions.dismissError(this.state.lastError);stats.recordAction("dismiss_follow_error");stats.recordGaEvent("Clicked Dismiss Follow Error")},render:function render(){var subscriptions=this.state.subscriptions,subscriptionsWithId=[];if(subscriptions.list){subscriptionsWithId=filter(subscriptions.list,function(subscription){return subscription.ID})}if(!subscriptionsWithId||subscriptionsWithId.length<initialLoadFeedCount){if(this.props.isLastPage){return React.createElement(EmptyContent,{title:this.translate("No subscribed feeds found.")})}}return React.createElement(Main,{className:"following-edit"},React.createElement(FollowingEditNavigation,{totalSubscriptions:this.state.totalSubscriptions}),this.state.lastError?this.renderErrorMessage(this.state.lastError.URL):null,React.createElement(InfiniteList,{role:"main",items:subscriptionsWithId,lastPage:this.state.isLastPage,fetchingNextPage:this.state.isLoading,guessedItemHeight:200,fetchNextPage:this.fetchNextPage,getItemRef:this.getSubscriptionRef,renderItem:this.renderSubscription,renderLoadingPlaceholders:this.renderLoadingPlaceholders}))}});module.exports=FollowingEdit},1683:function(module,exports,__webpack_require__){"use strict";var debug=__webpack_require__(1)("calypso:reader:following:edit");var React=__webpack_require__(2);var Card=__webpack_require__(95),FollowingEditHelper=__webpack_require__(1681),formatting=__webpack_require__(287),FeedSubscriptionActions=__webpack_require__(913),FollowButton=__webpack_require__(948),SubscriptionStates=__webpack_require__(836).state;var genericFeedIcon=React.createElement("svg",{className:"gridicon gridicon__globe",height:"48",width:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",{id:"globe"},React.createElement("path",{d:"M12,2C6.477,2,2,6.477,2,12c0,5.523,4.477,10,10,10s10-4.477,10-10C22,6.477,17.523,2,12,2z M12,20l2-2l1-1v-2h-2v-1l-1-1 H9v3l2,2v1.931C7.06,19.436,4,16.072,4,12l1,1h2v-2h2l3-3V6h-2L9,5V4.589C9.927,4.212,10.939,4,12,4s2.073,0.212,3,0.589V6l-1,1v2 l1,1l3.13-3.13c0.752,0.897,1.304,1.964,1.606,3.13H18l-2,2v2l1,1h2l0.286,0.286C18.029,18.061,15.239,20,12,20z"})));var SubscriptionListItem=React.createClass({displayName:"SubscriptionListItem",propTypes:{subscription:React.PropTypes.object.isRequired,siteData:React.PropTypes.object,feedData:React.PropTypes.object},handleFollowToggle:function handleFollowToggle(){debug("handleFollowToggle");FeedSubscriptionActions[this.isFollowing()?"unfollow":"follow"](this.props.subscription.URL)},isFollowing:function isFollowing(){return!!this.props.subscription&&this.props.subscription.state===SubscriptionStates.SUBSCRIBED},render:function render(){var subscription=this.props.subscription,siteData=this.props.siteData,feedData=this.props.feedData,iconUrl=siteData&&siteData.get("icon"),displayUrl=FollowingEditHelper.formatUrlForDisplay(subscription.URL),isFollowing=this.isFollowing();return React.createElement(Card,{className:"is-compact following-edit__card",key:"subscription-"+subscription.ID},React.createElement("span",{className:"following-edit__list-icon"},iconUrl?React.createElement("img",{src:iconUrl.get("img"),alt:"Feed icon"}):genericFeedIcon),React.createElement("h2",{className:"following-edit__list-title"},React.createElement("a",{href:FollowingEditHelper.getFeedStreamUrl(siteData,feedData,displayUrl)},formatting.decodeEntities(FollowingEditHelper.getFeedTitle(siteData,feedData,displayUrl)))),React.createElement("p",{className:"following-edit__list-url"},React.createElement("a",{href:subscription.URL},displayUrl)),React.createElement("div",{className:"following-edit__actions"},React.createElement(FollowButton,{following:isFollowing,onFollowToggle:this.handleFollowToggle})))}});module.exports=SubscriptionListItem},1684:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2);var SectionNav=__webpack_require__(700),NavTabs=__webpack_require__(685),NavItem=__webpack_require__(684);var FollowingEditNavigation=React.createClass({displayName:"FollowingEditNavigation",propTypes:{totalSubscriptions:React.PropTypes.number},render:function render(){var sectionNavSelectedText=React.createElement("span",null,React.createElement("span",null,this.translate("Sites I Follow")));return React.createElement(SectionNav,{selectedText:sectionNavSelectedText},React.createElement(NavTabs,{selectedText:this.translate("Sites")},React.createElement(NavItem,{count:this.props.totalSubscriptions,selected:true},this.translate("Sites"))))}});module.exports=FollowingEditNavigation},1685:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(14);var Card=__webpack_require__(95);var genericFeedIcon=React.createElement("svg",{className:"gridicon gridicon__globe",height:"48",width:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",{id:"globe"},React.createElement("path",{d:"M12,2C6.477,2,2,6.477,2,12c0,5.523,4.477,10,10,10s10-4.477,10-10C22,6.477,17.523,2,12,2z M12,20l2-2l1-1v-2h-2v-1l-1-1 H9v3l2,2v1.931C7.06,19.436,4,16.072,4,12l1,1h2v-2h2l3-3V6h-2L9,5V4.589C9.927,4.212,10.939,4,12,4s2.073,0.212,3,0.589V6l-1,1v2 l1,1l3.13-3.13c0.752,0.897,1.304,1.964,1.606,3.13H18l-2,2v2l1,1h2l0.286,0.286C18.029,18.061,15.239,20,12,20z"})));module.exports=React.createClass({displayName:"SubscriptionPlaceholder",render:function render(){return React.createElement(Card,{className:"is-compact following-edit__card is-placeholder"},React.createElement("span",{className:"following-edit__list-icon"},genericFeedIcon),React.createElement("h2",{className:"following-edit__list-title"},React.createElement("span",{className:"placeholder-text"},"Subscription title")),React.createElement("p",{className:"following-edit__list-url"},React.createElement("span",{className:"placeholder-text"},"Subscription URL")))}})},1686:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2);var EmptyContent=__webpack_require__(100),ExternalLink=__webpack_require__(831),stats=__webpack_require__(701);var FollowingEmptyContent=React.createClass({displayName:"FollowingEmptyContent",shouldComponentUpdate:function shouldComponentUpdate(){return false},recordAction:function recordAction(){stats.recordAction("clicked_freshly_pressed_on_empty");stats.recordGaEvent("Clicked Freshly Pressed on EmptyContent")},recordSecondaryAction:function recordSecondaryAction(){stats.recordAction("clicked_recommendations_on_empty");stats.recordGaEvent("Clicked Recommendations on EmptyContent")},render:function render(){var action=React.createElement(ExternalLink,{className:"empty-content__action button is-primary",onClick:this.recordAction,href:"https://wordpress.com/fresh/"},this.translate("Explore our Editors' Picks")),secondaryAction=React.createElement(ExternalLink,{className:"empty-content__action button",onClick:this.recordSecondaryAction,href:"https://wordpress.com/recommendations/"},this.translate("Get recommendations on who to follow"));return React.createElement(EmptyContent,{title:this.translate("Welcome to the Reader"),line:this.translate("Recent posts from blogs and sites you follow will appear here."),action:action,secondaryAction:secondaryAction,illustration:"/calypso/images/drake/drake-all-done.svg",illustrationWidth:500})}});module.exports=FollowingEmptyContent},1687:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(14);var analytics=__webpack_require__(12),SiteBlockActions=__webpack_require__(985),Card=__webpack_require__(95);var PostBlocked=React.createClass({displayName:"PostBlocked",mixins:[React.addons.PureRenderMixin],unblock:function unblock(){analytics.mc.bumpStat("reader_actions","unblocked_blog");analytics.ga.recordEvent("reader_actions","Clicked Unblock Site");SiteBlockActions.unblock(this.props.post.site_ID)},render:function render(){var post=this.props.post;return React.createElement(Card,{tagName:"article",className:"reader__card is-blocked"},React.createElement("p",null,this.translate("You have blocked posts from %(site_name)s.",{args:{site_name:post.site_name}}),React.createElement("a",{onClick:this.unblock},this.translate("Undo"),"?")))}});module.exports=PostBlocked},1688:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(14);var Card=__webpack_require__(95);var PostPlaceholder=React.createClass({displayName:"PostPlaceholder",mixins:[React.addons.PureRenderMixin],render:function render(){return React.createElement(Card,{tagName:"article",className:"reader__card is-placeholder"},React.createElement("div",{className:"reader__post-header"},React.createElement("h1",{className:"reader__post-title"},React.createElement("a",{className:"reader__post-title-link",target:"_blank"},React.createElement("span",{className:"reader__placeholder-text"},"Loading interesting posts"))),React.createElement("div",{className:"reader__post-byline"},React.createElement("span",{className:"site-icon",height:"16",width:"16"}),React.createElement("h4",{className:"reader__site-name"},React.createElement("span",{className:"reader__placeholder-text"},"Loading Sites")),React.createElement("time",{className:"reader__post-time"},React.createElement("span",{className:"reader__placeholder-text"},"10 min")))),React.createElement("div",{className:"reader__post-excerpt"},React.createElement("p",null,React.createElement("span",{className:"reader__placeholder-text"},"Please wait while we grab all the interesting posts, photos, videos and more to show you in Reader. It shouldnt take long."))),React.createElement("ul",{className:"reader__post-footer"},React.createElement("li",{className:"reader__post-read-time"},React.createElement("span",{className:"reader__placeholder-text"},"10 min read"))))}});module.exports=PostPlaceholder},1689:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(14),config=__webpack_require__(4);var Card=__webpack_require__(95);var PostUnavailable=React.createClass({displayName:"PostUnavailable",mixins:[React.addons.PureRenderMixin],componentWillMount:function componentWillMount(){this.errors={403:this.translate("This is a private site. Youre following the site, but not currently a member. Please request membership to display these posts in Reader."),"default":this.translate("An error occurred loading this post")}},render:function render(){var errorMessage=this.errors[this.props.post.statusCode||"default"];if(this.props.post.statusCode===404){return null}return React.createElement(Card,{tagName:"article",className:"reader__card is-error"},React.createElement("div",{className:"reader__post-header"},React.createElement("h1",{className:"reader__post-title"},React.createElement("a",{className:"reader__post-title-link",target:"_blank"},React.createElement("span",{className:"reader__placeholder-text"},"Oops!")))),React.createElement("div",{className:"reader__post-excerpt"},React.createElement("p",null,errorMessage),config.isEnabled("reader/full-errors")?React.createElement("pre",null,JSON.stringify(this.props.post,null,"  ")):null))}});module.exports=PostUnavailable},1690:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(14),assign=__webpack_require__(15),classnames=__webpack_require__(11),closest=__webpack_require__(175),classes=__webpack_require__(52),first=__webpack_require__(709),forOwn=__webpack_require__(704),twemoji=__webpack_require__(1181),get=__webpack_require__(828);
var Card=__webpack_require__(95),CommentButton=__webpack_require__(1066),DISPLAY_TYPES=__webpack_require__(905),LikeButton=__webpack_require__(1155),ObserveWindowSizeMixin=__webpack_require__(1294),PostImages=__webpack_require__(1699),PostOptions=__webpack_require__(1159),PostErrors=__webpack_require__(1157),PostExcerpt=__webpack_require__(960),ReadingTime=__webpack_require__(1701),SiteIcon=__webpack_require__(102),SiteLink=__webpack_require__(1161),SiteStore=__webpack_require__(838),SiteStoreActions=__webpack_require__(988),Share=__webpack_require__(1160),utils=__webpack_require__(1025),PostCommentHelper=__webpack_require__(1150),PostTime=__webpack_require__(931),LikeHelper=__webpack_require__(1156),stats=__webpack_require__(701),PostExcerptLink=__webpack_require__(1158),PostPermalink=__webpack_require__(1700),DiscoverPostAttribution=__webpack_require__(1676),DiscoverSiteAttribution=__webpack_require__(1677),DiscoverHelper=__webpack_require__(819),FeedPostStore=__webpack_require__(867);var Post=React.createClass({displayName:"Post",mixins:[React.addons.PureRenderMixin,ObserveWindowSizeMixin],propTypes:{post:React.PropTypes.object.isRequired,additionalClasses:React.PropTypes.object},getMaxFeaturedWidthSize:function getMaxFeaturedWidthSize(){return React.findDOMNode(this).offsetWidth},shouldApplyIsLong:function shouldApplyIsLong(){var node=React.findDOMNode(this.refs.siteName);return!!(node&&node.scrollWidth>node.offsetWidth+2)},onWindowResize:function onWindowResize(){this.updateFeatureSize();this.checkSiteNameForOverflow()},getInitialState:function getInitialState(){return this.getStateFromStores()},getStateFromStores:function getStateFromStores(props){var post,siteId,site,originalPost,isDiscoverPost,isDiscoverSitePick;props=props||this.props;post=props.post;siteId=!post.is_external&&post.site_ID;isDiscoverPost=post&&DiscoverHelper.isDiscoverPost(post);if(isDiscoverPost){isDiscoverSitePick=post&&DiscoverHelper.isDiscoverSitePick(post)}if(siteId){site=SiteStore.get(siteId);if(!site){SiteStoreActions.fetch(siteId)}}if(isDiscoverPost&&!isDiscoverSitePick&&get(post,"discover_metadata.featured_post_wpcom_data.blog_id")){originalPost=FeedPostStore.get({blogId:post.discover_metadata.featured_post_wpcom_data.blog_id,postId:post.discover_metadata.featured_post_wpcom_data.post_id})}return{site:site,originalPost:originalPost,isDiscoverPost:isDiscoverPost,isDiscoverSitePick:isDiscoverSitePick}},componentDidMount:function componentDidMount(){this.updateFeatureSize();this.checkSiteNameForOverflow();this._parseEmoji();SiteStore.on("change",this.updateState)},componentWillUnmount:function componentWillUnmount(){SiteStore.off("change",this.updateState)},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(nextProps.post!==this.props.post){this.updateState(nextProps)}},updateState:function updateState(props){var newState=this.getStateFromStores(props);if(newState.site!==this.state.site){this.setState(newState)}},componentDidUpdate:function componentDidUpdate(){this.updateFeatureSize();this.checkSiteNameForOverflow();this._parseEmoji()},getFeaturedSize:function getFeaturedSize(aspect,available){available=available||this.getMaxFeaturedWidthSize();return{width:available+"px",height:Math.floor(available/aspect)+"px"}},featuredImageComponent:function featuredImageComponent(post){var featuredImage=post.canonical_image&&post.canonical_image.uri,featuredEmbed=first(post.content_embeds),maxWidth=Math.min(653,window.innerWidth),featuredSize,useFeaturedEmbed;if(post.use_excerpt){featuredEmbed=null}if(!(featuredImage||featuredEmbed)){return null}useFeaturedEmbed=featuredEmbed&&(!featuredImage||featuredImage!==post.featured_image);if(useFeaturedEmbed&&featuredEmbed.aspectRatio){this.featuredAspect=featuredEmbed.aspectRatio}else if(featuredImage&&post.canonical_image.width>=maxWidth){this.featuredAspect=post.canonical_image.width/post.canonical_image.height;featuredSize=this.getFeaturedSize(this.featuredAspect,maxWidth)}return useFeaturedEmbed?React.createElement("div",{ref:"featuredEmbed",className:"reader__post-featured-video",key:"featuredVideo",dangerouslySetInnerHTML:{__html:featuredEmbed.iframe}}):React.createElement("div",{className:"reader__post-featured-image",onClick:this.handlePermalinkClick},featuredSize?React.createElement("img",{className:"reader__post-featured-image-image",ref:"featuredImage",src:featuredImage,style:featuredSize}):React.createElement("img",{className:"reader__post-featured-image-image",src:featuredImage}))},updateFeatureSize:function updateFeatureSize(){var node;if(this.refs.featuredImage){node=React.findDOMNode(this.refs.featuredImage)}else if(this.refs.featuredEmbed){node=React.findDOMNode(this.refs.featuredEmbed).querySelector("iframe")}if(node){assign(node.style,this.getFeaturedSize(this.featuredAspect))}},checkSiteNameForOverflow:function checkSiteNameForOverflow(){var headerNode=React.findDOMNode(this.refs.siteName);if(!headerNode){return}classes(headerNode).toggle("is-long",this.shouldApplyIsLong())},handleCardClick:function handleCardClick(event){var rootNode=React.findDOMNode(this),post=this.props.post,isDiscoverPost=this.state.isDiscoverPost,postUrl=isDiscoverPost?post.discover_metadata.permalink:post.URL,postToOpen=post;if(event.button>0||event.metaKey||event.controlKey||event.shiftKey||event.altKey){if(closest(event.target,".reader__post-title-link",true,rootNode)){stats.recordPermalinkClick("card_title_with_modifier");stats.recordGaEvent("Clicked Post Permalink with Modifier")}return}if(closest(event.target,".should-scroll",true,rootNode)){setTimeout(function(){window.scrollTo(0,0)},100)}if(closest(event.target,".ignore-click, [rel=external]",true,rootNode)){return}if(closest(event.target,"a",true,rootNode)&&closest(event.target,".reader__full-post-content",true,rootNode)){return}if(this.props.post.use_excerpt){event.preventDefault();stats.recordPermalinkClick("summary_card");stats.recordGaEvent("Clicked Post Summary Card");window.open(postUrl)}if(this.state.originalPost){postToOpen=this.state.originalPost}if(!event.defaultPrevented){event.preventDefault();this.props.onClick(postToOpen)}},recordCommentButtonClick:function recordCommentButtonClick(){stats.recordAction("click_comments");stats.recordGaEvent("Clicked Post Comment Button")},recordTagClick:function recordTagClick(){stats.recordAction("click_tag");stats.recordGaEvent("Clicked Tag Link")},_parseEmoji:function _parseEmoji(){twemoji.parse(React.findDOMNode(this))},render:function render(){var post=this.props.post,site=this.state.site&&this.state.site.toJS(),featuredImage=this.featuredImageComponent(post),shouldShowComments=PostCommentHelper.shouldShowComments(post),shouldShowLikes=LikeHelper.shouldShowLikes(post),hasFeaturedImage=featuredImage!==null,articleClasses=assign({reader__card:true,"has-featured-image":hasFeaturedImage},this.additionalClasses),primaryTag=post.primary_tag,tagClasses={"reader__post-tag":true,"is-long":primaryTag&&primaryTag.name.length>25},shouldShowExcerptOnly=!!post.use_excerpt,shouldUseFullExcerpt=!shouldShowExcerptOnly&&post.display_type&DISPLAY_TYPES.ONE_LINER,siteName=utils.siteNameFromSiteAndPost(this.state.site,post),siteTitleClasses={"ignore-click":true,"should-scroll":true},siteNameClasses=classnames({"reader__site-name":true}),siteLink,isDiscoverPost=this.state.isDiscoverPost,isDiscoverSitePick=this.state.isDiscoverSitePick,discoverSiteUrl,originalPost=this.state.originalPost,likeSiteId=originalPost?originalPost.site_ID:post.site_ID,likePostId=originalPost?originalPost.ID:post.ID,commentCount=originalPost?originalPost.discussion.comment_count:post.discussion.comment_count;siteTitleClasses=classnames(siteTitleClasses);siteLink=this.props.suppressSiteNameLink?siteName:React.createElement(SiteLink,{className:siteTitleClasses,post:post},siteName);forOwn(DISPLAY_TYPES,function(value,key){if(post.display_type&&post.display_type&value){articleClasses["is-"+key.toLowerCase().replace("_","-")]=true}});if(shouldShowExcerptOnly){articleClasses["is-excerpt-only"]=true}articleClasses=classnames(articleClasses);tagClasses=classnames(tagClasses);if(isDiscoverPost){discoverSiteUrl=DiscoverHelper.getSiteUrl(post)}return React.createElement(Card,{tagName:"article",onClick:this.handleCardClick,className:articleClasses},React.createElement(PostErrors,{post:post}),React.createElement("div",{className:"reader__post-header"},React.createElement(PostOptions,{post:post,site:this.state.site}),React.createElement("div",{className:"reader__post-byline"},React.createElement(SiteIcon,{site:site,size:32}),React.createElement("div",{className:siteNameClasses,ref:"siteName"},React.createElement("h4",{title:siteName},siteLink),post.author.name!==siteName?React.createElement("span",{className:"reader__post-author"},post.author.name,""):null,primaryTag&&!shouldShowExcerptOnly?React.createElement("span",{className:tagClasses},React.createElement("a",{title:primaryTag.name,onClick:this.recordTagClick,className:"ignore-click",href:"/tag/"+primaryTag.slug},"#",primaryTag.name),""):null,React.createElement(PostTime,{date:post.date,className:"reader__post-time"})))),featuredImage,post.title?React.createElement("h1",{className:"reader__post-title"},React.createElement("a",{className:"reader__post-title-link",href:post.URL,target:"_blank"},post.title)):null,shouldUseFullExcerpt?React.createElement("div",{key:"full-post-inline",className:"reader__full-post-content",dangerouslySetInnerHTML:{__html:post.content}}):React.createElement(PostExcerpt,{text:post.excerpt}),shouldShowExcerptOnly?React.createElement(PostExcerptLink,{siteName:siteName,postUrl:post.URL}):null,!shouldShowExcerptOnly?React.createElement(PostImages,{postImages:post.content_images||[]}):null,isDiscoverPost&&!isDiscoverSitePick?React.createElement(DiscoverPostAttribution,{attribution:post.discover_metadata.attribution,siteUrl:discoverSiteUrl}):null,isDiscoverSitePick?React.createElement(DiscoverSiteAttribution,{attribution:post.discover_metadata.attribution,siteUrl:discoverSiteUrl}):null,React.createElement("ul",{className:"reader__post-footer"},React.createElement(ReadingTime,{readingTime:post.reading_time||0,words:post.word_count}),React.createElement(Share,{post:post}),React.createElement(PostPermalink,{siteName:siteName,postUrl:post.URL}),shouldShowComments?React.createElement(CommentButton,{onClick:this.recordCommentButtonClick,commentCount:commentCount}):null,shouldShowLikes?React.createElement(LikeButton,{siteId:likeSiteId,postId:likePostId}):null))}});module.exports=Post},1691:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(14),classnames=__webpack_require__(11),closest=__webpack_require__(175);var Card=__webpack_require__(95),PostTime=__webpack_require__(931),SiteIcon=__webpack_require__(102);var CrossPost=React.createClass({displayName:"CrossPost",mixins:[React.addons.PureRenderMixin],handleCardClick:function handleCardClick(event){var rootNode=React.findDOMNode(this);if(closest(event.target,".should-scroll",true,rootNode)){setTimeout(function(){window.scrollTo(0,0)},100)}if(closest(event.target,".ignore-click",true,rootNode)){return}if(closest(event.target,"a",true,rootNode)&&closest(event.target,".reader__x-post",true,rootNode)){return}if(event.metaKey||event.controlKey||event.shiftKey||event.altKey){return}if(!event.defaultPrevented){event.preventDefault();window.open(this.props.post.URL)}},render:function render(){var post=this.props.post,xpostTitle,xpostSite,site=post.meta&&post.meta.data&&post.meta.data.site||(post.author?{icon:{img:post.author.avatar_URL}}:null),articleClasses=classnames({reader__card:true,"is-x-post":true}),siteName=this.props.suppressSiteNameLink?post.site_name:React.createElement("a",{href:"/read/blog/feed/"+post.feed_ID,className:"ignore-click should-scroll"},post.site_name);xpostTitle=post.title;xpostTitle=xpostTitle.replace(/x-post:/i,"");xpostSite=post.content;xpostSite=xpostSite.replace(/x-post from /i,"");xpostSite=xpostSite.replace(/: /i,"");xpostSite=xpostSite.replace(/x-comment from /i,"");xpostSite=xpostSite.replace(/comment on /i,"");return React.createElement(Card,{tagName:"article",onClick:this.handleCardClick,className:articleClasses},post.title?React.createElement("h1",{className:"reader__post-title"},React.createElement("a",{className:"reader__post-title-link",href:post.URL,target:"_blank"},xpostTitle)):null,React.createElement("div",{className:"reader__post-header"},React.createElement("div",{className:"reader__post-byline"},React.createElement(SiteIcon,{site:site,size:16}),React.createElement("h4",{className:"reader__site-name"},siteName),React.createElement("a",{href:post.URL,target:"_blank"},React.createElement(PostTime,{className:"reader__post-time",date:post.date})))),React.createElement("div",{className:"reader__x-post"},React.createElement("svg",{className:"gridicon gridicon-arrow",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("path",{d:"M20 11H6.414l6.293-6.293-1.414-1.414L2.586 12l8.707 8.707 1.414-1.414L6.414 13H20"})),React.createElement("span",{className:"reader__x-post-label"},"Cross-posted from "),React.createElement("span",{className:"reader__x-post-site",dangerouslySetInnerHTML:{__html:xpostSite}})))}});module.exports=CrossPost},1692:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2);var PostTeaser=React.createClass({displayName:"PostTeaser",render:function render(){return React.createElement("article",{className:"card reader__post-card is-next-post-teaser"},React.createElement("h5",{className:"teaser__title"},"Next Post"),React.createElement("h4",{className:"site-title"},React.createElement("img",{className:"site-title__avatar",height:"50",width:"50",alt:"Site Avatar",src:"https://0.gravatar.com/avatar/6d2ab4e5874adf3d0efba7ed5c7b5b25?s=100&d=https%3A%2F%2Fs2.wp.com%2Fwp-content%2Fthemes%2Fh4%2Ftabs%2Fimages%2Fdefaultavatar.png&r=PG"}),React.createElement("span",{className:"site-title__text"},"Arabic Literature (in English)")),React.createElement("h1",{className:"post-title"},"Concealing and Revealing Torture in Literature"))}});module.exports=PostTeaser},1693:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2);var EmptyContent=__webpack_require__(100),ExternalLink=__webpack_require__(831),stats=__webpack_require__(701);var TagEmptyContent=React.createClass({displayName:"TagEmptyContent",shouldComponentUpdate:function shouldComponentUpdate(){return false},recordAction:function recordAction(){stats.recordAction("clicked_following_on_empty");stats.recordGaEvent("Clicked Following on EmptyContent")},recordSecondaryAction:function recordSecondaryAction(){stats.recordAction("clicked_freshly_pressed_on_empty");stats.recordGaEvent("Clicked Freshly Pressed on EmptyContent")},render:function render(){var action=React.createElement("a",{className:"empty-content__action button is-primary",onClick:this.recordAction,href:"/"},this.translate("Back to Following")),secondaryAction=React.createElement(ExternalLink,{className:"empty-content__action button",onClick:this.recordSecondaryAction,href:"https://wordpress.com/fresh/"},this.translate("Explore our Editors' Picks"));return React.createElement(EmptyContent,{title:this.translate("No Likes Yet"),line:this.translate("Posts that you like will appear here."),action:action,secondaryAction:secondaryAction,illustration:"/calypso/images/drake/drake-empty-results.svg",illustrationWidth:500})}});module.exports=TagEmptyContent},1694:function(module,exports,__webpack_require__){"use strict";var _extends=__webpack_require__(94)["default"];var React=__webpack_require__(2);var FollowingStream=__webpack_require__(820),EmptyContent=__webpack_require__(1693);var LikedStream=React.createClass({displayName:"LikedStream",render:function render(){var title=this.translate("My Likes"),emptyContent=React.createElement(EmptyContent,null);if(this.props.setPageTitle){this.props.setPageTitle(title)}return React.createElement(FollowingStream,_extends({},this.props,{listName:title,emptyContent:emptyContent}))}});module.exports=LikedStream},1695:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(14),classnames=__webpack_require__(11);var FeedStreamStoreActions=__webpack_require__(906),stats=__webpack_require__(701);var Gap=React.createClass({displayName:"Gap",propTypes:{gap:React.PropTypes.object.isRequired,store:React.PropTypes.object.isRequired},getInitialState:function getInitialState(){return{isFilling:false}},render:function render(){var classes=classnames({"reader-list-gap":true,"is-filling":this.state.isFilling});return React.createElement("div",{className:classes,onTouchTap:this.handleClick},React.createElement("button",{type:"button",className:"button reader-list-gap__button"},this.translate("Load More Posts")))},handleClick:function handleClick(){FeedStreamStoreActions.fillGap(this.props.store.id,this.props.gap);this.setState({isFilling:true});stats.recordAction("fill_gap");stats.recordGaEvent("Clicked Fill Gap")}});module.exports=Gap},1696:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2);var EmptyContent=__webpack_require__(100),ExternalLink=__webpack_require__(831),stats=__webpack_require__(701);var ListEmptyContent=React.createClass({displayName:"ListEmptyContent",shouldComponentUpdate:function shouldComponentUpdate(){return false},recordAction:function recordAction(){stats.recordAction("clicked_following_on_empty");stats.recordGaEvent("Clicked Following on EmptyContent")},recordSecondaryAction:function recordSecondaryAction(){stats.recordAction("clicked_freshly_pressed_on_empty");stats.recordGaEvent("Clicked Freshly Pressed on EmptyContent")},render:function render(){var action=React.createElement("a",{className:"empty-content__action button is-primary",onClick:this.recordAction,href:"/"},this.translate("Back to Following")),secondaryAction=React.createElement(ExternalLink,{className:"empty-content__action button",onClick:this.recordSecondaryAction,href:"https://wordpress.com/fresh/"},this.translate("Explore our Editors' Picks"));return React.createElement(EmptyContent,{title:this.translate("No recent posts..."),line:this.translate("The sites in this list have not posted anything recently."),action:action,secondaryAction:secondaryAction,illustration:"/calypso/images/drake/drake-empty-results.svg",illustrationWidth:500})}});module.exports=ListEmptyContent},1697:function(module,exports,__webpack_require__){"use strict";var _extends=__webpack_require__(94)["default"];var React=__webpack_require__(2),shallowEqual=__webpack_require__(185);var FollowingStream=__webpack_require__(820),EmptyContent=__webpack_require__(1696),ReaderLists=__webpack_require__(984),ReaderListActions=__webpack_require__(1083),ReaderListSubscriptions=__webpack_require__(1084),StreamHeader=__webpack_require__(1162);var FeedStream=React.createClass({displayName:"FeedStream",getInitialState:function getInitialState(){return{title:this.getTitle(),subscribed:this.isSubscribed()}},componentDidMount:function componentDidMount(){ReaderLists.on("change",this.updateState);ReaderListSubscriptions.on("change",this.updateState)},componentWillUnmount:function componentWillUnmount(){ReaderLists.off("change",this.updateState);ReaderListSubscriptions.off("change",this.updateState)},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(!shallowEqual(nextProps.list,this.props.list)){this.updateState(nextProps)}},updateState:function updateState(props){props=props||this.props;var newState={title:this.getTitle(props),subscribed:this.isSubscribed(props)};if(newState.title!==this.state.title||newState.subscribed!==this.state.subscribed){this.setState(newState)}},getTitle:function getTitle(props){props=props||this.props;var list=ReaderLists.get(props.list.owner,props.list.slug);if(!list){ReaderListActions.fetchList(props.list.owner,props.list.slug);return this.translate("Loading List")}return list.title||list.slug},isSubscribed:function isSubscribed(props){props=props||this.props;var list=ReaderLists.get(props.list.owner,props.list.slug);if(!list){return false}return ReaderListSubscriptions.isSubscribed(list.owner,list.slug)},toggleFollowing:function toggleFollowing(isFollowing){var list=ReaderLists.get(this.props.list.owner,this.props.list.slug);ReaderListActions[isFollowing?"follow":"unfollow"](list.owner,list.slug)},render:function render(){var list=ReaderLists.get(this.props.list.owner,this.props.list.slug),shouldShowFollow=list&&!list.is_owner,shouldShowEdit=!shouldShowFollow,editUrl=null,emptyContent=React.createElement(EmptyContent,null);if(list){editUrl="https://wordpress.com/read/list/"+list.owner+"/"+list.slug+"/edit"}if(this.props.setPageTitle){this.props.setPageTitle(this.state.title)}return React.createElement(FollowingStream,_extends({},this.props,{listName:this.state.title,emptyContent:emptyContent}),React.createElement(StreamHeader,{isPlaceholder:!list,icon:React.createElement("svg",{className:"gridicon gridicon__list",height:"32",width:"32",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("path",{d:"M9 19h10v-2H9v2zm0-6h10v-2H9v2zm0-8v2h10V5H9zm-3-.5c-.828 0-1.5.672-1.5 1.5S5.172 7.5 6 7.5 7.5 6.828 7.5 6 6.828 4.5 6 4.5zm0 6c-.828 0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5 1.5-.672 1.5-1.5-.672-1.5-1.5-1.5zm0 6c-.828 0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5 1.5-.672 1.5-1.5-.672-1.5-1.5-1.5z"}))),title:this.state.title,description:list&&list.owner,showFollow:shouldShowFollow,following:this.state.subscribed,onFollowToggle:this.toggleFollowing,showEdit:shouldShowEdit,editUrl:editUrl}))}});module.exports=FeedStream},1698:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2);var Gravatar=__webpack_require__(301),PostTime=__webpack_require__(931),utils=__webpack_require__(1025),stats=__webpack_require__(701);var PostByline=React.createClass({displayName:"PostByline",recordTagClick:function recordTagClick(){stats.recordAction("click_tag");stats.recordGaEvent("Clicked Tag Link")},recordDateClick:function recordDateClick(){stats.recordPermalinkClick("timestamp");stats.recordGaEvent("Clicked Post Permalink","timestamp")},recordAuthorClick:function recordAuthorClick(){stats.recordAction("click_author");stats.recordGaEvent("Clicked Author Link")},render:function render(){var post=this.props.post,site=this.props.site,siteName=utils.siteNameFromSiteAndPost(site,post),primaryTag=post&&post.primary_tag;if(!siteName){siteName=this.translate("(no title)")}return React.createElement("ul",{className:"full-post__byline"},post.author&&post.author.name?React.createElement("li",{className:"byline__author"},React.createElement("a",{href:post.author.URL||null,target:"_blank",onClick:this.recordAuthorClick},React.createElement(Gravatar,{user:post.author,size:24}),React.createElement("span",{className:"byline__author-name"},post.author.name)),""):null,primaryTag?React.createElement("li",{className:"byline__tag"},React.createElement("a",{href:"/tag/"+primaryTag.slug,onClick:this.recordTagClick},"#",primaryTag.name),""):null,post.date&&post.URL?React.createElement("li",{className:"byline__date"},React.createElement("a",{className:"byline__date-link",onClick:this.recordDateClick,href:post.URL,target:"_blank"},React.createElement(PostTime,{date:post.date}))):null)}});module.exports=PostByline},1699:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(14),resizeImageUrl=__webpack_require__(837),classes=__webpack_require__(52),ReactCSSTransitionGroup=React.addons.CSSTransitionGroup;var stats=__webpack_require__(701);var PostImages=React.createClass({displayName:"PostImages",getInitialState:function getInitialState(){return{viewing:false}},toggleGallery:function toggleGallery(event){if(event.defaultPrevented){return}event.preventDefault();var newState=!this.state.viewing;stats.recordAction(newState?"open_gallery":"close_gallery");stats.recordGaEvent(newState?"Clicked Open Gallery":"Clicked Close Gallery");this.setState({viewing:newState});classes(document.documentElement).toggle("reader-gallery-open")},ignoreClick:function ignoreClick(event){event.preventDefault()},render:function render(){var images=this.props.postImages,count=images.length,containerClasses=["reader-post-images","ignore-click"],fullList;if(count<2){return null}if(this.state.viewing){fullList=images.map(function(image,index){return React.createElement("li",{key:"full-image-"+index,className:"reader-post-images__full-image"},React.createElement("img",{src:resizeImageUrl(image.src,{h:800,w:800}),onClick:this.ignoreClick}))},this)}if(this.state.viewing){containerClasses.push("is-viewing")}containerClasses=containerClasses.join(" ");return React.createElement("div",{className:containerClasses,onClick:this.toggleGallery},React.createElement(PostImageThumbList,{postImages:images}),React.createElement("span",{className:"reader-post-images__label"},this.translate("View Gallery")),React.createElement("span",{className:"reader-post-images__count"},this.translate("%(count)d image","%(count)d images",{count:count,args:{count:count}})),React.createElement("div",{className:"reader-post-images__full-list"},React.createElement("span",{className:"reader-post-images__close"},this.translate("Close")),React.createElement(ReactCSSTransitionGroup,{component:"ol",transitionName:"gallery-image",transitionAppear:true},fullList)))}});var PostImageThumbList=React.createClass({displayName:"PostImageThumbList",mixins:[React.addons.PureRenderMixin],render:function render(){var images=this.props.postImages,thumbList=images.map(function(image,index){return React.createElement("li",{key:"thumb-image-"+index,className:"reader-post-images__image"},React.createElement("img",{src:resizeImageUrl(image.src,{resize:"40,40"})}))});return React.createElement("ol",{className:"reader-post-images__list"},thumbList)}});module.exports=PostImages},1700:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2);var stats=__webpack_require__(701);var PostPermalink=React.createClass({displayName:"PostPermalink",propTypes:{siteName:React.PropTypes.string,postUrl:React.PropTypes.string},recordClick:function recordClick(){stats.recordPermalinkClick("card_visit_link");stats.recordGaEvent("Clicked Card Permalink")},render:function render(){if(!this.props.siteName||!this.props.postUrl){return null}return React.createElement("li",{className:"post-permalink",onClick:this.recordClick},React.createElement("a",{href:this.props.postUrl,rel:"external",target:"_blank"},this.translate("Visit Site",{comment:"Visit the post on the original site"})))}});module.exports=PostPermalink},1701:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(14);var ReadingTime=React.createClass({displayName:"ReadingTime",mixins:[React.addons.PureRenderMixin],render:function render(){var words=this.props.words||0,timeInMinutes=Math.round(this.props.readingTime/60),approxTime=null,readingTime;if(timeInMinutes>1){approxTime=React.createElement("span",{className:"reading-time__approx"},"( ",this.translate("~%d min",{args:[timeInMinutes],context:"An approximate time to read something, in minutes"}),")")}readingTime=this.translate("%d word {{Time/}}","%d words {{Time/}}",{count:words,args:[words],components:{Time:approxTime}});return React.createElement("li",{className:"byline__reading-time reading-time"},readingTime)}});module.exports=ReadingTime},1702:function(module,exports,__webpack_require__){(function(process){"use strict";var assign=__webpack_require__(15),classnames=__webpack_require__(11),closest=__webpack_require__(175),debug=__webpack_require__(1)("calypso:reader:sidebar"),map=__webpack_require__(282),React=__webpack_require__(2),page=__webpack_require__(13),url=__webpack_require__(43);var layoutFocus=__webpack_require__(75),Tags=__webpack_require__(1087),TagActions=__webpack_require__(1086),ReaderLists=__webpack_require__(1084),ListStore=__webpack_require__(984),ReaderListActions=__webpack_require__(1083),ReaderTeams=__webpack_require__(1304),SidebarActions=__webpack_require__(1303),stats=__webpack_require__(701),config=__webpack_require__(4);module.exports=React.createClass({displayName:"ReaderSidebar",componentWillMount:function componentWillMount(){debug("Mounting the reader sidebar React component.")},itemLinkClass:function itemLinkClass(path,additionalClasses){var basePath=this.props.path.replace(/\/edit$/,"");return classnames(assign({selected:basePath.toLowerCase()===path.toLowerCase()},additionalClasses))},handleClick:function handleClick(event){if(!event.isDefaultPrevented()&&!closest(event.target,"input,textarea",true)){layoutFocus.setNext("content");window.scrollTo(0,0)}},componentDidMount:function componentDidMount(){Tags.on("change",this.updateState);Tags.on("add",this.highlightNewTag);ReaderLists.on("change",this.updateState);ReaderLists.on("create",this.highlightNewList);ReaderTeams.on("change",this.updateState)},componentWillUnmount:function componentWillUnmount(){Tags.off("change",this.updateState);Tags.off("add",this.highlightNewTag);ReaderLists.off("change",this.updateState);ReaderLists.off("create",this.highlightNewList);ReaderTeams.off("change",this.updateState)},getInitialState:function getInitialState(){return this.getStateFromStores()},getStateFromStores:function getStateFromStores(){var tags=Tags.get(),lists=ReaderLists.get(),teams=ReaderTeams.get();if(!(tags&&lists&&teams)){SidebarActions.fetch()}return{tags:tags,lists:lists,teams:teams}},updateState:function updateState(){this.setState(this.getStateFromStores())},followTag:function followTag(event){var tag,subscription;event.preventDefault();tag=React.findDOMNode(this.refs.addTagInput).value;subscription=Tags.getSubscription(TagActions.slugify(tag));stats.recordAction("followed_topic");stats.recordGaEvent("Clicked Follow Topic",tag);if(subscription){this.highlightNewTag(subscription)}else{TagActions.follow(tag)}},unfollowTag:function unfollowTag(event){var node=closest(event.target,"[data-tag-slug]",true);event.preventDefault();if(node&&node.dataset.tagSlug){stats.recordAction("unfollowed_topic");stats.recordGaEvent("Clicked Unfollow Topic",node.dataset.tagSlug);TagActions.unfollow({slug:node.dataset.tagSlug})}},highlightNewList:function highlightNewList(list){list=ListStore.get(list.owner,list.slug);window.location.href=url.resolve("https://wordpress.com",url.resolve(list.URL,"edit"));React.findDOMNode(this.refs.addListInput).value=""},highlightNewTag:function highlightNewTag(tag){process.nextTick(function(){page("/tag/"+tag.slug);window.scrollTo(0,0)});React.findDOMNode(this.refs.addTagInput).value=""},createList:function createList(event){event.preventDefault();stats.recordAction("add_list");stats.recordGaEvent("Clicked Create List");ReaderListActions.create(React.findDOMNode(this.refs.addListInput).value)},handleCreateListKeyDown:function handleCreateListKeyDown(event){if(event.keyCode===13){this.createList(event)}},handleFollowTagKeyDown:function handleFollowTagKeyDown(event){if(event.keyCode===13){this.followTag(event)}},renderLists:function renderLists(){if(!this.state.lists){return null}return map(this.state.lists,function(list){return React.createElement("li",{className:this.itemLinkClass("/read/list/"+list.owner+"/"+list.slug,{"sidebar-dynamic-menu__list":true}),key:list.ID},React.createElement("a",{href:list.URL},list.title),list.is_owner?React.createElement("a",{className:"sidebar-dynamic-menu__action",rel:"external",href:url.resolve(url.resolve("https://wordpress.com/",list.URL),"edit/")},React.createElement("svg",{className:"gridicon gridicon-cog sidebar-dynamic-menu__action-icon",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("path",{d:"M21 14.978l-2.396-2.13v-.798c0-.266 0-.532-.133-.8l2.397-2.128-.532-1.464-3.195.266c-.266-.4-.665-.8-1.065-1.065l.266-3.195L14.88 3l-2.13 2.53c-.265-.134-.53-.134-.798-.134-.266 0-.532 0-.8.133L9.023 3l-1.33.665.265 3.195c-.532.266-.93.665-1.197 1.064L3.565 7.79 2.9 9.123l2.396 2.13v.798c0 .266 0 .532.133.8l-2.397 2.128.665 1.464 3.194-.266c.266.4.665.8 1.065 1.065l-.266 3.195 1.465.665 2.13-2.396h.664c.265 0 .53 0 .798-.133l2.13 2.397 1.463-.532-.265-3.194c.4-.265.8-.664 1.065-1.064l3.194.266.666-1.464zm-6.388-2.928c0 1.464-1.198 2.662-2.662 2.662s-2.662-1.198-2.662-2.662 1.198-2.662 2.662-2.662 2.662 1.198 2.662 2.662z"
}))),React.createElement("span",{className:"sidebar-dynamic-menu__action-label"},this.translate("Edit"))):null)},this)},renderTags:function renderTags(){if(!this.state.tags){return null}return map(this.state.tags,function(tag){return React.createElement("li",{className:this.itemLinkClass("/tag/"+tag.slug,{"sidebar-dynamic-menu__tag":true}),key:tag.ID},React.createElement("a",{href:tag.URL},tag.title||tag.slug),tag.ID!=="pending"?React.createElement("button",{className:"sidebar-dynamic-menu__action","data-tag-slug":tag.slug,onClick:this.unfollowTag},React.createElement("svg",{className:"gridicon gridicon-cross sidebar-dynamic-menu__action-icon",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("path",{d:"M20.707 4.707l-1.414-1.414L12 10.586 4.707 3.293 3.293 4.707 10.586 12l-7.293 7.293 1.414 1.414L12 13.414l7.293 7.293 1.414-1.414L13.414 12"})),React.createElement("span",{className:"sidebar-dynamic-menu__action-label"},this.translate("Unfollow"))):null)},this)},renderTeams:function renderTeams(){if(!this.state.teams){return null}return map(this.state.teams,function(team){var teamUri="/read/"+encodeURIComponent(team.slug);return React.createElement("li",{className:this.itemLinkClass(teamUri,{"sidebar-streams__team":true}),key:team.slug},React.createElement("a",{href:teamUri},React.createElement("svg",{className:"menu-link-icon gridicon gridicon-"+team.slug,width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},React.createElement("path",{d:"M7.99 1.57C3.75 1.57 1 4.57 1 7.8v0.4c0 3.18 2.75 6.24 6.99 6.24 4.26 0 7.01-3.05 7.01-6.24V7.8C15 4.57 12.25 1.57 7.99 1.57zM12.74 8.13c0 2.32-1.69 4.42-4.74 4.42 -3.05 0-4.73-2.1-4.73-4.42V7.84c0-2.32 1.67-4.38 4.73-4.38 3.06 0 4.75 2.07 4.75 4.39V8.13z"}),React.createElement("path",{d:"M9.47 5.73C9.07 5.47 8.52 5.59 8.26 6L6.21 9.17c-0.26 0.41-0.15 0.95 0.26 1.21 0.4 0.26 0.95 0.14 1.21-0.26l2.05-3.17C9.99 6.53 9.88 5.99 9.47 5.73z"})),React.createElement("span",{className:"menu-link-text"},team.title)))},this)},getFollowingEditLink:function getFollowingEditLink(){var followingEditUrl="/following/edit",followingEditRel;if(!config.isEnabled("reader/following-edit")){followingEditUrl="https://wordpress.com".concat(followingEditUrl);followingEditRel="external"}return{url:followingEditUrl,rel:followingEditRel}},render:function render(){var followingEditLink=this.getFollowingEditLink();return React.createElement("ul",{className:"wpcom-sidebar sidebar reader-sidebar",onClick:this.handleClick},React.createElement("li",{className:"sidebar-menu sidebar-streams"},React.createElement("ul",null,React.createElement("li",{className:this.itemLinkClass("/",{"sidebar-streams__following":true})},React.createElement("a",{href:"/"},React.createElement("svg",{className:"menu-link-icon gridicon gridicon-following",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("path",{d:"M11.944 17.083L7 12.056l1.648-1.676 3.296 3.352 8.3-7.385C18.445 3.722 15.425 2 12 2 6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10c0-1.212-.227-2.37-.622-3.444l-9.434 8.527z"}))),React.createElement("span",{className:"menu-link-text"},this.translate("Following"))),React.createElement("a",{className:"sidebar-streams__edit",href:followingEditLink.url,rel:followingEditLink.rel},React.createElement("svg",{className:"gridicon gridicon-cog sidebar-streams__edit-icon",height:"24",width:"24",viewBox:"0 0 24 24","data-reactid":".6.1.1.1:$64286.1.0"},React.createElement("g",{"data-reactid":".6.1.1.1:$64286.1.0.0"},React.createElement("path",{d:"M21 14.978l-2.396-2.13v-.798c0-.266 0-.532-.133-.8l2.397-2.128-.532-1.464-3.195.266c-.266-.4-.665-.8-1.065-1.065l.266-3.195L14.88 3l-2.13 2.53c-.265-.134-.53-.134-.798-.134-.266 0-.532 0-.8.133L9.023 3l-1.33.665.265 3.195c-.532.266-.93.665-1.197 1.064L3.565 7.79 2.9 9.123l2.396 2.13v.798c0 .266 0 .532.133.8l-2.397 2.128.665 1.464 3.194-.266c.266.4.665.8 1.065 1.065l-.266 3.195 1.465.665 2.13-2.396h.664c.265 0 .53 0 .798-.133l2.13 2.397 1.463-.532-.265-3.194c.4-.265.8-.664 1.065-1.064l3.194.266.666-1.464zm-6.388-2.928c0 1.464-1.198 2.662-2.662 2.662s-2.662-1.198-2.662-2.662 1.198-2.662 2.662-2.662 2.662 1.198 2.662 2.662z","data-reactid":".6.1.1.1:$64286.1.0.0.0"}))),React.createElement("span",{className:"sidebar-streams__edit-label"},this.translate("Edit")))),this.renderTeams(),React.createElement("li",{className:this.itemLinkClass("/fresh",{"sidebar-streams__freshly-pressed":true})},React.createElement("a",{href:"https://wordpress.com/fresh/",rel:"external"},React.createElement("span",{className:"menu-link-text"},this.translate("Freshly Pressed")))),React.createElement("li",{className:this.itemLinkClass("/recommendations",{"sidebar-streams__recommendations":true})},React.createElement("a",{href:"https://wordpress.com/recommendations/",rel:"external"},React.createElement("span",{className:"menu-link-text"},this.translate("Recommended Blogs")))))),React.createElement("li",{className:"sidebar-menu sidebar-dynamic-menu"},React.createElement("h2",{className:"sidebar-heading"},this.translate("Lists")),React.createElement("ul",null,React.createElement("li",{className:"sidebar-dynamic-menu__add",key:"add-list"},React.createElement("input",{className:"sidebar-dynamic-menu__add-input",type:"text",placeholder:this.translate("New List"),ref:"addListInput",onKeyDown:this.handleCreateListKeyDown}),React.createElement("button",{className:"sidebar-dynamic-menu__add-button",onClick:this.createList},React.createElement("svg",{className:"gridicon gridicon-follow sidebar-dynamic-menu__add-icon",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm6 11h-5v5h-2v-5H6v-2h5V6h2v5h5v2z"}))),React.createElement("span",{className:"sidebar-dynamic-menu__add-label"},this.translate("Create List")))),this.renderLists())),React.createElement("li",{className:"sidebar-menu sidebar-dynamic-menu"},React.createElement("h2",{className:"sidebar-heading"},this.translate("Tags")),React.createElement("ul",null,React.createElement("li",{className:"sidebar-dynamic-menu__add",key:"add-tag"},React.createElement("input",{className:"sidebar-dynamic-menu__add-input",type:"text",placeholder:this.translate("Follow a Tag"),ref:"addTagInput",onKeyDown:this.handleFollowTagKeyDown}),React.createElement("button",{className:"sidebar-dynamic-menu__add-button",onClick:this.followTag},React.createElement("svg",{className:"gridicon gridicon-follow sidebar-dynamic-menu__add-icon",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm6 11h-5v5h-2v-5H6v-2h5V6h2v5h5v2z"}))),React.createElement("span",{className:"sidebar-dynamic-menu__add-label"},this.translate("Follow")))),React.createElement("li",{className:this.itemLinkClass("/tags/",{"sidebar-dynamic-menu__explore":true}),key:"explore-tags"},React.createElement("a",{href:"https://wordpress.com/tags/",rel:"external"},React.createElement("span",{className:"menu-link-text"},this.translate("Explore Tags")))),this.renderTags())),React.createElement("li",{className:"sidebar-menu sidebar-activity"},React.createElement("h2",{className:"sidebar-heading"},this.translate("My Activity")),React.createElement("ul",null,React.createElement("li",{className:this.itemLinkClass("/activities/comments/",{"sidebar-activity__comments":true})},React.createElement("a",{href:"https://wordpress.com/activities/comments/",rel:"external"},React.createElement("svg",{className:"menu-link-icon gridicon gridicon-like",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("path",{d:"M3 6v9c0 1.105.895 2 2 2h9v5l5.325-3.804c1.05-.75 1.675-1.963 1.675-3.254V6c0-1.105-.895-2-2-2H5c-1.105 0-2 .895-2 2z"}))),React.createElement("span",{className:"menu-link-text"},this.translate("My Comments")))),React.createElement("li",{className:this.itemLinkClass("/activities/likes",{"sidebar-activity__likes":true})},React.createElement("a",{href:"/activities/likes"},React.createElement("svg",{className:"menu-link-icon gridicon gridicon-like",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("path",{d:"M11.875 2l2.582 6.953 7.418.304-5.822 4.602L18.055 21l-6.18-4.11L5.695 21l2.002-7.14-5.822-4.603 7.418-.304"}))),React.createElement("span",{className:"menu-link-text"},this.translate("My Likes")))))))}})}).call(exports,__webpack_require__(284))},1703:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2);var EmptyContent=__webpack_require__(100),ExternalLink=__webpack_require__(831),stats=__webpack_require__(701);var SiteEmptyContent=React.createClass({displayName:"SiteEmptyContent",shouldComponentUpdate:function shouldComponentUpdate(){return false},recordAction:function recordAction(){stats.recordAction("clicked_freshly_pressed_on_empty");stats.recordGaEvent("Clicked Freshly Pressed on EmptyContent")},recordSecondaryAction:function recordSecondaryAction(){stats.recordAction("clicked_recommendations_on_empty");stats.recordGaEvent("Clicked Recommendations on EmptyContent")},render:function render(){var action=React.createElement(ExternalLink,{className:"empty-content__action button is-primary",onClick:this.recordAction,href:"https://wordpress.com/fresh/"},this.translate("Explore our Editors' Picks")),secondaryAction=React.createElement(ExternalLink,{className:"empty-content__action button",onClick:this.recordSecondaryAction,href:"https://wordpress.com/recommendations/"},this.translate("Get recommendations on who to follow"));return React.createElement(EmptyContent,{title:this.translate("No Posts"),line:this.translate("This site has not posted anything yet. Try back later."),action:action,secondaryAction:secondaryAction,illustration:"/calypso/images/drake/drake-empty-results.svg",illustrationWidth:500})}});module.exports=SiteEmptyContent},1704:function(module,exports,__webpack_require__){"use strict";var _extends=__webpack_require__(94)["default"];var React=__webpack_require__(2);var FeedHeader=__webpack_require__(1152),EmptyContent=__webpack_require__(1703),FollowingStream=__webpack_require__(820),SiteStore=__webpack_require__(838),SiteStoreActions=__webpack_require__(988),SiteState=__webpack_require__(792).state,FeedError=__webpack_require__(1151);var SiteStream=React.createClass({displayName:"SiteStream",getInitialState:function getInitialState(){return{site:SiteStore.get(this.props.siteId),title:this.getTitle()}},componentDidMount:function componentDidMount(){SiteStore.on("change",this.updateState)},componentWillUnmount:function componentWillUnmount(){SiteStore.off("change",this.updateState)},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(nextProps.siteId!==this.props.siteId){this.updateState()}},updateState:function updateState(){var site=SiteStore.get(this.props.siteId),newTitle=this.getTitle();if(newTitle!==this.state.title||site!==this.state.site){this.setState({title:newTitle,site:site})}},getSite:function getSite(){var site=SiteStore.get(this.props.siteId);if(!site){SiteStoreActions.fetch(this.props.siteId)}if(site&&site.get("state")!==SiteState.COMPLETE){site=null}return site},getTitle:function getTitle(){var site=this.getSite();if(!site){return}if(site.get("state")===SiteState.COMPLETE){return site.get("title")||site.get("domain")}else if(site.get("state")===SiteState.ERROR){return this.translate("Error fetching site")}},render:function render(){var site=this.state.site,title=this.state.title,emptyContent=React.createElement(EmptyContent,null);if(!title){title=this.translate("Loading Site")}if(this.props.setPageTitle){this.props.setPageTitle(title)}if(site&&site.get("state")===SiteState.ERROR){return React.createElement(FeedError,{listName:title})}return React.createElement(FollowingStream,_extends({},this.props,{listName:title,emptyContent:emptyContent}),React.createElement(FeedHeader,{site:this.state.site}))}});module.exports=SiteStream},1705:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(2);var EmptyContent=__webpack_require__(100),ExternalLink=__webpack_require__(831),stats=__webpack_require__(701);var TagEmptyContent=React.createClass({displayName:"TagEmptyContent",shouldComponentUpdate:function shouldComponentUpdate(){return false},recordAction:function recordAction(){stats.recordAction("clicked_tags_on_empty");stats.recordGaEvent("Clicked Tags on EmptyContent")},recordSecondaryAction:function recordSecondaryAction(){stats.recordAction("clicked_freshly_pressed_on_empty");stats.recordGaEvent("Clicked Freshly Pressed on EmptyContent")},render:function render(){var action=React.createElement(ExternalLink,{className:"empty-content__action button is-primary",onClick:this.recordAction,href:"https://wordpress.com/tags/"},this.translate("Explore Tags")),secondaryAction=React.createElement(ExternalLink,{className:"empty-content__action button",onClick:this.recordSecondaryAction,href:"https://wordpress.com/fresh/"},this.translate("Explore our Editors' Picks"));return React.createElement(EmptyContent,{title:this.translate("No recent posts..."),line:this.translate("No posts have recently been tagged with this tag for your language."),action:action,secondaryAction:secondaryAction,illustration:"/calypso/images/drake/drake-empty-results.svg",illustrationWidth:500})}});module.exports=TagEmptyContent},1706:function(module,exports,__webpack_require__){"use strict";var _extends=__webpack_require__(94)["default"];var React=__webpack_require__(2),toTitleCase=__webpack_require__(289);var FollowingStream=__webpack_require__(820),EmptyContent=__webpack_require__(1705),ReaderTags=__webpack_require__(1088),ReaderTagActions=__webpack_require__(1086),TagSubscriptions=__webpack_require__(1087),StreamHeader=__webpack_require__(1162);var FeedStream=React.createClass({displayName:"FeedStream",getInitialState:function getInitialState(){return{title:this.getTitle(),subscribed:this.isSubscribed()}},componentDidMount:function componentDidMount(){ReaderTags.on("change",this.updateState);TagSubscriptions.on("change",this.updateState)},componentWillUnmount:function componentWillUnmount(){ReaderTags.off("change",this.updateState);TagSubscriptions.off("change",this.updateState)},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(nextProps.tag!==this.props.tag){this.updateState()}},updateState:function updateState(){var newState={title:this.getTitle(),subscribed:this.isSubscribed()};if(newState.title!==this.state.title||newState.subscribed!==this.state.subscribed){this.setState(newState)}},getTitle:function getTitle(){var tag=ReaderTags.get(this.props.tag);if(!tag){ReaderTagActions.fetchTag(this.props.tag);return this.translate("Loading Tag")}return toTitleCase(tag.title||tag.slug)||tag.title},isSubscribed:function isSubscribed(){var tag=ReaderTags.get(this.props.tag);if(!tag){return false}return TagSubscriptions.isSubscribed(tag.slug)},toggleFollowing:function toggleFollowing(isFollowing){var tag=ReaderTags.get(this.props.tag);ReaderTagActions[isFollowing?"follow":"unfollow"](tag)},render:function render(){var tag=ReaderTags.get(this.props.tag),headerTitle=tag?this.translate("%s",{args:[this.state.title]}):this.state.title,emptyContent=React.createElement(EmptyContent,null);if(this.props.setPageTitle){this.props.setPageTitle(this.state.title)}return React.createElement(FollowingStream,_extends({},this.props,{listName:this.state.title,emptyContent:emptyContent}),React.createElement(StreamHeader,{isPlaceholder:!tag,icon:React.createElement("svg",{className:"gridicon gridicon__tag",height:"32",width:"32",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},React.createElement("g",null,React.createElement("path",{d:"M16 7H5c-1.105 0-2 .896-2 2v6c0 1.104.895 2 2 2h11l5-5-5-5z"}))),title:headerTitle,showFollow:true,following:this.state.subscribed,onFollowToggle:this.toggleFollowing}))}});module.exports=FeedStream},1707:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(14),noop=__webpack_require__(35),classnames=__webpack_require__(11);var screenTitle=__webpack_require__(163),Gridicon=__webpack_require__(281);var UpdateCount=React.createClass({displayName:"UpdateCount",mixins:[React.addons.PureRenderMixin],propTypes:{count:React.PropTypes.number.isRequired,onClick:React.PropTypes.func},getDefaultProps:function getDefaultProps(){return{onClick:noop}},componentDidMount:function componentDidMount(){screenTitle.setCount(this.props.count?this.countString():false)},componentDidUpdate:function componentDidUpdate(){screenTitle.setCount(this.props.count?this.countString():false)},countString:function countString(){return this.props.count>=40?"40+":""+this.props.count},render:function render(){var counterClasses=classnames({"reader-update-notice":true,"is-active":this.props.count>0});return React.createElement("div",{className:counterClasses,onTouchTap:this.handleClick},React.createElement(Gridicon,{icon:"arrow-up",size:18}),this.translate("%s new post","%s new posts",{args:[this.countString()],count:this.props.count}))},handleClick:function handleClick(event){event.preventDefault();this.props.onClick()}});module.exports=UpdateCount},1729:function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(1737),__esModule:true}},1736:function(module,exports,__webpack_require__){"use strict";var _Array$from=__webpack_require__(1729)["default"];exports["default"]=function(arr){return Array.isArray(arr)?arr:_Array$from(arr)};exports.__esModule=true},1737:function(module,exports,__webpack_require__){__webpack_require__(765);__webpack_require__(1746);module.exports=__webpack_require__(41).core.Array.from},1746:function(module,exports,__webpack_require__){var $=__webpack_require__(41),ctx=__webpack_require__(727),$def=__webpack_require__(164),$iter=__webpack_require__(692),call=__webpack_require__(821);$def($def.S+$def.F*!__webpack_require__(1040)(function(iter){Array.from(iter)}),"Array",{from:function from(arrayLike){var O=Object($.assertDefined(arrayLike)),mapfn=arguments[1],mapping=mapfn!==undefined,f=mapping?ctx(mapfn,arguments[2],2):undefined,index=0,length,result,step,iterator;if($iter.is(O)){iterator=$iter.get(O);result=new(typeof this=="function"?this:Array);for(;!(step=iterator.next()).done;index++){result[index]=mapping?call(iterator,f,[step.value,index],true):step.value}}else{result=new(typeof this=="function"?this:Array)(length=$.toLength(O.length));for(;length>index;index++){result[index]=mapping?f(O[index],index):O[index]}}result.length=index;return result}})},1828:function(module,exports,__webpack_require__){var createWrapper=__webpack_require__(348),identity=__webpack_require__(114);var PARTIAL_FLAG=32;function wrap(value,wrapper){wrapper=wrapper==null?identity:wrapper;return createWrapper(wrapper,PARTIAL_FLAG,undefined,[value],[])}module.exports=wrap},1830:function(module,exports,__webpack_require__){var baseForOwnRight=__webpack_require__(1831),createBaseEach=__webpack_require__(344);var baseEachRight=createBaseEach(baseForOwnRight,true);module.exports=baseEachRight},1831:function(module,exports,__webpack_require__){var baseForRight=__webpack_require__(1832),keys=__webpack_require__(28);function baseForOwnRight(object,iteratee){return baseForRight(object,iteratee,keys)}module.exports=baseForOwnRight},1832:function(module,exports,__webpack_require__){var createBaseFor=__webpack_require__(345);var baseForRight=createBaseFor(true);module.exports=baseForRight},1836:function(module,exports,__webpack_require__){var baseCallback=__webpack_require__(32),baseFind=__webpack_require__(341);function createFindKey(objectFunc){return function(object,predicate,thisArg){predicate=baseCallback(predicate,thisArg,3);return baseFind(object,predicate,objectFunc,true)}}module.exports=createFindKey},1842:function(module,exports,__webpack_require__){var baseForOwn=__webpack_require__(104),createFindKey=__webpack_require__(1836);var findKey=createFindKey(baseForOwn);module.exports=findKey}});